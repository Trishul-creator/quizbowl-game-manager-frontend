{"ast":null,"code":"import _objectSpread from\"/workspaces/quizbowl-game-manager-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import axios from\"axios\";import\"./App.css\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const api=axios.create({baseURL:\"https://api.quizbowl.game-manager.org\"});function useInterval(callback,delay){const savedCallback=useRef();useEffect(()=>{savedCallback.current=callback;},[callback]);useEffect(()=>{if(delay===null){return;}const id=setInterval(()=>{if(savedCallback.current){savedCallback.current();}},delay);return()=>clearInterval(id);},[delay]);}function App(){var _game$teamAScore,_game$questionNumber,_game$teamBScore;const[page,setPage]=useState(\"control\");const gameId=\"default\";const[game,setGame]=useState(null);const[loadingGame,setLoadingGame]=useState(false);const[bracket,setBracket]=useState(null);const[loadingBracket,setLoadingBracket]=useState(false);const[editingNames,setEditingNames]=useState(false);const[teamAInput,setTeamAInput]=useState(\"Team A\");const[teamBInput,setTeamBInput]=useState(\"Team B\");const[timerMode,setTimerMode]=useState(\"tossup\");const[timerSeconds,setTimerSeconds]=useState(7);const[timerRunning,setTimerRunning]=useState(false);const[bracketNamesText,setBracketNamesText]=useState(\"\");const[pairTeamAId,setPairTeamAId]=useState(\"\");const[pairTeamBId,setPairTeamBId]=useState(\"\");const[authToken,setAuthToken]=useState(()=>localStorage.getItem(\"authToken\")||\"\");const[authRole,setAuthRole]=useState(()=>localStorage.getItem(\"authRole\")||\"\");const[authUsername,setAuthUsername]=useState(()=>localStorage.getItem(\"authUsername\")||\"\");const[authEmail,setAuthEmail]=useState(\"\");const[authView,setAuthView]=useState(\"login\");const[loginUsername,setLoginUsername]=useState(\"\");const[loginPassword,setLoginPassword]=useState(\"\");const[registerUsername,setRegisterUsername]=useState(\"\");const[registerPassword,setRegisterPassword]=useState(\"\");const[authError,setAuthError]=useState(\"\");const[playerTeamId,setPlayerTeamId]=useState(\"\");const correctRef=useRef(null);const bonusRef=useRef(null);const timerEndRef=useRef(null);const adminHeaders=()=>authToken?{\"X-Admin-Token\":authToken}:{};const isAdmin=authRole===\"ADMIN\";const fetchGame=useCallback(async()=>{try{setLoadingGame(true);const res=await api.get(\"/api/game\",{params:{gameId}});if(isAdmin||!game){setGame(res.data);if(!editingNames){setTeamAInput(res.data.teamAName);setTeamBInput(res.data.teamBName);}}}catch(err){// no-op for now\n}finally{setLoadingGame(false);}},[editingNames,gameId,isAdmin,game]);const fetchBracket=useCallback(async()=>{try{setLoadingBracket(true);const res=await api.get(\"/api/bracket\");setBracket(res.data);}catch(err){// no-op\n}finally{setLoadingBracket(false);}},[]);useEffect(()=>{fetchGame();fetchBracket();},[fetchGame,fetchBracket,gameId]);// Polling removed: now relying on server-sent events (SSE) for updates to avoid overwhelming backend.\n// If SSE endpoints are not available on the server, a fallback polling strategy can be added.\n// Bracket SSE with reconnection/backoff\nuseEffect(()=>{let closed=false;let retry=0;let es=null;const connectBracket=()=>{if(closed)return;const base=api.defaults.baseURL?api.defaults.baseURL.replace(/\\/$/,\"\"):\"\";const url=\"\".concat(base,\"/api/bracket/stream\");es=new EventSource(url);es.addEventListener(\"bracket\",e=>{try{const data=JSON.parse(e.data);setBracket(data);}catch(err){// ignore parse errors\n}});es.onmessage=e=>{// handle generic messages if server doesn't use named events\ntry{const data=JSON.parse(e.data);setBracket(data);}catch(err){// ignore\n}};es.onerror=()=>{es.close();if(closed)return;retry++;const wait=Math.min(30000,2**retry*1000+Math.random()*1000);setTimeout(connectBracket,wait);};};connectBracket();return()=>{closed=true;if(es)es.close();};},[]);// Game SSE with reconnection/backoff (includes admin token as query param if present)\nuseEffect(()=>{let closed=false;let retry=0;let es=null;const connectGame=()=>{if(closed)return;const base=api.defaults.baseURL?api.defaults.baseURL.replace(/\\/$/,\"\"):\"\";const tokenQuery=authToken?\"?adminToken=\".concat(encodeURIComponent(authToken)):\"\";const url=\"\".concat(base,\"/api/game/stream\").concat(tokenQuery);es=new EventSource(url);es.addEventListener(\"game\",e=>{try{const data=JSON.parse(e.data);setGame(data);}catch(err){// ignore parse errors\n}});es.onmessage=e=>{// fallback for generic messages\ntry{const data=JSON.parse(e.data);setGame(data);}catch(err){// ignore\n}};es.onerror=()=>{es.close();if(closed)return;retry++;const wait=Math.min(30000,2**retry*1000+Math.random()*1000);setTimeout(connectGame,wait);};};connectGame();return()=>{closed=true;if(es)es.close();};},[authToken]);useInterval(()=>{setTimerSeconds(prev=>{if(!timerRunning){return prev;}const next=prev-1;if(next<=0){if(timerRunning){setTimerRunning(false);}if(timerEndRef.current){timerEndRef.current.currentTime=0;timerEndRef.current.play();}return 0;}return next;});},timerRunning?1000:null);useEffect(()=>{if(bracket&&bracket.teams){const available=bracket.teams.filter(t=>!t.eliminated);if(!pairTeamAId&&available[0]){setPairTeamAId(available[0].id);}if(!pairTeamBId&&available[1]){setPairTeamBId(available[1].id);}}},[bracket,pairTeamAId,pairTeamBId]);const startTimerWithMode=mode=>{setTimerMode(mode);setTimerSeconds(mode===\"bonus\"?20:7);setTimerRunning(true);};const pauseTimer=()=>{setTimerRunning(false);};const resetTimer=()=>{setTimerRunning(false);setTimerSeconds(timerMode===\"bonus\"?20:7);};const timerProgress=()=>{const total=timerMode===\"bonus\"?20:7;return Math.max(0,Math.min(1,timerSeconds/total));};const awardTossup=async team=>{if(isAdmin){await api.post(\"/api/game/award-tossup\",{team},{params:{gameId},headers:adminHeaders()});if(correctRef.current){correctRef.current.currentTime=0;correctRef.current.play();}fetchGame();return;}setGame(g=>{const base=g||{teamAName:teamAInput||\"Team A\",teamBName:teamBInput||\"Team B\",teamAScore:0,teamBScore:0,questionNumber:1,lastTossupWinner:null,history:[]};const next=_objectSpread(_objectSpread({},base),{},{history:[...(base.history||[])]});if(team===\"A\"){next.teamAScore=(next.teamAScore||0)+10;next.lastTossupWinner=\"A\";next.history.push({type:\"TOSSUP\",description:\"Tossup +10 \\u2192 \".concat(next.teamAName||\"Team A\"),timestamp:Date.now(),team:\"A\",points:10});}else if(team===\"B\"){next.teamBScore=(next.teamBScore||0)+10;next.lastTossupWinner=\"B\";next.history.push({type:\"TOSSUP\",description:\"Tossup +10 \\u2192 \".concat(next.teamBName||\"Team B\"),timestamp:Date.now(),team:\"B\",points:10});}return next;});if(correctRef.current){correctRef.current.currentTime=0;correctRef.current.play();}};const awardBonus=async()=>{if(isAdmin){await api.post(\"/api/game/award-bonus\",{points:10},{params:{gameId},headers:adminHeaders()});if(bonusRef.current){bonusRef.current.currentTime=0;bonusRef.current.play();}fetchGame();return;}setGame(g=>{if(!g||!g.lastTossupWinner)return g;const next=_objectSpread(_objectSpread({},g),{},{history:[...(g.history||[])]});if(g.lastTossupWinner===\"A\"){next.teamAScore=(next.teamAScore||0)+10;next.history.push({type:\"BONUS\",description:\"Bonus +10 \\u2192 \".concat(next.teamAName||\"Team A\"),timestamp:Date.now(),team:\"A\",points:10});}else if(g.lastTossupWinner===\"B\"){next.teamBScore=(next.teamBScore||0)+10;next.history.push({type:\"BONUS\",description:\"Bonus +10 \\u2192 \".concat(next.teamBName||\"Team B\"),timestamp:Date.now(),team:\"B\",points:10});}return next;});if(bonusRef.current){bonusRef.current.currentTime=0;bonusRef.current.play();}};const handleNextTossup=async()=>{if(!isAdmin){setGame(g=>g?_objectSpread(_objectSpread({},g),{},{questionNumber:(g.questionNumber||1)+1,lastTossupWinner:null}):g);setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);return;}await api.post(\"/api/game/next-tossup\",null,{params:{gameId},headers:adminHeaders()});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);fetchGame();};const handleResetGame=async()=>{try{if(!isAdmin){setGame({teamAName:\"Team A\",teamBName:\"Team B\",teamAScore:0,teamBScore:0,questionNumber:1,lastTossupWinner:null,history:[]});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);setAuthError(\"\");return;}await api.post(\"/api/game/reset\",null,{params:{gameId},headers:adminHeaders()});await api.post(\"/api/bracket/reset\",null,{headers:adminHeaders()});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);setPairTeamAId(\"\");setPairTeamBId(\"\");setPlayerTeamId(\"\");setBracketNamesText(\"\");setAuthError(\"\");fetchGame();fetchBracket();}catch(err){var _err$response,_err$response$data;const message=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Unable to reset game (are you logged in as admin?)\";setAuthError(message);}};const handleSaveNames=async()=>{if(!isAdmin){// local-only change for viewers\nsetGame(g=>_objectSpread(_objectSpread({},g||{}),{},{teamAName:teamAInput,teamBName:teamBInput}));setEditingNames(false);return;}await api.post(\"/api/game/team-names\",{teamAName:teamAInput,teamBName:teamBInput},{params:{gameId},headers:adminHeaders()});setEditingNames(false);fetchGame();};const initBracket=async()=>{const names=bracketNamesText.split(\"\\n\").map(n=>n.trim()).filter(n=>n.length>0);await api.post(\"/api/bracket/init\",{teamNames:names},{headers:adminHeaders()});fetchBracket();};const resetBracket=async()=>{await api.post(\"/api/bracket/reset\",null,{headers:adminHeaders()});setPairTeamAId(\"\");setPairTeamBId(\"\");fetchBracket();};const pushPairingToGame=async()=>{if(!pairTeamAId||!pairTeamBId)return;await api.post(\"/api/bracket/set-current\",{teamAId:pairTeamAId,teamBId:pairTeamBId},{params:{gameId},headers:adminHeaders()});await fetchBracket();await fetchGame();};const finalizeCurrentMatch=async()=>{await api.post(\"/api/bracket/finalize-current\",null,{params:{gameId},headers:adminHeaders()});await fetchBracket();};const getTeamName=useCallback(id=>{if(!bracket||!bracket.teams)return\"\";const team=bracket.teams.find(t=>t.id===id);return team?team.name:\"\";},[bracket]);const history=useMemo(()=>{const items=(game===null||game===void 0?void 0:game.history)||[];return[...items].reverse();},[game]);const renderTree=bracketName=>{if(!bracket)return null;const matches=(bracket.matches||[]).filter(m=>m.bracket===bracketName);const byRound={};matches.forEach(m=>{if(!byRound[m.round])byRound[m.round]=[];byRound[m.round].push(m);});const rounds=Object.keys(byRound).map(n=>parseInt(n,10)).sort((a,b)=>a-b);return/*#__PURE__*/_jsx(\"div\",{className:\"bracket-tree\",children:rounds.map(round=>/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-col-title\",children:[\"Round \",round]}),byRound[round].map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"match-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"match-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTeamName(m.teamAId)}),/*#__PURE__*/_jsx(\"span\",{className:\"score-pill\",children:m.scoreA!==null&&m.scoreA!==undefined?m.scoreA:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTeamName(m.teamBId)}),/*#__PURE__*/_jsx(\"span\",{className:\"score-pill\",children:m.scoreB!==null&&m.scoreB!==undefined?m.scoreB:\"-\"})]}),m.winnerId&&/*#__PURE__*/_jsxs(\"div\",{className:\"winner-line\",children:[\"Winner: \",/*#__PURE__*/_jsx(\"strong\",{children:getTeamName(m.winnerId)})]})]},m.id))]},\"\".concat(bracketName,\"-\").concat(round)))});};const winnersList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated&&t.losses===0);const losersList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated&&t.losses===1);const eliminatedList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>t.eliminated);const timerTotal=timerMode===\"bonus\"?20:7;const radius=70;const circumference=2*Math.PI*radius;const progress=timerProgress();const offset=circumference*(1-progress);const stroke=progress>0.5?\"#4ade80\":progress>0.25?\"#fbbf24\":\"#fb923c\";const handleLogin=async()=>{try{const res=await api.post(\"/api/auth/login\",{username:loginUsername,password:loginPassword});setAuthToken(res.data.token);setAuthRole(res.data.role);setAuthUsername(res.data.username);localStorage.setItem(\"authToken\",res.data.token);localStorage.setItem(\"authRole\",res.data.role);localStorage.setItem(\"authUsername\",res.data.username);setAuthError(\"\");}catch(err){var _err$response2,_err$response2$data;const message=(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Invalid username or password\";setAuthError(message);}};const handleRegister=async()=>{try{const res=await api.post(\"/api/auth/register\",{username:registerUsername,password:registerPassword});setAuthToken(res.data.token);setAuthRole(res.data.role);setAuthUsername(res.data.username);localStorage.setItem(\"authToken\",res.data.token);localStorage.setItem(\"authRole\",res.data.role);localStorage.setItem(\"authUsername\",res.data.username);setAuthView(\"login\");setAuthError(\"\");}catch(err){var _err$response3,_err$response3$data;const message=(err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Registration failed\";setAuthError(message);}};const handleProfileUpdate=async(newUsername,newPassword)=>{try{const res=await api.post(\"/api/auth/update-profile\",{newUsername,newPassword},{headers:adminHeaders()});setAuthUsername(res.data.username);setAuthRole(res.data.role);localStorage.setItem(\"authUsername\",res.data.username);localStorage.setItem(\"authRole\",res.data.role);setAuthError(\"Profile updated\");}catch(err){var _err$response4,_err$response4$data;const message=(err===null||err===void 0?void 0:(_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Update failed\";setAuthError(message);}};const handleLogout=()=>{setAuthToken(\"\");setAuthRole(\"\");setAuthUsername(\"\");localStorage.removeItem(\"authToken\");localStorage.removeItem(\"authRole\");localStorage.removeItem(\"authUsername\");};const nextMatchForTeam=teamId=>{if(!bracket||!teamId)return null;const pending=(bracket.matches||[]).find(m=>!m.completed&&(m.teamAId===teamId||m.teamBId===teamId));if(pending){return{bracket:pending.bracket,round:pending.round,opponent:pending.teamAId===teamId?getTeamName(pending.teamBId):getTeamName(pending.teamAId)};}const suggestedWin=(bracket.suggestedWinnersPairs||[]).find(p=>p.teamAId===teamId||p.teamBId===teamId);if(suggestedWin){const opponent=suggestedWin.teamAId===teamId?getTeamName(suggestedWin.teamBId):getTeamName(suggestedWin.teamAId);return{bracket:\"WINNERS\",round:\"TBD\",opponent,status:\"Awaiting winners pairing\"};}const suggestedLose=(bracket.suggestedLosersPairs||[]).find(p=>p.teamAId===teamId||p.teamBId===teamId);if(suggestedLose){const opponent=suggestedLose.teamAId===teamId?getTeamName(suggestedLose.teamBId):getTeamName(suggestedLose.teamAId);return{bracket:\"LOSERS\",round:\"TBD\",opponent,status:\"Awaiting losers pairing\"};}const team=(bracket.teams||[]).find(t=>t.id===teamId);if(team!==null&&team!==void 0&&team.eliminated){return{status:\"Eliminated\"};}if(bracket.finished){return{status:\"Bracket finished\"};}return{status:\"Waiting for scheduling\"};};const viewerNextMatch=nextMatchForTeam(playerTeamId);if(!authToken){return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(authView===\"login\"?\"active\":\"\"),onClick:()=>setAuthView(\"login\"),children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(authView===\"register\"?\"active\":\"\"),onClick:()=>setAuthView(\"register\"),children:\"Register\"})]}),authView===\"login\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Admins sign in; players use their own account.\"}),/*#__PURE__*/_jsx(\"input\",{value:loginUsername,onChange:e=>setLoginUsername(e.target.value),placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:loginPassword,onChange:e=>setLoginPassword(e.target.value),placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleLogin,children:\"Sign in\"})]}):authView===\"register\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create your account\"}),/*#__PURE__*/_jsx(\"input\",{value:registerUsername,onChange:e=>setRegisterUsername(e.target.value),placeholder:\"Choose username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerPassword,onChange:e=>setRegisterPassword(e.target.value),placeholder:\"Choose password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleRegister,children:\"Register & continue\"})]}):null,authError&&/*#__PURE__*/_jsx(\"div\",{className:\"auth-error\",children:authError})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"Quizbowl Control\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-chip\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-name\",children:authUsername||\"user\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-role\",children:[\"(\",isAdmin?\"Administrator\":\"Viewer\",\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost small-btn\",onClick:()=>handleProfileUpdate(prompt(\"New username (leave blank to keep)\",\"\"),prompt(\"New password (leave blank to keep)\",\"\")),children:\"Update profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(page===\"control\"?\"active\":\"\"),onClick:()=>setPage(\"control\"),children:\"Control\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(page===\"bracket\"?\"active\":\"\"),onClick:()=>setPage(\"bracket\"),children:\"Bracket\"})]})]})]}),page===\"control\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card timer-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Timer & Flow\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chip-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chip \".concat(timerMode===\"tossup\"?\"active\":\"\"),onClick:()=>{setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);},children:\"Tossup (7s)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chip \".concat(timerMode===\"bonus\"?\"active\":\"\"),onClick:()=>{setTimerMode(\"bonus\");setTimerSeconds(20);setTimerRunning(false);},children:\"Bonus (20s)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-visual\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-ring\",children:[/*#__PURE__*/_jsxs(\"svg\",{height:\"180\",width:\"180\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"90\",cy:\"90\",r:radius,stroke:\"#1f2a44\",strokeWidth:\"10\",fill:\"none\",className:\"timer-track\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"90\",cy:\"90\",r:radius,stroke:stroke,strokeWidth:\"10\",fill:\"none\",strokeDasharray:circumference,strokeDashoffset:offset,transform:\"rotate(-90 90 90)\",strokeLinecap:\"round\",className:\"timer-progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-value\",children:[timerSeconds,\"s\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-mode-label\",children:[timerMode===\"bonus\"?\"Bonus\":\"Tossup\",\" timer\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:()=>startTimerWithMode(timerMode),children:\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:pauseTimer,children:\"Pause\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:resetTimer,children:\"Reset\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-side\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Use Tossup/Bonus chips to load durations.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Start resets to the full length for the selected mode. Pause halts countdown.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Next Tossup will also clear the timer back to 7 seconds.\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card scoreboard-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"scoreboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot dot-a\"}),editingNames?/*#__PURE__*/_jsx(\"input\",{value:teamAInput,onChange:e=>setTeamAInput(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:(game===null||game===void 0?void 0:game.teamAName)||\"Team A\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-score\",children:(_game$teamAScore=game===null||game===void 0?void 0:game.teamAScore)!==null&&_game$teamAScore!==void 0?_game$teamAScore:0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"question-label\",children:\"Question\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-number\",children:[\"#\",(_game$questionNumber=game===null||game===void 0?void 0:game.questionNumber)!==null&&_game$questionNumber!==void 0?_game$questionNumber:1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleNextTossup,children:\"Next tossup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleResetGame,children:\"Reset game\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chip small \".concat(editingNames?\"active\":\"\"),onClick:()=>setEditingNames(v=>!v),children:editingNames?\"Editing…\":\"Edit names\"}),editingNames&&/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleSaveNames,children:\"Save names\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot dot-b\"}),editingNames?/*#__PURE__*/_jsx(\"input\",{value:teamBInput,onChange:e=>setTeamBInput(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:(game===null||game===void 0?void 0:game.teamBName)||\"Team B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-score\",children:(_game$teamBScore=game===null||game===void 0?void 0:game.teamBScore)!==null&&_game$teamBScore!==void 0?_game$teamBScore:0})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-bottom-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card scoring-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Scoring\"}),/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Live actions feed the history log.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scoring-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-label\",children:\"Tossups\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-row\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn primary wide\",onClick:()=>awardTossup(\"A\"),children:[\"Tossup +10 \\u2192 \",(game===null||game===void 0?void 0:game.teamAName)||\"Team A\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn primary wide\",onClick:()=>awardTossup(\"B\"),children:[\"Tossup +10 \\u2192 \",(game===null||game===void 0?void 0:game.teamBName)||\"Team B\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scoring-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-label\",children:\"Bonus\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn bonus wide\",disabled:!(game!==null&&game!==void 0&&game.lastTossupWinner)||!isAdmin,onClick:awardBonus,children:(game===null||game===void 0?void 0:game.lastTossupWinner)===\"A\"?\"Bonus +10 \\u2192 \".concat((game===null||game===void 0?void 0:game.teamAName)||\"Team A\"):(game===null||game===void 0?void 0:game.lastTossupWinner)===\"B\"?\"Bonus +10 \\u2192 \".concat((game===null||game===void 0?void 0:game.teamBName)||\"Team B\"):\"Bonus +10 (await tossup)\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"muted small-text\",children:\"Bonus always goes to whoever got the last tossup. If no tossup, no bonus.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card history-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent history\"}),loadingGame&&/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Syncing\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-list\",children:[history.map((ev,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-type\",children:ev.type}),/*#__PURE__*/_jsx(\"div\",{className:\"history-desc\",children:ev.description}),/*#__PURE__*/_jsx(\"div\",{className:\"history-time\",children:new Date(ev.timestamp).toLocaleTimeString()})]},\"\".concat(ev.timestamp,\"-\").concat(idx))),history.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:\"No events yet.\"})]})]})]})]}),page===\"bracket\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-layout\",children:[isAdmin&&(!(bracket!==null&&bracket!==void 0&&bracket.teams)||(bracket===null||bracket===void 0?void 0:bracket.teams.length)===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"card setup-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bracket setup & pairing\"}),loadingBracket&&/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Loading\\u2026\"})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"bracket-textarea\",placeholder:\"Enter one team per line\",value:bracketNamesText,onChange:e=>setBracketNamesText(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:initBracket,disabled:!isAdmin,children:\"Initialize bracket\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:resetBracket,disabled:!isAdmin,children:\"Reset bracket\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Left scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamAId,onChange:e=>setPairTeamAId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Right scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamBId,onChange:e=>setPairTeamBId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:pushPairingToGame,disabled:!isAdmin,children:\"Push pairing to game\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:finalizeCurrentMatch,disabled:!isAdmin,children:\"Finalize current match\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip winners\",children:[\"Winners:\",\" \",winnersList.length?winnersList.map(t=>t.name).join(\", \"):\"—\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip losers\",children:[\"Losers:\",\" \",losersList.length?losersList.map(t=>t.name).join(\", \"):\"—\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip eliminated\",children:[\"Eliminated:\",\" \",eliminatedList.length?eliminatedList.map(t=>t.name).join(\", \"):\"—\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"suggestions-row\",children:[(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersTeamAId)&&(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersTeamBId)&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[\"Next winners match:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[getTeamName(bracket.suggestedWinnersTeamAId),\" vs\",\" \",getTeamName(bracket.suggestedWinnersTeamBId)]})]}),(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersTeamAId)&&(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersTeamBId)&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[\"Next losers match:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[getTeamName(bracket.suggestedLosersTeamAId),\" vs\",\" \",getTeamName(bracket.suggestedLosersTeamBId)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card bracket-card\",children:[isAdmin&&((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"inline-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Left scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamAId,onChange:e=>setPairTeamAId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Right scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamBId,onChange:e=>setPairTeamBId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:pushPairingToGame,disabled:!isAdmin,children:\"Push to game\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:finalizeCurrentMatch,disabled:!isAdmin,children:\"Finalize current\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"trees-top-row\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tree-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Winners bracket\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-line\",children:winnersList.map(t=>t.name).join(\" • \")}),(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersPairs)&&bracket.suggestedWinnersPairs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggest-list\",children:bracket.suggestedWinnersPairs.map((p,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[getTeamName(p.teamAId),\" vs \",getTeamName(p.teamBId)]},\"w-\".concat(p.teamAId,\"-\").concat(p.teamBId,\"-\").concat(idx)))})]}),renderTree(\"WINNERS\")]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tree-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Losers bracket\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-line\",children:losersList.map(t=>t.name).join(\" • \")}),(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersPairs)&&bracket.suggestedLosersPairs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggest-list\",children:bracket.suggestedLosersPairs.map((p,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[getTeamName(p.teamAId),\" vs \",getTeamName(p.teamBId)]},\"l-\".concat(p.teamAId,\"-\").concat(p.teamBId,\"-\").concat(idx)))})]}),renderTree(\"LOSERS\")]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"standings\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Standings\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Team\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Losses\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).slice().sort((a,b)=>a.losses-b.losses).map(team=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:team.name}),/*#__PURE__*/_jsx(\"td\",{children:team.losses}),/*#__PURE__*/_jsx(\"td\",{children:team.eliminated?\"Eliminated\":team.losses===0?\"Winners bracket\":\"Losers bracket\"})]},team.id))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-card card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Player lookup\"}),/*#__PURE__*/_jsxs(\"select\",{value:playerTeamId,onChange:e=>setPlayerTeamId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select your team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]}),viewerNextMatch?/*#__PURE__*/_jsx(\"div\",{className:\"viewer-info\",children:viewerNextMatch.status?/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:viewerNextMatch.status}):/*#__PURE__*/_jsxs(\"div\",{children:[\"Next match: \",viewerNextMatch.bracket,\" Round \",viewerNextMatch.round,\" vs\",\" \",viewerNextMatch.opponent||\"TBD\"]})}):/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:\"No pending matches found yet.\"})]})]}),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"footer-bar\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleResetGame,children:\"Reset game\"})}),/*#__PURE__*/_jsx(\"audio\",{ref:correctRef,src:\"/sounds/correct.wav\"}),/*#__PURE__*/_jsx(\"audio\",{ref:bonusRef,src:\"/sounds/bonus.wav\"}),/*#__PURE__*/_jsx(\"audio\",{ref:timerEndRef,src:\"/sounds/timer_end.wav\"})]});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","api","create","baseURL","useInterval","callback","delay","savedCallback","current","id","setInterval","clearInterval","App","_game$teamAScore","_game$questionNumber","_game$teamBScore","page","setPage","gameId","game","setGame","loadingGame","setLoadingGame","bracket","setBracket","loadingBracket","setLoadingBracket","editingNames","setEditingNames","teamAInput","setTeamAInput","teamBInput","setTeamBInput","timerMode","setTimerMode","timerSeconds","setTimerSeconds","timerRunning","setTimerRunning","bracketNamesText","setBracketNamesText","pairTeamAId","setPairTeamAId","pairTeamBId","setPairTeamBId","authToken","setAuthToken","localStorage","getItem","authRole","setAuthRole","authUsername","setAuthUsername","authEmail","setAuthEmail","authView","setAuthView","loginUsername","setLoginUsername","loginPassword","setLoginPassword","registerUsername","setRegisterUsername","registerPassword","setRegisterPassword","authError","setAuthError","playerTeamId","setPlayerTeamId","correctRef","bonusRef","timerEndRef","adminHeaders","isAdmin","fetchGame","res","get","params","data","teamAName","teamBName","err","fetchBracket","closed","retry","es","connectBracket","base","defaults","replace","url","concat","EventSource","addEventListener","e","JSON","parse","onmessage","onerror","close","wait","Math","min","random","setTimeout","connectGame","tokenQuery","encodeURIComponent","prev","next","currentTime","play","teams","available","filter","t","eliminated","startTimerWithMode","mode","pauseTimer","resetTimer","timerProgress","total","max","awardTossup","team","post","headers","g","teamAScore","teamBScore","questionNumber","lastTossupWinner","history","_objectSpread","push","type","description","timestamp","Date","now","points","awardBonus","handleNextTossup","handleResetGame","_err$response","_err$response$data","message","response","handleSaveNames","initBracket","names","split","map","n","trim","length","teamNames","resetBracket","pushPairingToGame","teamAId","teamBId","finalizeCurrentMatch","getTeamName","find","name","items","reverse","renderTree","bracketName","matches","m","byRound","forEach","round","rounds","Object","keys","parseInt","sort","a","b","className","children","scoreA","undefined","scoreB","winnerId","winnersList","losses","losersList","eliminatedList","timerTotal","radius","circumference","PI","progress","offset","stroke","handleLogin","username","password","token","role","setItem","_err$response2","_err$response2$data","handleRegister","_err$response3","_err$response3$data","handleProfileUpdate","newUsername","newPassword","_err$response4","_err$response4$data","handleLogout","removeItem","nextMatchForTeam","teamId","pending","completed","opponent","suggestedWin","suggestedWinnersPairs","p","status","suggestedLose","suggestedLosersPairs","finished","viewerNextMatch","onClick","value","onChange","target","placeholder","prompt","height","width","cx","cy","r","strokeWidth","fill","strokeDasharray","strokeDashoffset","transform","strokeLinecap","v","disabled","ev","idx","toLocaleTimeString","join","suggestedWinnersTeamAId","suggestedWinnersTeamBId","suggestedLosersTeamAId","suggestedLosersTeamBId","slice","ref","src"],"sources":["/workspaces/quizbowl-game-manager-frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nconst api = axios.create({\n  baseURL: \"https://api.quizbowl.game-manager.org\",\n});\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (delay === null) {\n      return;\n    }\n    const id = setInterval(() => {\n      if (savedCallback.current) {\n        savedCallback.current();\n      }\n    }, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n\nfunction App() {\n  const [page, setPage] = useState(\"control\");\n  const gameId = \"default\";\n  const [game, setGame] = useState(null);\n  const [loadingGame, setLoadingGame] = useState(false);\n  const [bracket, setBracket] = useState(null);\n  const [loadingBracket, setLoadingBracket] = useState(false);\n  const [editingNames, setEditingNames] = useState(false);\n  const [teamAInput, setTeamAInput] = useState(\"Team A\");\n  const [teamBInput, setTeamBInput] = useState(\"Team B\");\n  const [timerMode, setTimerMode] = useState(\"tossup\");\n  const [timerSeconds, setTimerSeconds] = useState(7);\n  const [timerRunning, setTimerRunning] = useState(false);\n  const [bracketNamesText, setBracketNamesText] = useState(\"\");\n  const [pairTeamAId, setPairTeamAId] = useState(\"\");\n  const [pairTeamBId, setPairTeamBId] = useState(\"\");\n  const [authToken, setAuthToken] = useState(() => localStorage.getItem(\"authToken\") || \"\");\n  const [authRole, setAuthRole] = useState(() => localStorage.getItem(\"authRole\") || \"\");\n  const [authUsername, setAuthUsername] = useState(() => localStorage.getItem(\"authUsername\") || \"\");\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [authView, setAuthView] = useState(\"login\");\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [registerUsername, setRegisterUsername] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [authError, setAuthError] = useState(\"\");\n  const [playerTeamId, setPlayerTeamId] = useState(\"\");\n\n  const correctRef = useRef(null);\n  const bonusRef = useRef(null);\n  const timerEndRef = useRef(null);\n\n  const adminHeaders = () => (authToken ? { \"X-Admin-Token\": authToken } : {});\n  const isAdmin = authRole === \"ADMIN\";\n\n  const fetchGame = useCallback(async () => {\n    try {\n      setLoadingGame(true);\n      const res = await api.get(\"/api/game\", { params: { gameId } });\n      if (isAdmin || !game) {\n        setGame(res.data);\n        if (!editingNames) {\n          setTeamAInput(res.data.teamAName);\n          setTeamBInput(res.data.teamBName);\n        }\n      }\n    } catch (err) {\n      // no-op for now\n    } finally {\n      setLoadingGame(false);\n    }\n  }, [editingNames, gameId, isAdmin, game]);\n\n  const fetchBracket = useCallback(async () => {\n    try {\n      setLoadingBracket(true);\n      const res = await api.get(\"/api/bracket\");\n      setBracket(res.data);\n    } catch (err) {\n      // no-op\n    } finally {\n      setLoadingBracket(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchGame();\n    fetchBracket();\n  }, [fetchGame, fetchBracket, gameId]);\n\n  // Polling removed: now relying on server-sent events (SSE) for updates to avoid overwhelming backend.\n  // If SSE endpoints are not available on the server, a fallback polling strategy can be added.\n\n  // Bracket SSE with reconnection/backoff\n  useEffect(() => {\n    let closed = false;\n    let retry = 0;\n    let es = null;\n\n    const connectBracket = () => {\n      if (closed) return;\n      const base = api.defaults.baseURL ? api.defaults.baseURL.replace(/\\/$/, \"\") : \"\";\n      const url = `${base}/api/bracket/stream`;\n      es = new EventSource(url);\n      es.addEventListener(\"bracket\", (e) => {\n        try {\n          const data = JSON.parse(e.data);\n          setBracket(data);\n        } catch (err) {\n          // ignore parse errors\n        }\n      });\n      es.onmessage = (e) => {\n        // handle generic messages if server doesn't use named events\n        try {\n          const data = JSON.parse(e.data);\n          setBracket(data);\n        } catch (err) {\n          // ignore\n        }\n      };\n      es.onerror = () => {\n        es.close();\n        if (closed) return;\n        retry++;\n        const wait = Math.min(30000, (2 ** retry) * 1000 + Math.random() * 1000);\n        setTimeout(connectBracket, wait);\n      };\n    };\n\n    connectBracket();\n    return () => {\n      closed = true;\n      if (es) es.close();\n    };\n  }, []);\n\n  // Game SSE with reconnection/backoff (includes admin token as query param if present)\n  useEffect(() => {\n    let closed = false;\n    let retry = 0;\n    let es = null;\n\n    const connectGame = () => {\n      if (closed) return;\n      const base = api.defaults.baseURL ? api.defaults.baseURL.replace(/\\/$/, \"\") : \"\";\n      const tokenQuery = authToken ? `?adminToken=${encodeURIComponent(authToken)}` : \"\";\n      const url = `${base}/api/game/stream${tokenQuery}`;\n      es = new EventSource(url);\n      es.addEventListener(\"game\", (e) => {\n        try {\n          const data = JSON.parse(e.data);\n          setGame(data);\n        } catch (err) {\n          // ignore parse errors\n        }\n      });\n      es.onmessage = (e) => {\n        // fallback for generic messages\n        try {\n          const data = JSON.parse(e.data);\n          setGame(data);\n        } catch (err) {\n          // ignore\n        }\n      };\n      es.onerror = () => {\n        es.close();\n        if (closed) return;\n        retry++;\n        const wait = Math.min(30000, (2 ** retry) * 1000 + Math.random() * 1000);\n        setTimeout(connectGame, wait);\n      };\n    };\n\n    connectGame();\n    return () => {\n      closed = true;\n      if (es) es.close();\n    };\n  }, [authToken]);\n\n  useInterval(() => {\n    setTimerSeconds((prev) => {\n      if (!timerRunning) {\n        return prev;\n      }\n      const next = prev - 1;\n      if (next <= 0) {\n        if (timerRunning) {\n          setTimerRunning(false);\n        }\n        if (timerEndRef.current) {\n          timerEndRef.current.currentTime = 0;\n          timerEndRef.current.play();\n        }\n        return 0;\n      }\n      return next;\n    });\n  }, timerRunning ? 1000 : null);\n\n  useEffect(() => {\n    if (bracket && bracket.teams) {\n      const available = bracket.teams.filter((t) => !t.eliminated);\n      if (!pairTeamAId && available[0]) {\n        setPairTeamAId(available[0].id);\n      }\n      if (!pairTeamBId && available[1]) {\n        setPairTeamBId(available[1].id);\n      }\n    }\n  }, [bracket, pairTeamAId, pairTeamBId]);\n\n  const startTimerWithMode = (mode) => {\n    setTimerMode(mode);\n    setTimerSeconds(mode === \"bonus\" ? 20 : 7);\n    setTimerRunning(true);\n  };\n\n  const pauseTimer = () => {\n    setTimerRunning(false);\n  };\n\n  const resetTimer = () => {\n    setTimerRunning(false);\n    setTimerSeconds(timerMode === \"bonus\" ? 20 : 7);\n  };\n\n  const timerProgress = () => {\n    const total = timerMode === \"bonus\" ? 20 : 7;\n    return Math.max(0, Math.min(1, timerSeconds / total));\n  };\n\n  const awardTossup = async (team) => {\n    if (isAdmin) {\n      await api.post(\"/api/game/award-tossup\", { team }, { params: { gameId }, headers: adminHeaders() });\n      if (correctRef.current) {\n        correctRef.current.currentTime = 0;\n        correctRef.current.play();\n      }\n      fetchGame();\n      return;\n    }\n    setGame((g) => {\n      const base = g || {\n        teamAName: teamAInput || \"Team A\",\n        teamBName: teamBInput || \"Team B\",\n        teamAScore: 0,\n        teamBScore: 0,\n        questionNumber: 1,\n        lastTossupWinner: null,\n        history: [],\n      };\n      const next = { ...base, history: [...(base.history || [])] };\n      if (team === \"A\") {\n        next.teamAScore = (next.teamAScore || 0) + 10;\n        next.lastTossupWinner = \"A\";\n        next.history.push({\n          type: \"TOSSUP\",\n          description: `Tossup +10 → ${next.teamAName || \"Team A\"}`,\n          timestamp: Date.now(),\n          team: \"A\",\n          points: 10,\n        });\n      } else if (team === \"B\") {\n        next.teamBScore = (next.teamBScore || 0) + 10;\n        next.lastTossupWinner = \"B\";\n        next.history.push({\n          type: \"TOSSUP\",\n          description: `Tossup +10 → ${next.teamBName || \"Team B\"}`,\n          timestamp: Date.now(),\n          team: \"B\",\n          points: 10,\n        });\n      }\n      return next;\n    });\n    if (correctRef.current) {\n      correctRef.current.currentTime = 0;\n      correctRef.current.play();\n    }\n  };\n\n  const awardBonus = async () => {\n    if (isAdmin) {\n      await api.post(\"/api/game/award-bonus\", { points: 10 }, { params: { gameId }, headers: adminHeaders() });\n      if (bonusRef.current) {\n        bonusRef.current.currentTime = 0;\n        bonusRef.current.play();\n      }\n      fetchGame();\n      return;\n    }\n    setGame((g) => {\n      if (!g || !g.lastTossupWinner) return g;\n      const next = { ...g, history: [...(g.history || [])] };\n      if (g.lastTossupWinner === \"A\") {\n        next.teamAScore = (next.teamAScore || 0) + 10;\n        next.history.push({\n          type: \"BONUS\",\n          description: `Bonus +10 → ${next.teamAName || \"Team A\"}`,\n          timestamp: Date.now(),\n          team: \"A\",\n          points: 10,\n        });\n      } else if (g.lastTossupWinner === \"B\") {\n        next.teamBScore = (next.teamBScore || 0) + 10;\n        next.history.push({\n          type: \"BONUS\",\n          description: `Bonus +10 → ${next.teamBName || \"Team B\"}`,\n          timestamp: Date.now(),\n          team: \"B\",\n          points: 10,\n        });\n      }\n      return next;\n    });\n    if (bonusRef.current) {\n      bonusRef.current.currentTime = 0;\n      bonusRef.current.play();\n    }\n  };\n\n  const handleNextTossup = async () => {\n    if (!isAdmin) {\n      setGame((g) =>\n        g\n          ? { ...g, questionNumber: (g.questionNumber || 1) + 1, lastTossupWinner: null }\n          : g\n      );\n      setTimerMode(\"tossup\");\n      setTimerSeconds(7);\n      setTimerRunning(false);\n      return;\n    }\n    await api.post(\"/api/game/next-tossup\", null, { params: { gameId }, headers: adminHeaders() });\n    setTimerMode(\"tossup\");\n    setTimerSeconds(7);\n    setTimerRunning(false);\n    fetchGame();\n  };\n\n  const handleResetGame = async () => {\n    try {\n      if (!isAdmin) {\n        setGame({\n          teamAName: \"Team A\",\n          teamBName: \"Team B\",\n          teamAScore: 0,\n          teamBScore: 0,\n          questionNumber: 1,\n          lastTossupWinner: null,\n          history: [],\n        });\n        setTimerMode(\"tossup\");\n        setTimerSeconds(7);\n        setTimerRunning(false);\n        setAuthError(\"\");\n        return;\n      }\n      await api.post(\"/api/game/reset\", null, { params: { gameId }, headers: adminHeaders() });\n      await api.post(\"/api/bracket/reset\", null, { headers: adminHeaders() });\n      setTimerMode(\"tossup\");\n      setTimerSeconds(7);\n      setTimerRunning(false);\n      setPairTeamAId(\"\");\n      setPairTeamBId(\"\");\n      setPlayerTeamId(\"\");\n      setBracketNamesText(\"\");\n      setAuthError(\"\");\n      fetchGame();\n      fetchBracket();\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Unable to reset game (are you logged in as admin?)\";\n      setAuthError(message);\n    }\n  };\n\n  const handleSaveNames = async () => {\n    if (!isAdmin) {\n      // local-only change for viewers\n      setGame((g) => ({\n        ...(g || {}),\n        teamAName: teamAInput,\n        teamBName: teamBInput,\n      }));\n      setEditingNames(false);\n      return;\n    }\n    await api.post(\"/api/game/team-names\", {\n      teamAName: teamAInput,\n      teamBName: teamBInput,\n    }, { params: { gameId }, headers: adminHeaders() });\n    setEditingNames(false);\n    fetchGame();\n  };\n\n  const initBracket = async () => {\n    const names = bracketNamesText\n      .split(\"\\n\")\n      .map((n) => n.trim())\n      .filter((n) => n.length > 0);\n    await api.post(\"/api/bracket/init\", { teamNames: names }, { headers: adminHeaders() });\n    fetchBracket();\n  };\n\n  const resetBracket = async () => {\n    await api.post(\"/api/bracket/reset\", null, { headers: adminHeaders() });\n    setPairTeamAId(\"\");\n    setPairTeamBId(\"\");\n    fetchBracket();\n  };\n\n  const pushPairingToGame = async () => {\n    if (!pairTeamAId || !pairTeamBId) return;\n    await api.post(\n      \"/api/bracket/set-current\",\n      {\n        teamAId: pairTeamAId,\n        teamBId: pairTeamBId,\n      },\n      { params: { gameId }, headers: adminHeaders() }\n    );\n    await fetchBracket();\n    await fetchGame();\n  };\n\n  const finalizeCurrentMatch = async () => {\n    await api.post(\"/api/bracket/finalize-current\", null, { params: { gameId }, headers: adminHeaders() });\n    await fetchBracket();\n  };\n\n  const getTeamName = useCallback(\n    (id) => {\n      if (!bracket || !bracket.teams) return \"\";\n      const team = bracket.teams.find((t) => t.id === id);\n      return team ? team.name : \"\";\n    },\n    [bracket]\n  );\n\n  const history = useMemo(() => {\n    const items = game?.history || [];\n    return [...items].reverse();\n  }, [game]);\n\n  const renderTree = (bracketName) => {\n    if (!bracket) return null;\n    const matches = (bracket.matches || []).filter((m) => m.bracket === bracketName);\n    const byRound = {};\n    matches.forEach((m) => {\n      if (!byRound[m.round]) byRound[m.round] = [];\n      byRound[m.round].push(m);\n    });\n    const rounds = Object.keys(byRound)\n      .map((n) => parseInt(n, 10))\n      .sort((a, b) => a - b);\n\n    return (\n      <div className=\"bracket-tree\">\n        {rounds.map((round) => (\n          <div className=\"bracket-col\" key={`${bracketName}-${round}`}>\n            <div className=\"bracket-col-title\">Round {round}</div>\n            {byRound[round].map((m) => (\n              <div className=\"match-card\" key={m.id}>\n                <div className=\"match-row\">\n                  <span>{getTeamName(m.teamAId)}</span>\n                  <span className=\"score-pill\">\n                    {m.scoreA !== null && m.scoreA !== undefined ? m.scoreA : \"-\"}\n                  </span>\n                </div>\n                <div className=\"match-row\">\n                  <span>{getTeamName(m.teamBId)}</span>\n                  <span className=\"score-pill\">\n                    {m.scoreB !== null && m.scoreB !== undefined ? m.scoreB : \"-\"}\n                  </span>\n                </div>\n                {m.winnerId && (\n                  <div className=\"winner-line\">\n                    Winner: <strong>{getTeamName(m.winnerId)}</strong>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const winnersList = (bracket?.teams || []).filter(\n    (t) => !t.eliminated && t.losses === 0\n  );\n  const losersList = (bracket?.teams || []).filter(\n    (t) => !t.eliminated && t.losses === 1\n  );\n  const eliminatedList = (bracket?.teams || []).filter((t) => t.eliminated);\n\n  const timerTotal = timerMode === \"bonus\" ? 20 : 7;\n  const radius = 70;\n  const circumference = 2 * Math.PI * radius;\n  const progress = timerProgress();\n  const offset = circumference * (1 - progress);\n  const stroke =\n    progress > 0.5 ? \"#4ade80\" : progress > 0.25 ? \"#fbbf24\" : \"#fb923c\";\n\n  const handleLogin = async () => {\n    try {\n      const res = await api.post(\"/api/auth/login\", {\n        username: loginUsername,\n        password: loginPassword,\n      });\n      setAuthToken(res.data.token);\n      setAuthRole(res.data.role);\n      setAuthUsername(res.data.username);\n      localStorage.setItem(\"authToken\", res.data.token);\n      localStorage.setItem(\"authRole\", res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      setAuthError(\"\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Invalid username or password\";\n      setAuthError(message);\n    }\n  };\n\n  const handleRegister = async () => {\n    try {\n      const res = await api.post(\"/api/auth/register\", {\n        username: registerUsername,\n        password: registerPassword,\n      });\n      setAuthToken(res.data.token);\n      setAuthRole(res.data.role);\n      setAuthUsername(res.data.username);\n      localStorage.setItem(\"authToken\", res.data.token);\n      localStorage.setItem(\"authRole\", res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      setAuthView(\"login\");\n      setAuthError(\"\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Registration failed\";\n      setAuthError(message);\n    }\n  };\n\n  const handleProfileUpdate = async (newUsername, newPassword) => {\n    try {\n      const res = await api.post(\n        \"/api/auth/update-profile\",\n        { newUsername, newPassword },\n        { headers: adminHeaders() }\n      );\n      setAuthUsername(res.data.username);\n      setAuthRole(res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      localStorage.setItem(\"authRole\", res.data.role);\n      setAuthError(\"Profile updated\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Update failed\";\n      setAuthError(message);\n    }\n  };\n\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setAuthRole(\"\");\n    setAuthUsername(\"\");\n    localStorage.removeItem(\"authToken\");\n    localStorage.removeItem(\"authRole\");\n    localStorage.removeItem(\"authUsername\");\n  };\n\n  const nextMatchForTeam = (teamId) => {\n    if (!bracket || !teamId) return null;\n    const pending = (bracket.matches || []).find(\n      (m) => !m.completed && (m.teamAId === teamId || m.teamBId === teamId)\n    );\n    if (pending) {\n      return {\n        bracket: pending.bracket,\n        round: pending.round,\n        opponent:\n          pending.teamAId === teamId ? getTeamName(pending.teamBId) : getTeamName(pending.teamAId),\n      };\n    }\n    const suggestedWin = (bracket.suggestedWinnersPairs || []).find(\n      (p) => p.teamAId === teamId || p.teamBId === teamId\n    );\n    if (suggestedWin) {\n      const opponent =\n        suggestedWin.teamAId === teamId\n          ? getTeamName(suggestedWin.teamBId)\n          : getTeamName(suggestedWin.teamAId);\n      return { bracket: \"WINNERS\", round: \"TBD\", opponent, status: \"Awaiting winners pairing\" };\n    }\n    const suggestedLose = (bracket.suggestedLosersPairs || []).find(\n      (p) => p.teamAId === teamId || p.teamBId === teamId\n    );\n    if (suggestedLose) {\n      const opponent =\n        suggestedLose.teamAId === teamId\n          ? getTeamName(suggestedLose.teamBId)\n          : getTeamName(suggestedLose.teamAId);\n      return { bracket: \"LOSERS\", round: \"TBD\", opponent, status: \"Awaiting losers pairing\" };\n    }\n    const team = (bracket.teams || []).find((t) => t.id === teamId);\n    if (team?.eliminated) {\n      return { status: \"Eliminated\" };\n    }\n    if (bracket.finished) {\n      return { status: \"Bracket finished\" };\n    }\n    return { status: \"Waiting for scheduling\" };\n  };\n\n  const viewerNextMatch = nextMatchForTeam(playerTeamId);\n\n  if (!authToken) {\n    return (\n      <div className=\"auth-page\">\n        <div className=\"auth-card\">\n          <div className=\"auth-toggle\">\n            <button\n              className={`tab ${authView === \"login\" ? \"active\" : \"\"}`}\n              onClick={() => setAuthView(\"login\")}\n            >\n              Login\n            </button>\n            <button\n              className={`tab ${authView === \"register\" ? \"active\" : \"\"}`}\n              onClick={() => setAuthView(\"register\")}\n            >\n              Register\n            </button>\n          </div>\n          {authView === \"login\" ? (\n            <>\n              <h2>Welcome back</h2>\n              <p className=\"muted\">Admins sign in; players use their own account.</p>\n              <input\n                value={loginUsername}\n                onChange={(e) => setLoginUsername(e.target.value)}\n                placeholder=\"Username\"\n              />\n              <input\n                type=\"password\"\n                value={loginPassword}\n                onChange={(e) => setLoginPassword(e.target.value)}\n                placeholder=\"Password\"\n              />\n              <button className=\"btn primary\" onClick={handleLogin}>\n                Sign in\n              </button>\n            </>\n          ) : authView === \"register\" ? (\n            <>\n              <h2>Create your account</h2>\n              <input\n                value={registerUsername}\n                onChange={(e) => setRegisterUsername(e.target.value)}\n                placeholder=\"Choose username\"\n              />\n              <input\n                type=\"password\"\n                value={registerPassword}\n                onChange={(e) => setRegisterPassword(e.target.value)}\n                placeholder=\"Choose password\"\n              />\n              <button className=\"btn primary\" onClick={handleRegister}>\n                Register &amp; continue\n              </button>\n            </>\n          ) : null}\n          {authError && <div className=\"auth-error\">{authError}</div>}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <div className=\"logo\">Quizbowl Control</div>\n        <div className=\"header-actions\">\n          <div className=\"auth-chip\">\n            <div className=\"auth-name\">{authUsername || \"user\"}</div>\n            <div className=\"auth-role\">({isAdmin ? \"Administrator\" : \"Viewer\"})</div>\n            <button\n              className=\"btn ghost small-btn\"\n              onClick={() => handleProfileUpdate(prompt(\"New username (leave blank to keep)\", \"\"), prompt(\"New password (leave blank to keep)\", \"\"))}\n            >\n              Update profile\n            </button>\n            <button className=\"btn ghost\" onClick={handleLogout}>\n              Logout\n            </button>\n          </div>\n          <div className=\"tabs\">\n            <button\n              className={`tab ${page === \"control\" ? \"active\" : \"\"}`}\n              onClick={() => setPage(\"control\")}\n            >\n              Control\n            </button>\n            <button\n              className={`tab ${page === \"bracket\" ? \"active\" : \"\"}`}\n              onClick={() => setPage(\"bracket\")}\n            >\n              Bracket\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {page === \"control\" && (\n        <>\n          <div className=\"control-layout\">\n            <div className=\"card timer-card\">\n              <div className=\"card-header\">\n                <h3>Timer &amp; Flow</h3>\n                <div className=\"chip-row\">\n                  <button\n                    className={`chip ${timerMode === \"tossup\" ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      setTimerMode(\"tossup\");\n                      setTimerSeconds(7);\n                      setTimerRunning(false);\n                    }}\n                  >\n                    Tossup (7s)\n                  </button>\n                  <button\n                    className={`chip ${timerMode === \"bonus\" ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      setTimerMode(\"bonus\");\n                      setTimerSeconds(20);\n                      setTimerRunning(false);\n                    }}\n                  >\n                    Bonus (20s)\n                  </button>\n                </div>\n              </div>\n              <div className=\"timer-body\">\n                <div className=\"timer-visual\">\n                  <div className=\"timer-ring\">\n                    <svg height=\"180\" width=\"180\">\n                      <circle\n                        cx=\"90\"\n                        cy=\"90\"\n                        r={radius}\n                        stroke=\"#1f2a44\"\n                        strokeWidth=\"10\"\n                        fill=\"none\"\n                        className=\"timer-track\"\n                      />\n                      <circle\n                        cx=\"90\"\n                        cy=\"90\"\n                        r={radius}\n                        stroke={stroke}\n                        strokeWidth=\"10\"\n                        fill=\"none\"\n                        strokeDasharray={circumference}\n                        strokeDashoffset={offset}\n                        transform=\"rotate(-90 90 90)\"\n                        strokeLinecap=\"round\"\n                        className=\"timer-progress\"\n                      />\n                    </svg>\n                    <div className=\"timer-center\">\n                      <div className=\"timer-value\">{timerSeconds}s</div>\n                      <div className=\"timer-mode-label\">\n                        {timerMode === \"bonus\" ? \"Bonus\" : \"Tossup\"} timer\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"timer-actions\">\n                    <button\n                      className=\"btn primary\"\n                      onClick={() => startTimerWithMode(timerMode)}\n                    >\n                      Start\n                    </button>\n                    <button className=\"btn ghost\" onClick={pauseTimer}>\n                      Pause\n                    </button>\n                    <button className=\"btn ghost\" onClick={resetTimer}>\n                      Reset\n                    </button>\n                  </div>\n                </div>\n                <div className=\"timer-side\">\n                  <p className=\"muted\">Use Tossup/Bonus chips to load durations.</p>\n                  <p className=\"muted\">\n                    Start resets to the full length for the selected mode. Pause halts countdown.\n                  </p>\n                  <p className=\"muted\">Next Tossup will also clear the timer back to 7 seconds.</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card scoreboard-card\">\n              <div className=\"scoreboard\">\n                <div className=\"team-block\">\n                  <div className=\"team-heading\">\n                    <span className=\"dot dot-a\" />\n                    {editingNames ? (\n                      <input\n                        value={teamAInput}\n                        onChange={(e) => setTeamAInput(e.target.value)}\n                      />\n                    ) : (\n                      <span className=\"team-name\">{game?.teamAName || \"Team A\"}</span>\n                    )}\n                  </div>\n                  <div className=\"team-score\">{game?.teamAScore ?? 0}</div>\n                </div>\n\n                <div className=\"center-block\">\n                  <div className=\"question-label\">Question</div>\n                  <div className=\"question-number\">#{game?.questionNumber ?? 1}</div>\n                  <div className=\"center-actions\">\n                    <button className=\"btn primary\" onClick={handleNextTossup}>\n                      Next tossup\n                    </button>\n                    <button className=\"btn ghost\" onClick={handleResetGame}>\n                      Reset game\n                    </button>\n                  </div>\n                  <div className=\"edit-row\">\n                    <button\n                      className={`chip small ${editingNames ? \"active\" : \"\"}`}\n                      onClick={() => setEditingNames((v) => !v)}\n                    >\n                      {editingNames ? \"Editing…\" : \"Edit names\"}\n                    </button>\n                    {editingNames && (\n                      <button className=\"btn primary\" onClick={handleSaveNames}>\n                        Save names\n                      </button>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"team-block\">\n                  <div className=\"team-heading\">\n                    <span className=\"dot dot-b\" />\n                    {editingNames ? (\n                      <input\n                        value={teamBInput}\n                        onChange={(e) => setTeamBInput(e.target.value)}\n                      />\n                    ) : (\n                      <span className=\"team-name\">{game?.teamBName || \"Team B\"}</span>\n                    )}\n                  </div>\n                  <div className=\"team-score\">{game?.teamBScore ?? 0}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"control-bottom-row\">\n            <div className=\"card scoring-card\">\n              <div className=\"section-header\">\n                <h3>Scoring</h3>\n                <span className=\"muted\">Live actions feed the history log.</span>\n              </div>\n              <div className=\"scoring-section\">\n                <div className=\"section-label\">Tossups</div>\n                <div className=\"action-row\">\n                  <button className=\"btn primary wide\" onClick={() => awardTossup(\"A\")}>\n                    Tossup +10 → {game?.teamAName || \"Team A\"}\n                  </button>\n                  <button className=\"btn primary wide\" onClick={() => awardTossup(\"B\")}>\n                    Tossup +10 → {game?.teamBName || \"Team B\"}\n                  </button>\n                </div>\n              </div>\n              <div className=\"scoring-section\">\n                <div className=\"section-label\">Bonus</div>\n                <div className=\"action-row\">\n                  <button\n                    className=\"btn bonus wide\"\n                    disabled={!game?.lastTossupWinner || !isAdmin}\n                    onClick={awardBonus}\n                  >\n                    {game?.lastTossupWinner === \"A\"\n                      ? `Bonus +10 → ${game?.teamAName || \"Team A\"}`\n                      : game?.lastTossupWinner === \"B\"\n                      ? `Bonus +10 → ${game?.teamBName || \"Team B\"}`\n                      : \"Bonus +10 (await tossup)\"}\n                  </button>\n                </div>\n                <div className=\"muted small-text\">\n                  Bonus always goes to whoever got the last tossup. If no tossup, no bonus.\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card history-card\">\n              <div className=\"section-header\">\n                <h3>Recent history</h3>\n                {loadingGame && <span className=\"muted\">Syncing…</span>}\n              </div>\n              <div className=\"history-list\">\n                {history.map((ev, idx) => (\n                  <div className=\"history-item\" key={`${ev.timestamp}-${idx}`}>\n                    <div className=\"history-type\">{ev.type}</div>\n                    <div className=\"history-desc\">{ev.description}</div>\n                    <div className=\"history-time\">\n                      {new Date(ev.timestamp).toLocaleTimeString()}\n                    </div>\n                  </div>\n                ))}\n                {history.length === 0 && <div className=\"muted\">No events yet.</div>}\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\n      {page === \"bracket\" && (\n        <div className=\"bracket-layout\">\n          {isAdmin && (!bracket?.teams || bracket?.teams.length === 0) && (\n            <div className=\"card setup-card\">\n              <div className=\"card-header\">\n                <h3>Bracket setup &amp; pairing</h3>\n                {loadingBracket && <span className=\"muted\">Loading…</span>}\n              </div>\n              <textarea\n                className=\"bracket-textarea\"\n                placeholder=\"Enter one team per line\"\n                value={bracketNamesText}\n                onChange={(e) => setBracketNamesText(e.target.value)}\n              />\n              <div className=\"button-row\">\n                <button className=\"btn primary\" onClick={initBracket} disabled={!isAdmin}>\n                  Initialize bracket\n                </button>\n                <button className=\"btn ghost\" onClick={resetBracket} disabled={!isAdmin}>\n                  Reset bracket\n                </button>\n              </div>\n\n              <div className=\"pair-row\">\n                <div className=\"pair\">\n                  <label>Left scoreboard</label>\n                  <select value={pairTeamAId} onChange={(e) => setPairTeamAId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <div className=\"pair\">\n                  <label>Right scoreboard</label>\n                  <select value={pairTeamBId} onChange={(e) => setPairTeamBId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"button-row\">\n                <button className=\"btn primary\" onClick={pushPairingToGame} disabled={!isAdmin}>\n                  Push pairing to game\n                </button>\n                <button className=\"btn ghost\" onClick={finalizeCurrentMatch} disabled={!isAdmin}>\n                  Finalize current match\n                </button>\n              </div>\n\n              <div className=\"status-row\">\n                <div className=\"status-chip winners\">\n                  Winners:{\" \"}\n                  {winnersList.length\n                    ? winnersList.map((t) => t.name).join(\", \")\n                    : \"—\"}\n                </div>\n                <div className=\"status-chip losers\">\n                  Losers:{\" \"}\n                  {losersList.length ? losersList.map((t) => t.name).join(\", \") : \"—\"}\n                </div>\n                <div className=\"status-chip eliminated\">\n                  Eliminated:{\" \"}\n                  {eliminatedList.length\n                    ? eliminatedList.map((t) => t.name).join(\", \")\n                    : \"—\"}\n                </div>\n              </div>\n\n              <div className=\"suggestions-row\">\n                {bracket?.suggestedWinnersTeamAId && bracket?.suggestedWinnersTeamBId && (\n                  <div className=\"suggestion-pill\">\n                    Next winners match:{\" \"}\n                    <strong>\n                      {getTeamName(bracket.suggestedWinnersTeamAId)} vs{\" \"}\n                      {getTeamName(bracket.suggestedWinnersTeamBId)}\n                    </strong>\n                  </div>\n                )}\n                {bracket?.suggestedLosersTeamAId && bracket?.suggestedLosersTeamBId && (\n                  <div className=\"suggestion-pill\">\n                    Next losers match:{\" \"}\n                    <strong>\n                      {getTeamName(bracket.suggestedLosersTeamAId)} vs{\" \"}\n                      {getTeamName(bracket.suggestedLosersTeamBId)}\n                    </strong>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          <div className=\"card bracket-card\">\n            {isAdmin && (bracket?.teams || []).length > 0 && (\n              <div className=\"inline-controls\">\n                <div className=\"pair\">\n                  <label>Left scoreboard</label>\n                  <select value={pairTeamAId} onChange={(e) => setPairTeamAId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <div className=\"pair\">\n                  <label>Right scoreboard</label>\n                  <select value={pairTeamBId} onChange={(e) => setPairTeamBId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <button className=\"btn primary\" onClick={pushPairingToGame} disabled={!isAdmin}>\n                  Push to game\n                </button>\n                <button className=\"btn ghost\" onClick={finalizeCurrentMatch} disabled={!isAdmin}>\n                  Finalize current\n                </button>\n              </div>\n            )}\n            <div className=\"trees-top-row\">\n              <div>\n                <div className=\"tree-header\">\n                  <h4>Winners bracket</h4>\n                  <div className=\"header-line\">\n                    {winnersList.map((t) => t.name).join(\" • \")}\n                  </div>\n                  {bracket?.suggestedWinnersPairs && bracket.suggestedWinnersPairs.length > 0 && (\n                    <div className=\"suggest-list\">\n                      {bracket.suggestedWinnersPairs.map((p, idx) => (\n                        <div className=\"suggestion-pill\" key={`w-${p.teamAId}-${p.teamBId}-${idx}`}>\n                          {getTeamName(p.teamAId)} vs {getTeamName(p.teamBId)}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                {renderTree(\"WINNERS\")}\n              </div>\n              <div>\n                <div className=\"tree-header\">\n                  <h4>Losers bracket</h4>\n                  <div className=\"header-line\">\n                    {losersList.map((t) => t.name).join(\" • \")}\n                  </div>\n                  {bracket?.suggestedLosersPairs && bracket.suggestedLosersPairs.length > 0 && (\n                    <div className=\"suggest-list\">\n                      {bracket.suggestedLosersPairs.map((p, idx) => (\n                        <div className=\"suggestion-pill\" key={`l-${p.teamAId}-${p.teamBId}-${idx}`}>\n                          {getTeamName(p.teamAId)} vs {getTeamName(p.teamBId)}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                {renderTree(\"LOSERS\")}\n              </div>\n            </div>\n\n            <div className=\"standings\">\n              <h4>Standings</h4>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Team</th>\n                    <th>Losses</th>\n                    <th>Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {(bracket?.teams || [])\n                    .slice()\n                    .sort((a, b) => a.losses - b.losses)\n                    .map((team) => (\n                      <tr key={team.id}>\n                        <td>{team.name}</td>\n                        <td>{team.losses}</td>\n                        <td>\n                          {team.eliminated\n                            ? \"Eliminated\"\n                            : team.losses === 0\n                            ? \"Winners bracket\"\n                            : \"Losers bracket\"}\n                        </td>\n                      </tr>\n                    ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"viewer-card card\">\n            <h4>Player lookup</h4>\n            <select value={playerTeamId} onChange={(e) => setPlayerTeamId(e.target.value)}>\n              <option value=\"\">Select your team</option>\n              {(bracket?.teams || []).map((t) => (\n                <option key={t.id} value={t.id}>\n                  {t.name}\n                </option>\n              ))}\n            </select>\n            {viewerNextMatch ? (\n              <div className=\"viewer-info\">\n                {viewerNextMatch.status ? (\n                  <div className=\"muted\">{viewerNextMatch.status}</div>\n                ) : (\n                  <div>\n                    Next match: {viewerNextMatch.bracket} Round {viewerNextMatch.round} vs{\" \"}\n                    {viewerNextMatch.opponent || \"TBD\"}\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"muted\">No pending matches found yet.</div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {isAdmin && (\n        <div className=\"footer-bar\">\n          <button className=\"btn ghost\" onClick={handleResetGame}>\n            Reset game\n          </button>\n        </div>\n      )}\n\n      <audio ref={correctRef} src=\"/sounds/correct.wav\" />\n      <audio ref={bonusRef} src=\"/sounds/bonus.wav\" />\n      <audio ref={timerEndRef} src=\"/sounds/timer_end.wav\" />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}