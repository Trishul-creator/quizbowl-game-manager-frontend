{"ast":null,"code":"import _objectSpread from\"/workspaces/quizbowl-game-manager-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import axios from\"axios\";import\"./App.css\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const api=axios.create({baseURL:\"https://api.quizbowl.game-manager.org\"});function useInterval(callback,delay){const savedCallback=useRef();useEffect(()=>{savedCallback.current=callback;},[callback]);useEffect(()=>{if(delay===null){return;}const id=setInterval(()=>{if(savedCallback.current){savedCallback.current();}},delay);return()=>clearInterval(id);},[delay]);}function App(){var _game$teamAScore,_game$questionNumber,_game$teamBScore;const[page,setPage]=useState(\"control\");const gameId=\"default\";const[game,setGame]=useState(null);const[loadingGame,setLoadingGame]=useState(false);const[bracket,setBracket]=useState(null);const[loadingBracket,setLoadingBracket]=useState(false);const[editingNames,setEditingNames]=useState(false);const[teamAInput,setTeamAInput]=useState(\"Team A\");const[teamBInput,setTeamBInput]=useState(\"Team B\");const[timerMode,setTimerMode]=useState(\"tossup\");const[timerSeconds,setTimerSeconds]=useState(7);const[timerRunning,setTimerRunning]=useState(false);const[bracketNamesText,setBracketNamesText]=useState(\"\");const[pairTeamAId,setPairTeamAId]=useState(\"\");const[pairTeamBId,setPairTeamBId]=useState(\"\");const[authToken,setAuthToken]=useState(()=>localStorage.getItem(\"authToken\")||\"\");const[authRole,setAuthRole]=useState(()=>localStorage.getItem(\"authRole\")||\"\");const[authUsername,setAuthUsername]=useState(()=>localStorage.getItem(\"authUsername\")||\"\");const[authEmail,setAuthEmail]=useState(\"\");const[authView,setAuthView]=useState(\"login\");const[loginUsername,setLoginUsername]=useState(\"\");const[loginPassword,setLoginPassword]=useState(\"\");const[registerUsername,setRegisterUsername]=useState(\"\");const[registerPassword,setRegisterPassword]=useState(\"\");const[authError,setAuthError]=useState(\"\");const[playerTeamId,setPlayerTeamId]=useState(\"\");const correctRef=useRef(null);const bonusRef=useRef(null);const timerEndRef=useRef(null);const adminHeaders=()=>authToken?{\"X-Admin-Token\":authToken}:{};const isAdmin=authRole===\"ADMIN\";const fetchGame=useCallback(async()=>{try{setLoadingGame(true);const res=await api.get(\"/api/game\",{params:{gameId}});if(isAdmin||!game){setGame(res.data);if(!editingNames){setTeamAInput(res.data.teamAName);setTeamBInput(res.data.teamBName);}}}catch(err){// no-op for now\n}finally{setLoadingGame(false);}},[editingNames,gameId,isAdmin,game]);const fetchBracket=useCallback(async()=>{try{setLoadingBracket(true);const res=await api.get(\"/api/bracket\");setBracket(res.data);}catch(err){// no-op\n}finally{setLoadingBracket(false);}},[]);useEffect(()=>{fetchGame();fetchBracket();},[fetchGame,fetchBracket,gameId]);// Polling replaced by centralized, leader-based poller that reduces load across tabs.\n// Behavior:\n// - One tab becomes the \"leader\" (via localStorage heartbeat) and performs polling.\n// - Leader polls `/api/game` and `/api/bracket` using conditional ETag requests (If-None-Match) when possible.\n// - Leader broadcasts updates via BroadcastChannel and localStorage so other tabs receive updates without polling.\n// - Visibility API is respected: polls stop while tab is hidden.\n// - Exponential backoff with jitter is used on errors.\nuseEffect(()=>{let stopped=false;let leader=false;const myId=Math.random().toString(36).slice(2);let heartbeatInterval=null;let pollTimeout=null;let retry=0;const bc=typeof BroadcastChannel!==\"undefined\"?new BroadcastChannel(\"quizbowl-channel\"):null;const ETAG_GAME_KEY=\"quizbowl:etag:game\";const ETAG_BRACKET_KEY=\"quizbowl:etag:bracket\";const notifyUpdate=payload=>{try{if(bc)bc.postMessage({type:\"update\",payload});localStorage.setItem(\"quizbowl:lastUpdate\",JSON.stringify({payload,ts:Date.now()}));}catch(err){// storage may fail in some contexts; ignore\n}};const onBcMessage=ev=>{const data=ev===null||ev===void 0?void 0:ev.data;if(!data)return;if(data.type===\"heartbeat\"&&data.id!==myId){// presence of another heartbeat => relinquish leadership\nleader=false;}else if(data.type===\"update\"){const p=data.payload||{};if(p.game)setGame(p.game);if(p.bracket)setBracket(p.bracket);}};if(bc)bc.onmessage=onBcMessage;const attemptToBecomeLeader=()=>{try{const raw=localStorage.getItem(\"quizbowl:heartbeat\");const now=Date.now();const hb=raw?JSON.parse(raw):null;if(!hb||now-(hb.ts||0)>7000){localStorage.setItem(\"quizbowl:heartbeat\",JSON.stringify({id:myId,ts:now}));leader=true;}else{leader=hb.id===myId;}}catch(err){// ignore\n}};heartbeatInterval=setInterval(()=>{if(leader){try{const now=Date.now();localStorage.setItem(\"quizbowl:heartbeat\",JSON.stringify({id:myId,ts:now}));if(bc)bc.postMessage({type:\"heartbeat\",id:myId,ts:now});}catch(err){// ignore\n}}else{attemptToBecomeLeader();}},2500);attemptToBecomeLeader();const scheduleNext=ms=>{if(stopped)return;if(pollTimeout)clearTimeout(pollTimeout);pollTimeout=setTimeout(pollOnce,ms||1000);};async function pollOnce(){if(stopped)return;if(!leader){// not leader; wait and try again later\nscheduleNext(3000+Math.random()*2000);return;}if(document.hidden){// when hidden, poll less frequently\nscheduleNext(10000+Math.random()*5000);return;}const baseInterval=isAdmin?5000:15000;// reduced load for viewers, reasonable interval for admins\nlet waitForNext=baseInterval+Math.random()*2000;try{// Game fetch with conditional ETag\nconst gameEtag=localStorage.getItem(ETAG_GAME_KEY)||undefined;const gameRes=await api.get(\"/api/game\",{params:{gameId},headers:gameEtag?{\"If-None-Match\":gameEtag}:{},validateStatus:s=>s===200||s===304||s>=200&&s<300});if(gameRes.status===200){if(isAdmin||!game){setGame(gameRes.data);if(!editingNames){setTeamAInput(gameRes.data.teamAName);setTeamBInput(gameRes.data.teamBName);}}const newEtag=gameRes.headers&&(gameRes.headers.etag||gameRes.headers.ETag)||undefined;if(newEtag)localStorage.setItem(ETAG_GAME_KEY,newEtag);}// Bracket fetch with conditional ETag\nconst bracketEtag=localStorage.getItem(ETAG_BRACKET_KEY)||undefined;const bracketRes=await api.get(\"/api/bracket\",{headers:bracketEtag?{\"If-None-Match\":bracketEtag}:{},validateStatus:s=>s===200||s===304||s>=200&&s<300});if(bracketRes.status===200){setBracket(bracketRes.data);const newEtag=bracketRes.headers&&(bracketRes.headers.etag||bracketRes.headers.ETag)||undefined;if(newEtag)localStorage.setItem(ETAG_BRACKET_KEY,newEtag);}// broadcast if there are updates; on 304 we send undefined which consumers ignore\nnotifyUpdate({game:gameRes&&gameRes.status===200?gameRes.data:undefined,bracket:bracketRes&&bracketRes.status===200?bracketRes.data:undefined});// success\nretry=0;}catch(err){// err may be network or server - escalate backoff\nretry++;waitForNext=Math.min(60000,2**retry*1000+Math.random()*1000);}finally{scheduleNext(waitForNext);}}// visibility: if coming back visible, try an immediate poll\nconst onVis=()=>{if(!document.hidden&&leader){pollOnce();}};document.addEventListener(\"visibilitychange\",onVis);// storage listener allows tabs without BroadcastChannel to receive updates and to observe heartbeats\nconst onStorage=ev=>{if(ev.key===\"quizbowl:lastUpdate\"&&ev.newValue){try{const parsed=JSON.parse(ev.newValue);const p=parsed.payload||{};if(p.game)setGame(p.game);if(p.bracket)setBracket(p.bracket);}catch(err){// ignore\n}}else if(ev.key===\"quizbowl:heartbeat\"&&ev.newValue){try{const hb=JSON.parse(ev.newValue);if(hb.id!==myId){leader=false;}}catch(err){// ignore\n}}};window.addEventListener(\"storage\",onStorage);// also listen on BroadcastChannel for updates\nif(bc)bc.onmessage=onBcMessage;// start polling cycle\npollOnce();return()=>{stopped=true;leader=false;if(heartbeatInterval)clearInterval(heartbeatInterval);if(pollTimeout)clearTimeout(pollTimeout);document.removeEventListener(\"visibilitychange\",onVis);window.removeEventListener(\"storage\",onStorage);if(bc){try{bc.close();}catch(err){/* ignore */}}};},[isAdmin,gameId,editingNames]);useEffect(()=>{const source=new EventSource(\"https://api.quizbowl.game-manager.org/api/bracket/stream\");source.addEventListener(\"bracket\",e=>{try{const data=JSON.parse(e.data);setBracket(data);}catch(err){// ignore parse errors\n}});source.onerror=()=>{source.close();};return()=>{source.close();};},[]);useInterval(()=>{setTimerSeconds(prev=>{if(!timerRunning){return prev;}const next=prev-1;if(next<=0){if(timerRunning){setTimerRunning(false);}if(timerEndRef.current){timerEndRef.current.currentTime=0;timerEndRef.current.play();}return 0;}return next;});},timerRunning?1000:null);useEffect(()=>{if(bracket&&bracket.teams){const available=bracket.teams.filter(t=>!t.eliminated);if(!pairTeamAId&&available[0]){setPairTeamAId(available[0].id);}if(!pairTeamBId&&available[1]){setPairTeamBId(available[1].id);}}},[bracket,pairTeamAId,pairTeamBId]);const startTimerWithMode=mode=>{setTimerMode(mode);setTimerSeconds(mode===\"bonus\"?20:7);setTimerRunning(true);};const pauseTimer=()=>{setTimerRunning(false);};const resetTimer=()=>{setTimerRunning(false);setTimerSeconds(timerMode===\"bonus\"?20:7);};const timerProgress=()=>{const total=timerMode===\"bonus\"?20:7;return Math.max(0,Math.min(1,timerSeconds/total));};const awardTossup=async team=>{if(isAdmin){await api.post(\"/api/game/award-tossup\",{team},{params:{gameId},headers:adminHeaders()});if(correctRef.current){correctRef.current.currentTime=0;correctRef.current.play();}fetchGame();return;}setGame(g=>{const base=g||{teamAName:teamAInput||\"Team A\",teamBName:teamBInput||\"Team B\",teamAScore:0,teamBScore:0,questionNumber:1,lastTossupWinner:null,history:[]};const next=_objectSpread(_objectSpread({},base),{},{history:[...(base.history||[])]});if(team===\"A\"){next.teamAScore=(next.teamAScore||0)+10;next.lastTossupWinner=\"A\";next.history.push({type:\"TOSSUP\",description:\"Tossup +10 \\u2192 \".concat(next.teamAName||\"Team A\"),timestamp:Date.now(),team:\"A\",points:10});}else if(team===\"B\"){next.teamBScore=(next.teamBScore||0)+10;next.lastTossupWinner=\"B\";next.history.push({type:\"TOSSUP\",description:\"Tossup +10 \\u2192 \".concat(next.teamBName||\"Team B\"),timestamp:Date.now(),team:\"B\",points:10});}return next;});if(correctRef.current){correctRef.current.currentTime=0;correctRef.current.play();}};const awardBonus=async()=>{if(isAdmin){await api.post(\"/api/game/award-bonus\",{points:10},{params:{gameId},headers:adminHeaders()});if(bonusRef.current){bonusRef.current.currentTime=0;bonusRef.current.play();}fetchGame();return;}setGame(g=>{if(!g||!g.lastTossupWinner)return g;const next=_objectSpread(_objectSpread({},g),{},{history:[...(g.history||[])]});if(g.lastTossupWinner===\"A\"){next.teamAScore=(next.teamAScore||0)+10;next.history.push({type:\"BONUS\",description:\"Bonus +10 \\u2192 \".concat(next.teamAName||\"Team A\"),timestamp:Date.now(),team:\"A\",points:10});}else if(g.lastTossupWinner===\"B\"){next.teamBScore=(next.teamBScore||0)+10;next.history.push({type:\"BONUS\",description:\"Bonus +10 \\u2192 \".concat(next.teamBName||\"Team B\"),timestamp:Date.now(),team:\"B\",points:10});}return next;});if(bonusRef.current){bonusRef.current.currentTime=0;bonusRef.current.play();}};const handleNextTossup=async()=>{if(!isAdmin){setGame(g=>g?_objectSpread(_objectSpread({},g),{},{questionNumber:(g.questionNumber||1)+1,lastTossupWinner:null}):g);setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);return;}await api.post(\"/api/game/next-tossup\",null,{params:{gameId},headers:adminHeaders()});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);fetchGame();};const handleResetGame=async()=>{try{if(!isAdmin){setGame({teamAName:\"Team A\",teamBName:\"Team B\",teamAScore:0,teamBScore:0,questionNumber:1,lastTossupWinner:null,history:[]});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);setAuthError(\"\");return;}await api.post(\"/api/game/reset\",null,{params:{gameId},headers:adminHeaders()});await api.post(\"/api/bracket/reset\",null,{headers:adminHeaders()});setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);setPairTeamAId(\"\");setPairTeamBId(\"\");setPlayerTeamId(\"\");setBracketNamesText(\"\");setAuthError(\"\");fetchGame();fetchBracket();}catch(err){var _err$response,_err$response$data;const message=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Unable to reset game (are you logged in as admin?)\";setAuthError(message);}};const handleSaveNames=async()=>{if(!isAdmin){// local-only change for viewers\nsetGame(g=>_objectSpread(_objectSpread({},g||{}),{},{teamAName:teamAInput,teamBName:teamBInput}));setEditingNames(false);return;}await api.post(\"/api/game/team-names\",{teamAName:teamAInput,teamBName:teamBInput},{params:{gameId},headers:adminHeaders()});setEditingNames(false);fetchGame();};const initBracket=async()=>{const names=bracketNamesText.split(\"\\n\").map(n=>n.trim()).filter(n=>n.length>0);await api.post(\"/api/bracket/init\",{teamNames:names},{headers:adminHeaders()});fetchBracket();};const resetBracket=async()=>{await api.post(\"/api/bracket/reset\",null,{headers:adminHeaders()});setPairTeamAId(\"\");setPairTeamBId(\"\");fetchBracket();};const pushPairingToGame=async()=>{if(!pairTeamAId||!pairTeamBId)return;await api.post(\"/api/bracket/set-current\",{teamAId:pairTeamAId,teamBId:pairTeamBId},{params:{gameId},headers:adminHeaders()});await fetchBracket();await fetchGame();};const finalizeCurrentMatch=async()=>{await api.post(\"/api/bracket/finalize-current\",null,{params:{gameId},headers:adminHeaders()});await fetchBracket();};const getTeamName=useCallback(id=>{if(!bracket||!bracket.teams)return\"\";const team=bracket.teams.find(t=>t.id===id);return team?team.name:\"\";},[bracket]);const history=useMemo(()=>{const items=(game===null||game===void 0?void 0:game.history)||[];return[...items].reverse();},[game]);const renderTree=bracketName=>{if(!bracket)return null;const matches=(bracket.matches||[]).filter(m=>m.bracket===bracketName);const byRound={};matches.forEach(m=>{if(!byRound[m.round])byRound[m.round]=[];byRound[m.round].push(m);});const rounds=Object.keys(byRound).map(n=>parseInt(n,10)).sort((a,b)=>a-b);return/*#__PURE__*/_jsx(\"div\",{className:\"bracket-tree\",children:rounds.map(round=>/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-col-title\",children:[\"Round \",round]}),byRound[round].map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"match-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"match-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTeamName(m.teamAId)}),/*#__PURE__*/_jsx(\"span\",{className:\"score-pill\",children:m.scoreA!==null&&m.scoreA!==undefined?m.scoreA:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTeamName(m.teamBId)}),/*#__PURE__*/_jsx(\"span\",{className:\"score-pill\",children:m.scoreB!==null&&m.scoreB!==undefined?m.scoreB:\"-\"})]}),m.winnerId&&/*#__PURE__*/_jsxs(\"div\",{className:\"winner-line\",children:[\"Winner: \",/*#__PURE__*/_jsx(\"strong\",{children:getTeamName(m.winnerId)})]})]},m.id))]},\"\".concat(bracketName,\"-\").concat(round)))});};const winnersList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated&&t.losses===0);const losersList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated&&t.losses===1);const eliminatedList=((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>t.eliminated);const timerTotal=timerMode===\"bonus\"?20:7;const radius=70;const circumference=2*Math.PI*radius;const progress=timerProgress();const offset=circumference*(1-progress);const stroke=progress>0.5?\"#4ade80\":progress>0.25?\"#fbbf24\":\"#fb923c\";const handleLogin=async()=>{try{const res=await api.post(\"/api/auth/login\",{username:loginUsername,password:loginPassword});setAuthToken(res.data.token);setAuthRole(res.data.role);setAuthUsername(res.data.username);localStorage.setItem(\"authToken\",res.data.token);localStorage.setItem(\"authRole\",res.data.role);localStorage.setItem(\"authUsername\",res.data.username);setAuthError(\"\");}catch(err){var _err$response2,_err$response2$data;const message=(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Invalid username or password\";setAuthError(message);}};const handleRegister=async()=>{try{const res=await api.post(\"/api/auth/register\",{username:registerUsername,password:registerPassword});setAuthToken(res.data.token);setAuthRole(res.data.role);setAuthUsername(res.data.username);localStorage.setItem(\"authToken\",res.data.token);localStorage.setItem(\"authRole\",res.data.role);localStorage.setItem(\"authUsername\",res.data.username);setAuthView(\"login\");setAuthError(\"\");}catch(err){var _err$response3,_err$response3$data;const message=(err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Registration failed\";setAuthError(message);}};const handleProfileUpdate=async(newUsername,newPassword)=>{try{const res=await api.post(\"/api/auth/update-profile\",{newUsername,newPassword},{headers:adminHeaders()});setAuthUsername(res.data.username);setAuthRole(res.data.role);localStorage.setItem(\"authUsername\",res.data.username);localStorage.setItem(\"authRole\",res.data.role);setAuthError(\"Profile updated\");}catch(err){var _err$response4,_err$response4$data;const message=(err===null||err===void 0?void 0:(_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Update failed\";setAuthError(message);}};const handleLogout=()=>{setAuthToken(\"\");setAuthRole(\"\");setAuthUsername(\"\");localStorage.removeItem(\"authToken\");localStorage.removeItem(\"authRole\");localStorage.removeItem(\"authUsername\");};const nextMatchForTeam=teamId=>{if(!bracket||!teamId)return null;const pending=(bracket.matches||[]).find(m=>!m.completed&&(m.teamAId===teamId||m.teamBId===teamId));if(pending){return{bracket:pending.bracket,round:pending.round,opponent:pending.teamAId===teamId?getTeamName(pending.teamBId):getTeamName(pending.teamAId)};}const suggestedWin=(bracket.suggestedWinnersPairs||[]).find(p=>p.teamAId===teamId||p.teamBId===teamId);if(suggestedWin){const opponent=suggestedWin.teamAId===teamId?getTeamName(suggestedWin.teamBId):getTeamName(suggestedWin.teamAId);return{bracket:\"WINNERS\",round:\"TBD\",opponent,status:\"Awaiting winners pairing\"};}const suggestedLose=(bracket.suggestedLosersPairs||[]).find(p=>p.teamAId===teamId||p.teamBId===teamId);if(suggestedLose){const opponent=suggestedLose.teamAId===teamId?getTeamName(suggestedLose.teamBId):getTeamName(suggestedLose.teamAId);return{bracket:\"LOSERS\",round:\"TBD\",opponent,status:\"Awaiting losers pairing\"};}const team=(bracket.teams||[]).find(t=>t.id===teamId);if(team!==null&&team!==void 0&&team.eliminated){return{status:\"Eliminated\"};}if(bracket.finished){return{status:\"Bracket finished\"};}return{status:\"Waiting for scheduling\"};};const viewerNextMatch=nextMatchForTeam(playerTeamId);if(!authToken){return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(authView===\"login\"?\"active\":\"\"),onClick:()=>setAuthView(\"login\"),children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(authView===\"register\"?\"active\":\"\"),onClick:()=>setAuthView(\"register\"),children:\"Register\"})]}),authView===\"login\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Admins sign in; players use their own account.\"}),/*#__PURE__*/_jsx(\"input\",{value:loginUsername,onChange:e=>setLoginUsername(e.target.value),placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:loginPassword,onChange:e=>setLoginPassword(e.target.value),placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleLogin,children:\"Sign in\"})]}):authView===\"register\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create your account\"}),/*#__PURE__*/_jsx(\"input\",{value:registerUsername,onChange:e=>setRegisterUsername(e.target.value),placeholder:\"Choose username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:registerPassword,onChange:e=>setRegisterPassword(e.target.value),placeholder:\"Choose password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleRegister,children:\"Register & continue\"})]}):null,authError&&/*#__PURE__*/_jsx(\"div\",{className:\"auth-error\",children:authError})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"Quizbowl Control\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auth-chip\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-name\",children:authUsername||\"user\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-role\",children:[\"(\",isAdmin?\"Administrator\":\"Viewer\",\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost small-btn\",onClick:()=>handleProfileUpdate(prompt(\"New username (leave blank to keep)\",\"\"),prompt(\"New password (leave blank to keep)\",\"\")),children:\"Update profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(page===\"control\"?\"active\":\"\"),onClick:()=>setPage(\"control\"),children:\"Control\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab \".concat(page===\"bracket\"?\"active\":\"\"),onClick:()=>setPage(\"bracket\"),children:\"Bracket\"})]})]})]}),page===\"control\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card timer-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Timer & Flow\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chip-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chip \".concat(timerMode===\"tossup\"?\"active\":\"\"),onClick:()=>{setTimerMode(\"tossup\");setTimerSeconds(7);setTimerRunning(false);},children:\"Tossup (7s)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"chip \".concat(timerMode===\"bonus\"?\"active\":\"\"),onClick:()=>{setTimerMode(\"bonus\");setTimerSeconds(20);setTimerRunning(false);},children:\"Bonus (20s)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-visual\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-ring\",children:[/*#__PURE__*/_jsxs(\"svg\",{height:\"180\",width:\"180\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"90\",cy:\"90\",r:radius,stroke:\"#1f2a44\",strokeWidth:\"10\",fill:\"none\",className:\"timer-track\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"90\",cy:\"90\",r:radius,stroke:stroke,strokeWidth:\"10\",fill:\"none\",strokeDasharray:circumference,strokeDashoffset:offset,transform:\"rotate(-90 90 90)\",strokeLinecap:\"round\",className:\"timer-progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timer-value\",children:[timerSeconds,\"s\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-mode-label\",children:[timerMode===\"bonus\"?\"Bonus\":\"Tossup\",\" timer\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:()=>startTimerWithMode(timerMode),children:\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:pauseTimer,children:\"Pause\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:resetTimer,children:\"Reset\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer-side\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Use Tossup/Bonus chips to load durations.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Start resets to the full length for the selected mode. Pause halts countdown.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Next Tossup will also clear the timer back to 7 seconds.\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card scoreboard-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"scoreboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot dot-a\"}),editingNames?/*#__PURE__*/_jsx(\"input\",{value:teamAInput,onChange:e=>setTeamAInput(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:(game===null||game===void 0?void 0:game.teamAName)||\"Team A\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-score\",children:(_game$teamAScore=game===null||game===void 0?void 0:game.teamAScore)!==null&&_game$teamAScore!==void 0?_game$teamAScore:0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"question-label\",children:\"Question\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-number\",children:[\"#\",(_game$questionNumber=game===null||game===void 0?void 0:game.questionNumber)!==null&&_game$questionNumber!==void 0?_game$questionNumber:1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleNextTossup,children:\"Next tossup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleResetGame,children:\"Reset game\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chip small \".concat(editingNames?\"active\":\"\"),onClick:()=>setEditingNames(v=>!v),children:editingNames?\"Editing…\":\"Edit names\"}),editingNames&&/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:handleSaveNames,children:\"Save names\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"team-heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot dot-b\"}),editingNames?/*#__PURE__*/_jsx(\"input\",{value:teamBInput,onChange:e=>setTeamBInput(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{className:\"team-name\",children:(game===null||game===void 0?void 0:game.teamBName)||\"Team B\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-score\",children:(_game$teamBScore=game===null||game===void 0?void 0:game.teamBScore)!==null&&_game$teamBScore!==void 0?_game$teamBScore:0})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-bottom-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card scoring-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Scoring\"}),/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Live actions feed the history log.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scoring-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-label\",children:\"Tossups\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-row\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn primary wide\",onClick:()=>awardTossup(\"A\"),children:[\"Tossup +10 \\u2192 \",(game===null||game===void 0?void 0:game.teamAName)||\"Team A\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn primary wide\",onClick:()=>awardTossup(\"B\"),children:[\"Tossup +10 \\u2192 \",(game===null||game===void 0?void 0:game.teamBName)||\"Team B\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scoring-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-label\",children:\"Bonus\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn bonus wide\",disabled:!(game!==null&&game!==void 0&&game.lastTossupWinner)||!isAdmin,onClick:awardBonus,children:(game===null||game===void 0?void 0:game.lastTossupWinner)===\"A\"?\"Bonus +10 \\u2192 \".concat((game===null||game===void 0?void 0:game.teamAName)||\"Team A\"):(game===null||game===void 0?void 0:game.lastTossupWinner)===\"B\"?\"Bonus +10 \\u2192 \".concat((game===null||game===void 0?void 0:game.teamBName)||\"Team B\"):\"Bonus +10 (await tossup)\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"muted small-text\",children:\"Bonus always goes to whoever got the last tossup. If no tossup, no bonus.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card history-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent history\"}),loadingGame&&/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Syncing\\u2026\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-list\",children:[history.map((ev,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-type\",children:ev.type}),/*#__PURE__*/_jsx(\"div\",{className:\"history-desc\",children:ev.description}),/*#__PURE__*/_jsx(\"div\",{className:\"history-time\",children:new Date(ev.timestamp).toLocaleTimeString()})]},\"\".concat(ev.timestamp,\"-\").concat(idx))),history.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:\"No events yet.\"})]})]})]})]}),page===\"bracket\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bracket-layout\",children:[isAdmin&&(!(bracket!==null&&bracket!==void 0&&bracket.teams)||(bracket===null||bracket===void 0?void 0:bracket.teams.length)===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"card setup-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bracket setup & pairing\"}),loadingBracket&&/*#__PURE__*/_jsx(\"span\",{className:\"muted\",children:\"Loading\\u2026\"})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"bracket-textarea\",placeholder:\"Enter one team per line\",value:bracketNamesText,onChange:e=>setBracketNamesText(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:initBracket,disabled:!isAdmin,children:\"Initialize bracket\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:resetBracket,disabled:!isAdmin,children:\"Reset bracket\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Left scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamAId,onChange:e=>setPairTeamAId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Right scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamBId,onChange:e=>setPairTeamBId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:pushPairingToGame,disabled:!isAdmin,children:\"Push pairing to game\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:finalizeCurrentMatch,disabled:!isAdmin,children:\"Finalize current match\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip winners\",children:[\"Winners:\",\" \",winnersList.length?winnersList.map(t=>t.name).join(\", \"):\"—\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip losers\",children:[\"Losers:\",\" \",losersList.length?losersList.map(t=>t.name).join(\", \"):\"—\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-chip eliminated\",children:[\"Eliminated:\",\" \",eliminatedList.length?eliminatedList.map(t=>t.name).join(\", \"):\"—\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"suggestions-row\",children:[(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersTeamAId)&&(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersTeamBId)&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[\"Next winners match:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[getTeamName(bracket.suggestedWinnersTeamAId),\" vs\",\" \",getTeamName(bracket.suggestedWinnersTeamBId)]})]}),(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersTeamAId)&&(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersTeamBId)&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[\"Next losers match:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[getTeamName(bracket.suggestedLosersTeamAId),\" vs\",\" \",getTeamName(bracket.suggestedLosersTeamBId)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card bracket-card\",children:[isAdmin&&((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"inline-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Left scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamAId,onChange:e=>setPairTeamAId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Right scoreboard\"}),/*#__PURE__*/_jsxs(\"select\",{value:pairTeamBId,onChange:e=>setPairTeamBId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).filter(t=>!t.eliminated).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:pushPairingToGame,disabled:!isAdmin,children:\"Push to game\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:finalizeCurrentMatch,disabled:!isAdmin,children:\"Finalize current\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"trees-top-row\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tree-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Winners bracket\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-line\",children:winnersList.map(t=>t.name).join(\" • \")}),(bracket===null||bracket===void 0?void 0:bracket.suggestedWinnersPairs)&&bracket.suggestedWinnersPairs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggest-list\",children:bracket.suggestedWinnersPairs.map((p,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[getTeamName(p.teamAId),\" vs \",getTeamName(p.teamBId)]},\"w-\".concat(p.teamAId,\"-\").concat(p.teamBId,\"-\").concat(idx)))})]}),renderTree(\"WINNERS\")]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tree-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Losers bracket\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-line\",children:losersList.map(t=>t.name).join(\" • \")}),(bracket===null||bracket===void 0?void 0:bracket.suggestedLosersPairs)&&bracket.suggestedLosersPairs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggest-list\",children:bracket.suggestedLosersPairs.map((p,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-pill\",children:[getTeamName(p.teamAId),\" vs \",getTeamName(p.teamBId)]},\"l-\".concat(p.teamAId,\"-\").concat(p.teamBId,\"-\").concat(idx)))})]}),renderTree(\"LOSERS\")]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"standings\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Standings\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Team\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Losses\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).slice().sort((a,b)=>a.losses-b.losses).map(team=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:team.name}),/*#__PURE__*/_jsx(\"td\",{children:team.losses}),/*#__PURE__*/_jsx(\"td\",{children:team.eliminated?\"Eliminated\":team.losses===0?\"Winners bracket\":\"Losers bracket\"})]},team.id))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-card card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Player lookup\"}),/*#__PURE__*/_jsxs(\"select\",{value:playerTeamId,onChange:e=>setPlayerTeamId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select your team\"}),((bracket===null||bracket===void 0?void 0:bracket.teams)||[]).map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))]}),viewerNextMatch?/*#__PURE__*/_jsx(\"div\",{className:\"viewer-info\",children:viewerNextMatch.status?/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:viewerNextMatch.status}):/*#__PURE__*/_jsxs(\"div\",{children:[\"Next match: \",viewerNextMatch.bracket,\" Round \",viewerNextMatch.round,\" vs\",\" \",viewerNextMatch.opponent||\"TBD\"]})}):/*#__PURE__*/_jsx(\"div\",{className:\"muted\",children:\"No pending matches found yet.\"})]})]}),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"footer-bar\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn ghost\",onClick:handleResetGame,children:\"Reset game\"})}),/*#__PURE__*/_jsx(\"audio\",{ref:correctRef,src:\"/sounds/correct.wav\"}),/*#__PURE__*/_jsx(\"audio\",{ref:bonusRef,src:\"/sounds/bonus.wav\"}),/*#__PURE__*/_jsx(\"audio\",{ref:timerEndRef,src:\"/sounds/timer_end.wav\"})]});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","api","create","baseURL","useInterval","callback","delay","savedCallback","current","id","setInterval","clearInterval","App","_game$teamAScore","_game$questionNumber","_game$teamBScore","page","setPage","gameId","game","setGame","loadingGame","setLoadingGame","bracket","setBracket","loadingBracket","setLoadingBracket","editingNames","setEditingNames","teamAInput","setTeamAInput","teamBInput","setTeamBInput","timerMode","setTimerMode","timerSeconds","setTimerSeconds","timerRunning","setTimerRunning","bracketNamesText","setBracketNamesText","pairTeamAId","setPairTeamAId","pairTeamBId","setPairTeamBId","authToken","setAuthToken","localStorage","getItem","authRole","setAuthRole","authUsername","setAuthUsername","authEmail","setAuthEmail","authView","setAuthView","loginUsername","setLoginUsername","loginPassword","setLoginPassword","registerUsername","setRegisterUsername","registerPassword","setRegisterPassword","authError","setAuthError","playerTeamId","setPlayerTeamId","correctRef","bonusRef","timerEndRef","adminHeaders","isAdmin","fetchGame","res","get","params","data","teamAName","teamBName","err","fetchBracket","stopped","leader","myId","Math","random","toString","slice","heartbeatInterval","pollTimeout","retry","bc","BroadcastChannel","ETAG_GAME_KEY","ETAG_BRACKET_KEY","notifyUpdate","payload","postMessage","type","setItem","JSON","stringify","ts","Date","now","onBcMessage","ev","p","onmessage","attemptToBecomeLeader","raw","hb","parse","scheduleNext","ms","clearTimeout","setTimeout","pollOnce","document","hidden","baseInterval","waitForNext","gameEtag","undefined","gameRes","headers","validateStatus","s","status","newEtag","etag","ETag","bracketEtag","bracketRes","min","onVis","addEventListener","onStorage","key","newValue","parsed","window","removeEventListener","close","source","EventSource","e","onerror","prev","next","currentTime","play","teams","available","filter","t","eliminated","startTimerWithMode","mode","pauseTimer","resetTimer","timerProgress","total","max","awardTossup","team","post","g","base","teamAScore","teamBScore","questionNumber","lastTossupWinner","history","_objectSpread","push","description","concat","timestamp","points","awardBonus","handleNextTossup","handleResetGame","_err$response","_err$response$data","message","response","handleSaveNames","initBracket","names","split","map","n","trim","length","teamNames","resetBracket","pushPairingToGame","teamAId","teamBId","finalizeCurrentMatch","getTeamName","find","name","items","reverse","renderTree","bracketName","matches","m","byRound","forEach","round","rounds","Object","keys","parseInt","sort","a","b","className","children","scoreA","scoreB","winnerId","winnersList","losses","losersList","eliminatedList","timerTotal","radius","circumference","PI","progress","offset","stroke","handleLogin","username","password","token","role","_err$response2","_err$response2$data","handleRegister","_err$response3","_err$response3$data","handleProfileUpdate","newUsername","newPassword","_err$response4","_err$response4$data","handleLogout","removeItem","nextMatchForTeam","teamId","pending","completed","opponent","suggestedWin","suggestedWinnersPairs","suggestedLose","suggestedLosersPairs","finished","viewerNextMatch","onClick","value","onChange","target","placeholder","prompt","height","width","cx","cy","r","strokeWidth","fill","strokeDasharray","strokeDashoffset","transform","strokeLinecap","v","disabled","idx","toLocaleTimeString","join","suggestedWinnersTeamAId","suggestedWinnersTeamBId","suggestedLosersTeamAId","suggestedLosersTeamBId","ref","src"],"sources":["/workspaces/quizbowl-game-manager-frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nconst api = axios.create({\n  baseURL: \"https://api.quizbowl.game-manager.org\",\n});\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (delay === null) {\n      return;\n    }\n    const id = setInterval(() => {\n      if (savedCallback.current) {\n        savedCallback.current();\n      }\n    }, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n\nfunction App() {\n  const [page, setPage] = useState(\"control\");\n  const gameId = \"default\";\n  const [game, setGame] = useState(null);\n  const [loadingGame, setLoadingGame] = useState(false);\n  const [bracket, setBracket] = useState(null);\n  const [loadingBracket, setLoadingBracket] = useState(false);\n  const [editingNames, setEditingNames] = useState(false);\n  const [teamAInput, setTeamAInput] = useState(\"Team A\");\n  const [teamBInput, setTeamBInput] = useState(\"Team B\");\n  const [timerMode, setTimerMode] = useState(\"tossup\");\n  const [timerSeconds, setTimerSeconds] = useState(7);\n  const [timerRunning, setTimerRunning] = useState(false);\n  const [bracketNamesText, setBracketNamesText] = useState(\"\");\n  const [pairTeamAId, setPairTeamAId] = useState(\"\");\n  const [pairTeamBId, setPairTeamBId] = useState(\"\");\n  const [authToken, setAuthToken] = useState(() => localStorage.getItem(\"authToken\") || \"\");\n  const [authRole, setAuthRole] = useState(() => localStorage.getItem(\"authRole\") || \"\");\n  const [authUsername, setAuthUsername] = useState(() => localStorage.getItem(\"authUsername\") || \"\");\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [authView, setAuthView] = useState(\"login\");\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n  const [registerUsername, setRegisterUsername] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [authError, setAuthError] = useState(\"\");\n  const [playerTeamId, setPlayerTeamId] = useState(\"\");\n\n  const correctRef = useRef(null);\n  const bonusRef = useRef(null);\n  const timerEndRef = useRef(null);\n\n  const adminHeaders = () => (authToken ? { \"X-Admin-Token\": authToken } : {});\n  const isAdmin = authRole === \"ADMIN\";\n\n  const fetchGame = useCallback(async () => {\n    try {\n      setLoadingGame(true);\n      const res = await api.get(\"/api/game\", { params: { gameId } });\n      if (isAdmin || !game) {\n        setGame(res.data);\n        if (!editingNames) {\n          setTeamAInput(res.data.teamAName);\n          setTeamBInput(res.data.teamBName);\n        }\n      }\n    } catch (err) {\n      // no-op for now\n    } finally {\n      setLoadingGame(false);\n    }\n  }, [editingNames, gameId, isAdmin, game]);\n\n  const fetchBracket = useCallback(async () => {\n    try {\n      setLoadingBracket(true);\n      const res = await api.get(\"/api/bracket\");\n      setBracket(res.data);\n    } catch (err) {\n      // no-op\n    } finally {\n      setLoadingBracket(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchGame();\n    fetchBracket();\n  }, [fetchGame, fetchBracket, gameId]);\n\n  // Polling replaced by centralized, leader-based poller that reduces load across tabs.\n  // Behavior:\n  // - One tab becomes the \"leader\" (via localStorage heartbeat) and performs polling.\n  // - Leader polls `/api/game` and `/api/bracket` using conditional ETag requests (If-None-Match) when possible.\n  // - Leader broadcasts updates via BroadcastChannel and localStorage so other tabs receive updates without polling.\n  // - Visibility API is respected: polls stop while tab is hidden.\n  // - Exponential backoff with jitter is used on errors.\n  useEffect(() => {\n    let stopped = false;\n    let leader = false;\n    const myId = Math.random().toString(36).slice(2);\n    let heartbeatInterval = null;\n    let pollTimeout = null;\n    let retry = 0;\n    const bc = typeof BroadcastChannel !== \"undefined\" ? new BroadcastChannel(\"quizbowl-channel\") : null;\n\n    const ETAG_GAME_KEY = \"quizbowl:etag:game\";\n    const ETAG_BRACKET_KEY = \"quizbowl:etag:bracket\";\n\n    const notifyUpdate = (payload) => {\n      try {\n        if (bc) bc.postMessage({ type: \"update\", payload });\n        localStorage.setItem(\"quizbowl:lastUpdate\", JSON.stringify({ payload, ts: Date.now() }));\n      } catch (err) {\n        // storage may fail in some contexts; ignore\n      }\n    };\n\n    const onBcMessage = (ev) => {\n      const data = ev?.data;\n      if (!data) return;\n      if (data.type === \"heartbeat\" && data.id !== myId) {\n        // presence of another heartbeat => relinquish leadership\n        leader = false;\n      } else if (data.type === \"update\") {\n        const p = data.payload || {};\n        if (p.game) setGame(p.game);\n        if (p.bracket) setBracket(p.bracket);\n      }\n    };\n\n    if (bc) bc.onmessage = onBcMessage;\n\n    const attemptToBecomeLeader = () => {\n      try {\n        const raw = localStorage.getItem(\"quizbowl:heartbeat\");\n        const now = Date.now();\n        const hb = raw ? JSON.parse(raw) : null;\n        if (!hb || now - (hb.ts || 0) > 7000) {\n          localStorage.setItem(\"quizbowl:heartbeat\", JSON.stringify({ id: myId, ts: now }));\n          leader = true;\n        } else {\n          leader = hb.id === myId;\n        }\n      } catch (err) {\n        // ignore\n      }\n    };\n\n    heartbeatInterval = setInterval(() => {\n      if (leader) {\n        try {\n          const now = Date.now();\n          localStorage.setItem(\"quizbowl:heartbeat\", JSON.stringify({ id: myId, ts: now }));\n          if (bc) bc.postMessage({ type: \"heartbeat\", id: myId, ts: now });\n        } catch (err) {\n          // ignore\n        }\n      } else {\n        attemptToBecomeLeader();\n      }\n    }, 2500);\n\n    attemptToBecomeLeader();\n\n    const scheduleNext = (ms) => {\n      if (stopped) return;\n      if (pollTimeout) clearTimeout(pollTimeout);\n      pollTimeout = setTimeout(pollOnce, ms || 1000);\n    };\n\n    async function pollOnce() {\n      if (stopped) return;\n      if (!leader) {\n        // not leader; wait and try again later\n        scheduleNext(3000 + Math.random() * 2000);\n        return;\n      }\n      if (document.hidden) {\n        // when hidden, poll less frequently\n        scheduleNext(10000 + Math.random() * 5000);\n        return;\n      }\n\n      const baseInterval = isAdmin ? 5000 : 15000; // reduced load for viewers, reasonable interval for admins\n      let waitForNext = baseInterval + Math.random() * 2000;\n\n      try {\n        // Game fetch with conditional ETag\n        const gameEtag = localStorage.getItem(ETAG_GAME_KEY) || undefined;\n        const gameRes = await api.get(\"/api/game\", {\n          params: { gameId },\n          headers: gameEtag ? { \"If-None-Match\": gameEtag } : {},\n          validateStatus: (s) => s === 200 || s === 304 || (s >= 200 && s < 300),\n        });\n        if (gameRes.status === 200) {\n          if (isAdmin || !game) {\n            setGame(gameRes.data);\n            if (!editingNames) {\n              setTeamAInput(gameRes.data.teamAName);\n              setTeamBInput(gameRes.data.teamBName);\n            }\n          }\n          const newEtag = (gameRes.headers && (gameRes.headers.etag || gameRes.headers.ETag)) || undefined;\n          if (newEtag) localStorage.setItem(ETAG_GAME_KEY, newEtag);\n        }\n\n        // Bracket fetch with conditional ETag\n        const bracketEtag = localStorage.getItem(ETAG_BRACKET_KEY) || undefined;\n        const bracketRes = await api.get(\"/api/bracket\", {\n          headers: bracketEtag ? { \"If-None-Match\": bracketEtag } : {},\n          validateStatus: (s) => s === 200 || s === 304 || (s >= 200 && s < 300),\n        });\n        if (bracketRes.status === 200) {\n          setBracket(bracketRes.data);\n          const newEtag = (bracketRes.headers && (bracketRes.headers.etag || bracketRes.headers.ETag)) || undefined;\n          if (newEtag) localStorage.setItem(ETAG_BRACKET_KEY, newEtag);\n        }\n\n        // broadcast if there are updates; on 304 we send undefined which consumers ignore\n        notifyUpdate({\n          game: (gameRes && gameRes.status === 200) ? gameRes.data : undefined,\n          bracket: (bracketRes && bracketRes.status === 200) ? bracketRes.data : undefined,\n        });\n\n        // success\n        retry = 0;\n      } catch (err) {\n        // err may be network or server - escalate backoff\n        retry++;\n        waitForNext = Math.min(60000, (2 ** retry) * 1000 + Math.random() * 1000);\n      } finally {\n        scheduleNext(waitForNext);\n      }\n    }\n\n    // visibility: if coming back visible, try an immediate poll\n    const onVis = () => {\n      if (!document.hidden && leader) {\n        pollOnce();\n      }\n    };\n    document.addEventListener(\"visibilitychange\", onVis);\n\n    // storage listener allows tabs without BroadcastChannel to receive updates and to observe heartbeats\n    const onStorage = (ev) => {\n      if (ev.key === \"quizbowl:lastUpdate\" && ev.newValue) {\n        try {\n          const parsed = JSON.parse(ev.newValue);\n          const p = parsed.payload || {};\n          if (p.game) setGame(p.game);\n          if (p.bracket) setBracket(p.bracket);\n        } catch (err) {\n          // ignore\n        }\n      } else if (ev.key === \"quizbowl:heartbeat\" && ev.newValue) {\n        try {\n          const hb = JSON.parse(ev.newValue);\n          if (hb.id !== myId) {\n            leader = false;\n          }\n        } catch (err) {\n          // ignore\n        }\n      }\n    };\n    window.addEventListener(\"storage\", onStorage);\n\n    // also listen on BroadcastChannel for updates\n    if (bc) bc.onmessage = onBcMessage;\n\n    // start polling cycle\n    pollOnce();\n\n    return () => {\n      stopped = true;\n      leader = false;\n      if (heartbeatInterval) clearInterval(heartbeatInterval);\n      if (pollTimeout) clearTimeout(pollTimeout);\n      document.removeEventListener(\"visibilitychange\", onVis);\n      window.removeEventListener(\"storage\", onStorage);\n      if (bc) {\n        try { bc.close(); } catch (err) { /* ignore */ }\n      }\n    };\n  }, [isAdmin, gameId, editingNames]);\n\n  useEffect(() => {\n    const source = new EventSource(\"https://api.quizbowl.game-manager.org/api/bracket/stream\");\n    source.addEventListener(\"bracket\", (e) => {\n      try {\n        const data = JSON.parse(e.data);\n        setBracket(data);\n      } catch (err) {\n        // ignore parse errors\n      }\n    });\n    source.onerror = () => {\n      source.close();\n    };\n    return () => {\n      source.close();\n    };\n  }, []);\n\n  useInterval(() => {\n    setTimerSeconds((prev) => {\n      if (!timerRunning) {\n        return prev;\n      }\n      const next = prev - 1;\n      if (next <= 0) {\n        if (timerRunning) {\n          setTimerRunning(false);\n        }\n        if (timerEndRef.current) {\n          timerEndRef.current.currentTime = 0;\n          timerEndRef.current.play();\n        }\n        return 0;\n      }\n      return next;\n    });\n  }, timerRunning ? 1000 : null);\n\n  useEffect(() => {\n    if (bracket && bracket.teams) {\n      const available = bracket.teams.filter((t) => !t.eliminated);\n      if (!pairTeamAId && available[0]) {\n        setPairTeamAId(available[0].id);\n      }\n      if (!pairTeamBId && available[1]) {\n        setPairTeamBId(available[1].id);\n      }\n    }\n  }, [bracket, pairTeamAId, pairTeamBId]);\n\n  const startTimerWithMode = (mode) => {\n    setTimerMode(mode);\n    setTimerSeconds(mode === \"bonus\" ? 20 : 7);\n    setTimerRunning(true);\n  };\n\n  const pauseTimer = () => {\n    setTimerRunning(false);\n  };\n\n  const resetTimer = () => {\n    setTimerRunning(false);\n    setTimerSeconds(timerMode === \"bonus\" ? 20 : 7);\n  };\n\n  const timerProgress = () => {\n    const total = timerMode === \"bonus\" ? 20 : 7;\n    return Math.max(0, Math.min(1, timerSeconds / total));\n  };\n\n  const awardTossup = async (team) => {\n    if (isAdmin) {\n      await api.post(\"/api/game/award-tossup\", { team }, { params: { gameId }, headers: adminHeaders() });\n      if (correctRef.current) {\n        correctRef.current.currentTime = 0;\n        correctRef.current.play();\n      }\n      fetchGame();\n      return;\n    }\n    setGame((g) => {\n      const base = g || {\n        teamAName: teamAInput || \"Team A\",\n        teamBName: teamBInput || \"Team B\",\n        teamAScore: 0,\n        teamBScore: 0,\n        questionNumber: 1,\n        lastTossupWinner: null,\n        history: [],\n      };\n      const next = { ...base, history: [...(base.history || [])] };\n      if (team === \"A\") {\n        next.teamAScore = (next.teamAScore || 0) + 10;\n        next.lastTossupWinner = \"A\";\n        next.history.push({\n          type: \"TOSSUP\",\n          description: `Tossup +10 → ${next.teamAName || \"Team A\"}`,\n          timestamp: Date.now(),\n          team: \"A\",\n          points: 10,\n        });\n      } else if (team === \"B\") {\n        next.teamBScore = (next.teamBScore || 0) + 10;\n        next.lastTossupWinner = \"B\";\n        next.history.push({\n          type: \"TOSSUP\",\n          description: `Tossup +10 → ${next.teamBName || \"Team B\"}`,\n          timestamp: Date.now(),\n          team: \"B\",\n          points: 10,\n        });\n      }\n      return next;\n    });\n    if (correctRef.current) {\n      correctRef.current.currentTime = 0;\n      correctRef.current.play();\n    }\n  };\n\n  const awardBonus = async () => {\n    if (isAdmin) {\n      await api.post(\"/api/game/award-bonus\", { points: 10 }, { params: { gameId }, headers: adminHeaders() });\n      if (bonusRef.current) {\n        bonusRef.current.currentTime = 0;\n        bonusRef.current.play();\n      }\n      fetchGame();\n      return;\n    }\n    setGame((g) => {\n      if (!g || !g.lastTossupWinner) return g;\n      const next = { ...g, history: [...(g.history || [])] };\n      if (g.lastTossupWinner === \"A\") {\n        next.teamAScore = (next.teamAScore || 0) + 10;\n        next.history.push({\n          type: \"BONUS\",\n          description: `Bonus +10 → ${next.teamAName || \"Team A\"}`,\n          timestamp: Date.now(),\n          team: \"A\",\n          points: 10,\n        });\n      } else if (g.lastTossupWinner === \"B\") {\n        next.teamBScore = (next.teamBScore || 0) + 10;\n        next.history.push({\n          type: \"BONUS\",\n          description: `Bonus +10 → ${next.teamBName || \"Team B\"}`,\n          timestamp: Date.now(),\n          team: \"B\",\n          points: 10,\n        });\n      }\n      return next;\n    });\n    if (bonusRef.current) {\n      bonusRef.current.currentTime = 0;\n      bonusRef.current.play();\n    }\n  };\n\n  const handleNextTossup = async () => {\n    if (!isAdmin) {\n      setGame((g) =>\n        g\n          ? { ...g, questionNumber: (g.questionNumber || 1) + 1, lastTossupWinner: null }\n          : g\n      );\n      setTimerMode(\"tossup\");\n      setTimerSeconds(7);\n      setTimerRunning(false);\n      return;\n    }\n    await api.post(\"/api/game/next-tossup\", null, { params: { gameId }, headers: adminHeaders() });\n    setTimerMode(\"tossup\");\n    setTimerSeconds(7);\n    setTimerRunning(false);\n    fetchGame();\n  };\n\n  const handleResetGame = async () => {\n    try {\n      if (!isAdmin) {\n        setGame({\n          teamAName: \"Team A\",\n          teamBName: \"Team B\",\n          teamAScore: 0,\n          teamBScore: 0,\n          questionNumber: 1,\n          lastTossupWinner: null,\n          history: [],\n        });\n        setTimerMode(\"tossup\");\n        setTimerSeconds(7);\n        setTimerRunning(false);\n        setAuthError(\"\");\n        return;\n      }\n      await api.post(\"/api/game/reset\", null, { params: { gameId }, headers: adminHeaders() });\n      await api.post(\"/api/bracket/reset\", null, { headers: adminHeaders() });\n      setTimerMode(\"tossup\");\n      setTimerSeconds(7);\n      setTimerRunning(false);\n      setPairTeamAId(\"\");\n      setPairTeamBId(\"\");\n      setPlayerTeamId(\"\");\n      setBracketNamesText(\"\");\n      setAuthError(\"\");\n      fetchGame();\n      fetchBracket();\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Unable to reset game (are you logged in as admin?)\";\n      setAuthError(message);\n    }\n  };\n\n  const handleSaveNames = async () => {\n    if (!isAdmin) {\n      // local-only change for viewers\n      setGame((g) => ({\n        ...(g || {}),\n        teamAName: teamAInput,\n        teamBName: teamBInput,\n      }));\n      setEditingNames(false);\n      return;\n    }\n    await api.post(\"/api/game/team-names\", {\n      teamAName: teamAInput,\n      teamBName: teamBInput,\n    }, { params: { gameId }, headers: adminHeaders() });\n    setEditingNames(false);\n    fetchGame();\n  };\n\n  const initBracket = async () => {\n    const names = bracketNamesText\n      .split(\"\\n\")\n      .map((n) => n.trim())\n      .filter((n) => n.length > 0);\n    await api.post(\"/api/bracket/init\", { teamNames: names }, { headers: adminHeaders() });\n    fetchBracket();\n  };\n\n  const resetBracket = async () => {\n    await api.post(\"/api/bracket/reset\", null, { headers: adminHeaders() });\n    setPairTeamAId(\"\");\n    setPairTeamBId(\"\");\n    fetchBracket();\n  };\n\n  const pushPairingToGame = async () => {\n    if (!pairTeamAId || !pairTeamBId) return;\n    await api.post(\n      \"/api/bracket/set-current\",\n      {\n        teamAId: pairTeamAId,\n        teamBId: pairTeamBId,\n      },\n      { params: { gameId }, headers: adminHeaders() }\n    );\n    await fetchBracket();\n    await fetchGame();\n  };\n\n  const finalizeCurrentMatch = async () => {\n    await api.post(\"/api/bracket/finalize-current\", null, { params: { gameId }, headers: adminHeaders() });\n    await fetchBracket();\n  };\n\n  const getTeamName = useCallback(\n    (id) => {\n      if (!bracket || !bracket.teams) return \"\";\n      const team = bracket.teams.find((t) => t.id === id);\n      return team ? team.name : \"\";\n    },\n    [bracket]\n  );\n\n  const history = useMemo(() => {\n    const items = game?.history || [];\n    return [...items].reverse();\n  }, [game]);\n\n  const renderTree = (bracketName) => {\n    if (!bracket) return null;\n    const matches = (bracket.matches || []).filter((m) => m.bracket === bracketName);\n    const byRound = {};\n    matches.forEach((m) => {\n      if (!byRound[m.round]) byRound[m.round] = [];\n      byRound[m.round].push(m);\n    });\n    const rounds = Object.keys(byRound)\n      .map((n) => parseInt(n, 10))\n      .sort((a, b) => a - b);\n\n    return (\n      <div className=\"bracket-tree\">\n        {rounds.map((round) => (\n          <div className=\"bracket-col\" key={`${bracketName}-${round}`}>\n            <div className=\"bracket-col-title\">Round {round}</div>\n            {byRound[round].map((m) => (\n              <div className=\"match-card\" key={m.id}>\n                <div className=\"match-row\">\n                  <span>{getTeamName(m.teamAId)}</span>\n                  <span className=\"score-pill\">\n                    {m.scoreA !== null && m.scoreA !== undefined ? m.scoreA : \"-\"}\n                  </span>\n                </div>\n                <div className=\"match-row\">\n                  <span>{getTeamName(m.teamBId)}</span>\n                  <span className=\"score-pill\">\n                    {m.scoreB !== null && m.scoreB !== undefined ? m.scoreB : \"-\"}\n                  </span>\n                </div>\n                {m.winnerId && (\n                  <div className=\"winner-line\">\n                    Winner: <strong>{getTeamName(m.winnerId)}</strong>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const winnersList = (bracket?.teams || []).filter(\n    (t) => !t.eliminated && t.losses === 0\n  );\n  const losersList = (bracket?.teams || []).filter(\n    (t) => !t.eliminated && t.losses === 1\n  );\n  const eliminatedList = (bracket?.teams || []).filter((t) => t.eliminated);\n\n  const timerTotal = timerMode === \"bonus\" ? 20 : 7;\n  const radius = 70;\n  const circumference = 2 * Math.PI * radius;\n  const progress = timerProgress();\n  const offset = circumference * (1 - progress);\n  const stroke =\n    progress > 0.5 ? \"#4ade80\" : progress > 0.25 ? \"#fbbf24\" : \"#fb923c\";\n\n  const handleLogin = async () => {\n    try {\n      const res = await api.post(\"/api/auth/login\", {\n        username: loginUsername,\n        password: loginPassword,\n      });\n      setAuthToken(res.data.token);\n      setAuthRole(res.data.role);\n      setAuthUsername(res.data.username);\n      localStorage.setItem(\"authToken\", res.data.token);\n      localStorage.setItem(\"authRole\", res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      setAuthError(\"\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Invalid username or password\";\n      setAuthError(message);\n    }\n  };\n\n  const handleRegister = async () => {\n    try {\n      const res = await api.post(\"/api/auth/register\", {\n        username: registerUsername,\n        password: registerPassword,\n      });\n      setAuthToken(res.data.token);\n      setAuthRole(res.data.role);\n      setAuthUsername(res.data.username);\n      localStorage.setItem(\"authToken\", res.data.token);\n      localStorage.setItem(\"authRole\", res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      setAuthView(\"login\");\n      setAuthError(\"\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Registration failed\";\n      setAuthError(message);\n    }\n  };\n\n  const handleProfileUpdate = async (newUsername, newPassword) => {\n    try {\n      const res = await api.post(\n        \"/api/auth/update-profile\",\n        { newUsername, newPassword },\n        { headers: adminHeaders() }\n      );\n      setAuthUsername(res.data.username);\n      setAuthRole(res.data.role);\n      localStorage.setItem(\"authUsername\", res.data.username);\n      localStorage.setItem(\"authRole\", res.data.role);\n      setAuthError(\"Profile updated\");\n    } catch (err) {\n      const message = err?.response?.data?.message || \"Update failed\";\n      setAuthError(message);\n    }\n  };\n\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setAuthRole(\"\");\n    setAuthUsername(\"\");\n    localStorage.removeItem(\"authToken\");\n    localStorage.removeItem(\"authRole\");\n    localStorage.removeItem(\"authUsername\");\n  };\n\n  const nextMatchForTeam = (teamId) => {\n    if (!bracket || !teamId) return null;\n    const pending = (bracket.matches || []).find(\n      (m) => !m.completed && (m.teamAId === teamId || m.teamBId === teamId)\n    );\n    if (pending) {\n      return {\n        bracket: pending.bracket,\n        round: pending.round,\n        opponent:\n          pending.teamAId === teamId ? getTeamName(pending.teamBId) : getTeamName(pending.teamAId),\n      };\n    }\n    const suggestedWin = (bracket.suggestedWinnersPairs || []).find(\n      (p) => p.teamAId === teamId || p.teamBId === teamId\n    );\n    if (suggestedWin) {\n      const opponent =\n        suggestedWin.teamAId === teamId\n          ? getTeamName(suggestedWin.teamBId)\n          : getTeamName(suggestedWin.teamAId);\n      return { bracket: \"WINNERS\", round: \"TBD\", opponent, status: \"Awaiting winners pairing\" };\n    }\n    const suggestedLose = (bracket.suggestedLosersPairs || []).find(\n      (p) => p.teamAId === teamId || p.teamBId === teamId\n    );\n    if (suggestedLose) {\n      const opponent =\n        suggestedLose.teamAId === teamId\n          ? getTeamName(suggestedLose.teamBId)\n          : getTeamName(suggestedLose.teamAId);\n      return { bracket: \"LOSERS\", round: \"TBD\", opponent, status: \"Awaiting losers pairing\" };\n    }\n    const team = (bracket.teams || []).find((t) => t.id === teamId);\n    if (team?.eliminated) {\n      return { status: \"Eliminated\" };\n    }\n    if (bracket.finished) {\n      return { status: \"Bracket finished\" };\n    }\n    return { status: \"Waiting for scheduling\" };\n  };\n\n  const viewerNextMatch = nextMatchForTeam(playerTeamId);\n\n  if (!authToken) {\n    return (\n      <div className=\"auth-page\">\n        <div className=\"auth-card\">\n          <div className=\"auth-toggle\">\n            <button\n              className={`tab ${authView === \"login\" ? \"active\" : \"\"}`}\n              onClick={() => setAuthView(\"login\")}\n            >\n              Login\n            </button>\n            <button\n              className={`tab ${authView === \"register\" ? \"active\" : \"\"}`}\n              onClick={() => setAuthView(\"register\")}\n            >\n              Register\n            </button>\n          </div>\n          {authView === \"login\" ? (\n            <>\n              <h2>Welcome back</h2>\n              <p className=\"muted\">Admins sign in; players use their own account.</p>\n              <input\n                value={loginUsername}\n                onChange={(e) => setLoginUsername(e.target.value)}\n                placeholder=\"Username\"\n              />\n              <input\n                type=\"password\"\n                value={loginPassword}\n                onChange={(e) => setLoginPassword(e.target.value)}\n                placeholder=\"Password\"\n              />\n              <button className=\"btn primary\" onClick={handleLogin}>\n                Sign in\n              </button>\n            </>\n          ) : authView === \"register\" ? (\n            <>\n              <h2>Create your account</h2>\n              <input\n                value={registerUsername}\n                onChange={(e) => setRegisterUsername(e.target.value)}\n                placeholder=\"Choose username\"\n              />\n              <input\n                type=\"password\"\n                value={registerPassword}\n                onChange={(e) => setRegisterPassword(e.target.value)}\n                placeholder=\"Choose password\"\n              />\n              <button className=\"btn primary\" onClick={handleRegister}>\n                Register &amp; continue\n              </button>\n            </>\n          ) : null}\n          {authError && <div className=\"auth-error\">{authError}</div>}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <div className=\"logo\">Quizbowl Control</div>\n        <div className=\"header-actions\">\n          <div className=\"auth-chip\">\n            <div className=\"auth-name\">{authUsername || \"user\"}</div>\n            <div className=\"auth-role\">({isAdmin ? \"Administrator\" : \"Viewer\"})</div>\n            <button\n              className=\"btn ghost small-btn\"\n              onClick={() => handleProfileUpdate(prompt(\"New username (leave blank to keep)\", \"\"), prompt(\"New password (leave blank to keep)\", \"\"))}\n            >\n              Update profile\n            </button>\n            <button className=\"btn ghost\" onClick={handleLogout}>\n              Logout\n            </button>\n          </div>\n          <div className=\"tabs\">\n            <button\n              className={`tab ${page === \"control\" ? \"active\" : \"\"}`}\n              onClick={() => setPage(\"control\")}\n            >\n              Control\n            </button>\n            <button\n              className={`tab ${page === \"bracket\" ? \"active\" : \"\"}`}\n              onClick={() => setPage(\"bracket\")}\n            >\n              Bracket\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {page === \"control\" && (\n        <>\n          <div className=\"control-layout\">\n            <div className=\"card timer-card\">\n              <div className=\"card-header\">\n                <h3>Timer &amp; Flow</h3>\n                <div className=\"chip-row\">\n                  <button\n                    className={`chip ${timerMode === \"tossup\" ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      setTimerMode(\"tossup\");\n                      setTimerSeconds(7);\n                      setTimerRunning(false);\n                    }}\n                  >\n                    Tossup (7s)\n                  </button>\n                  <button\n                    className={`chip ${timerMode === \"bonus\" ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      setTimerMode(\"bonus\");\n                      setTimerSeconds(20);\n                      setTimerRunning(false);\n                    }}\n                  >\n                    Bonus (20s)\n                  </button>\n                </div>\n              </div>\n              <div className=\"timer-body\">\n                <div className=\"timer-visual\">\n                  <div className=\"timer-ring\">\n                    <svg height=\"180\" width=\"180\">\n                      <circle\n                        cx=\"90\"\n                        cy=\"90\"\n                        r={radius}\n                        stroke=\"#1f2a44\"\n                        strokeWidth=\"10\"\n                        fill=\"none\"\n                        className=\"timer-track\"\n                      />\n                      <circle\n                        cx=\"90\"\n                        cy=\"90\"\n                        r={radius}\n                        stroke={stroke}\n                        strokeWidth=\"10\"\n                        fill=\"none\"\n                        strokeDasharray={circumference}\n                        strokeDashoffset={offset}\n                        transform=\"rotate(-90 90 90)\"\n                        strokeLinecap=\"round\"\n                        className=\"timer-progress\"\n                      />\n                    </svg>\n                    <div className=\"timer-center\">\n                      <div className=\"timer-value\">{timerSeconds}s</div>\n                      <div className=\"timer-mode-label\">\n                        {timerMode === \"bonus\" ? \"Bonus\" : \"Tossup\"} timer\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"timer-actions\">\n                    <button\n                      className=\"btn primary\"\n                      onClick={() => startTimerWithMode(timerMode)}\n                    >\n                      Start\n                    </button>\n                    <button className=\"btn ghost\" onClick={pauseTimer}>\n                      Pause\n                    </button>\n                    <button className=\"btn ghost\" onClick={resetTimer}>\n                      Reset\n                    </button>\n                  </div>\n                </div>\n                <div className=\"timer-side\">\n                  <p className=\"muted\">Use Tossup/Bonus chips to load durations.</p>\n                  <p className=\"muted\">\n                    Start resets to the full length for the selected mode. Pause halts countdown.\n                  </p>\n                  <p className=\"muted\">Next Tossup will also clear the timer back to 7 seconds.</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card scoreboard-card\">\n              <div className=\"scoreboard\">\n                <div className=\"team-block\">\n                  <div className=\"team-heading\">\n                    <span className=\"dot dot-a\" />\n                    {editingNames ? (\n                      <input\n                        value={teamAInput}\n                        onChange={(e) => setTeamAInput(e.target.value)}\n                      />\n                    ) : (\n                      <span className=\"team-name\">{game?.teamAName || \"Team A\"}</span>\n                    )}\n                  </div>\n                  <div className=\"team-score\">{game?.teamAScore ?? 0}</div>\n                </div>\n\n                <div className=\"center-block\">\n                  <div className=\"question-label\">Question</div>\n                  <div className=\"question-number\">#{game?.questionNumber ?? 1}</div>\n                  <div className=\"center-actions\">\n                    <button className=\"btn primary\" onClick={handleNextTossup}>\n                      Next tossup\n                    </button>\n                    <button className=\"btn ghost\" onClick={handleResetGame}>\n                      Reset game\n                    </button>\n                  </div>\n                  <div className=\"edit-row\">\n                    <button\n                      className={`chip small ${editingNames ? \"active\" : \"\"}`}\n                      onClick={() => setEditingNames((v) => !v)}\n                    >\n                      {editingNames ? \"Editing…\" : \"Edit names\"}\n                    </button>\n                    {editingNames && (\n                      <button className=\"btn primary\" onClick={handleSaveNames}>\n                        Save names\n                      </button>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"team-block\">\n                  <div className=\"team-heading\">\n                    <span className=\"dot dot-b\" />\n                    {editingNames ? (\n                      <input\n                        value={teamBInput}\n                        onChange={(e) => setTeamBInput(e.target.value)}\n                      />\n                    ) : (\n                      <span className=\"team-name\">{game?.teamBName || \"Team B\"}</span>\n                    )}\n                  </div>\n                  <div className=\"team-score\">{game?.teamBScore ?? 0}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"control-bottom-row\">\n            <div className=\"card scoring-card\">\n              <div className=\"section-header\">\n                <h3>Scoring</h3>\n                <span className=\"muted\">Live actions feed the history log.</span>\n              </div>\n              <div className=\"scoring-section\">\n                <div className=\"section-label\">Tossups</div>\n                <div className=\"action-row\">\n                  <button className=\"btn primary wide\" onClick={() => awardTossup(\"A\")}>\n                    Tossup +10 → {game?.teamAName || \"Team A\"}\n                  </button>\n                  <button className=\"btn primary wide\" onClick={() => awardTossup(\"B\")}>\n                    Tossup +10 → {game?.teamBName || \"Team B\"}\n                  </button>\n                </div>\n              </div>\n              <div className=\"scoring-section\">\n                <div className=\"section-label\">Bonus</div>\n                <div className=\"action-row\">\n                  <button\n                    className=\"btn bonus wide\"\n                    disabled={!game?.lastTossupWinner || !isAdmin}\n                    onClick={awardBonus}\n                  >\n                    {game?.lastTossupWinner === \"A\"\n                      ? `Bonus +10 → ${game?.teamAName || \"Team A\"}`\n                      : game?.lastTossupWinner === \"B\"\n                      ? `Bonus +10 → ${game?.teamBName || \"Team B\"}`\n                      : \"Bonus +10 (await tossup)\"}\n                  </button>\n                </div>\n                <div className=\"muted small-text\">\n                  Bonus always goes to whoever got the last tossup. If no tossup, no bonus.\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card history-card\">\n              <div className=\"section-header\">\n                <h3>Recent history</h3>\n                {loadingGame && <span className=\"muted\">Syncing…</span>}\n              </div>\n              <div className=\"history-list\">\n                {history.map((ev, idx) => (\n                  <div className=\"history-item\" key={`${ev.timestamp}-${idx}`}>\n                    <div className=\"history-type\">{ev.type}</div>\n                    <div className=\"history-desc\">{ev.description}</div>\n                    <div className=\"history-time\">\n                      {new Date(ev.timestamp).toLocaleTimeString()}\n                    </div>\n                  </div>\n                ))}\n                {history.length === 0 && <div className=\"muted\">No events yet.</div>}\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\n      {page === \"bracket\" && (\n        <div className=\"bracket-layout\">\n          {isAdmin && (!bracket?.teams || bracket?.teams.length === 0) && (\n            <div className=\"card setup-card\">\n              <div className=\"card-header\">\n                <h3>Bracket setup &amp; pairing</h3>\n                {loadingBracket && <span className=\"muted\">Loading…</span>}\n              </div>\n              <textarea\n                className=\"bracket-textarea\"\n                placeholder=\"Enter one team per line\"\n                value={bracketNamesText}\n                onChange={(e) => setBracketNamesText(e.target.value)}\n              />\n              <div className=\"button-row\">\n                <button className=\"btn primary\" onClick={initBracket} disabled={!isAdmin}>\n                  Initialize bracket\n                </button>\n                <button className=\"btn ghost\" onClick={resetBracket} disabled={!isAdmin}>\n                  Reset bracket\n                </button>\n              </div>\n\n              <div className=\"pair-row\">\n                <div className=\"pair\">\n                  <label>Left scoreboard</label>\n                  <select value={pairTeamAId} onChange={(e) => setPairTeamAId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <div className=\"pair\">\n                  <label>Right scoreboard</label>\n                  <select value={pairTeamBId} onChange={(e) => setPairTeamBId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"button-row\">\n                <button className=\"btn primary\" onClick={pushPairingToGame} disabled={!isAdmin}>\n                  Push pairing to game\n                </button>\n                <button className=\"btn ghost\" onClick={finalizeCurrentMatch} disabled={!isAdmin}>\n                  Finalize current match\n                </button>\n              </div>\n\n              <div className=\"status-row\">\n                <div className=\"status-chip winners\">\n                  Winners:{\" \"}\n                  {winnersList.length\n                    ? winnersList.map((t) => t.name).join(\", \")\n                    : \"—\"}\n                </div>\n                <div className=\"status-chip losers\">\n                  Losers:{\" \"}\n                  {losersList.length ? losersList.map((t) => t.name).join(\", \") : \"—\"}\n                </div>\n                <div className=\"status-chip eliminated\">\n                  Eliminated:{\" \"}\n                  {eliminatedList.length\n                    ? eliminatedList.map((t) => t.name).join(\", \")\n                    : \"—\"}\n                </div>\n              </div>\n\n              <div className=\"suggestions-row\">\n                {bracket?.suggestedWinnersTeamAId && bracket?.suggestedWinnersTeamBId && (\n                  <div className=\"suggestion-pill\">\n                    Next winners match:{\" \"}\n                    <strong>\n                      {getTeamName(bracket.suggestedWinnersTeamAId)} vs{\" \"}\n                      {getTeamName(bracket.suggestedWinnersTeamBId)}\n                    </strong>\n                  </div>\n                )}\n                {bracket?.suggestedLosersTeamAId && bracket?.suggestedLosersTeamBId && (\n                  <div className=\"suggestion-pill\">\n                    Next losers match:{\" \"}\n                    <strong>\n                      {getTeamName(bracket.suggestedLosersTeamAId)} vs{\" \"}\n                      {getTeamName(bracket.suggestedLosersTeamBId)}\n                    </strong>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          <div className=\"card bracket-card\">\n            {isAdmin && (bracket?.teams || []).length > 0 && (\n              <div className=\"inline-controls\">\n                <div className=\"pair\">\n                  <label>Left scoreboard</label>\n                  <select value={pairTeamAId} onChange={(e) => setPairTeamAId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <div className=\"pair\">\n                  <label>Right scoreboard</label>\n                  <select value={pairTeamBId} onChange={(e) => setPairTeamBId(e.target.value)}>\n                    <option value=\"\">Select team</option>\n                    {(bracket?.teams || [])\n                      .filter((t) => !t.eliminated)\n                      .map((t) => (\n                        <option key={t.id} value={t.id}>\n                          {t.name}\n                        </option>\n                      ))}\n                  </select>\n                </div>\n                <button className=\"btn primary\" onClick={pushPairingToGame} disabled={!isAdmin}>\n                  Push to game\n                </button>\n                <button className=\"btn ghost\" onClick={finalizeCurrentMatch} disabled={!isAdmin}>\n                  Finalize current\n                </button>\n              </div>\n            )}\n            <div className=\"trees-top-row\">\n              <div>\n                <div className=\"tree-header\">\n                  <h4>Winners bracket</h4>\n                  <div className=\"header-line\">\n                    {winnersList.map((t) => t.name).join(\" • \")}\n                  </div>\n                  {bracket?.suggestedWinnersPairs && bracket.suggestedWinnersPairs.length > 0 && (\n                    <div className=\"suggest-list\">\n                      {bracket.suggestedWinnersPairs.map((p, idx) => (\n                        <div className=\"suggestion-pill\" key={`w-${p.teamAId}-${p.teamBId}-${idx}`}>\n                          {getTeamName(p.teamAId)} vs {getTeamName(p.teamBId)}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                {renderTree(\"WINNERS\")}\n              </div>\n              <div>\n                <div className=\"tree-header\">\n                  <h4>Losers bracket</h4>\n                  <div className=\"header-line\">\n                    {losersList.map((t) => t.name).join(\" • \")}\n                  </div>\n                  {bracket?.suggestedLosersPairs && bracket.suggestedLosersPairs.length > 0 && (\n                    <div className=\"suggest-list\">\n                      {bracket.suggestedLosersPairs.map((p, idx) => (\n                        <div className=\"suggestion-pill\" key={`l-${p.teamAId}-${p.teamBId}-${idx}`}>\n                          {getTeamName(p.teamAId)} vs {getTeamName(p.teamBId)}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n                {renderTree(\"LOSERS\")}\n              </div>\n            </div>\n\n            <div className=\"standings\">\n              <h4>Standings</h4>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Team</th>\n                    <th>Losses</th>\n                    <th>Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {(bracket?.teams || [])\n                    .slice()\n                    .sort((a, b) => a.losses - b.losses)\n                    .map((team) => (\n                      <tr key={team.id}>\n                        <td>{team.name}</td>\n                        <td>{team.losses}</td>\n                        <td>\n                          {team.eliminated\n                            ? \"Eliminated\"\n                            : team.losses === 0\n                            ? \"Winners bracket\"\n                            : \"Losers bracket\"}\n                        </td>\n                      </tr>\n                    ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"viewer-card card\">\n            <h4>Player lookup</h4>\n            <select value={playerTeamId} onChange={(e) => setPlayerTeamId(e.target.value)}>\n              <option value=\"\">Select your team</option>\n              {(bracket?.teams || []).map((t) => (\n                <option key={t.id} value={t.id}>\n                  {t.name}\n                </option>\n              ))}\n            </select>\n            {viewerNextMatch ? (\n              <div className=\"viewer-info\">\n                {viewerNextMatch.status ? (\n                  <div className=\"muted\">{viewerNextMatch.status}</div>\n                ) : (\n                  <div>\n                    Next match: {viewerNextMatch.bracket} Round {viewerNextMatch.round} vs{\" \"}\n                    {viewerNextMatch.opponent || \"TBD\"}\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"muted\">No pending matches found yet.</div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {isAdmin && (\n        <div className=\"footer-bar\">\n          <button className=\"btn ghost\" onClick={handleResetGame}>\n            Reset game\n          </button>\n        </div>\n      )}\n\n      <audio ref={correctRef} src=\"/sounds/correct.wav\" />\n      <audio ref={bonusRef} src=\"/sounds/bonus.wav\" />\n      <audio ref={timerEndRef} src=\"/sounds/timer_end.wav\" />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"+HAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,SAAS,CAAEC,OAAO,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAChF,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,WAAW,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEnB,KAAM,CAAAC,GAAG,CAAGP,KAAK,CAACQ,MAAM,CAAC,CACvBC,OAAO,CAAE,uCACX,CAAC,CAAC,CAEF,QAAS,CAAAC,WAAWA,CAACC,QAAQ,CAAEC,KAAK,CAAE,CACpC,KAAM,CAAAC,aAAa,CAAGf,MAAM,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACdiB,aAAa,CAACC,OAAO,CAAGH,QAAQ,CAClC,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEdf,SAAS,CAAC,IAAM,CACd,GAAIgB,KAAK,GAAK,IAAI,CAAE,CAClB,OACF,CACA,KAAM,CAAAG,EAAE,CAAGC,WAAW,CAAC,IAAM,CAC3B,GAAIH,aAAa,CAACC,OAAO,CAAE,CACzBD,aAAa,CAACC,OAAO,CAAC,CAAC,CACzB,CACF,CAAC,CAAEF,KAAK,CAAC,CACT,MAAO,IAAMK,aAAa,CAACF,EAAE,CAAC,CAChC,CAAC,CAAE,CAACH,KAAK,CAAC,CAAC,CACb,CAEA,QAAS,CAAAM,GAAGA,CAAA,CAAG,KAAAC,gBAAA,CAAAC,oBAAA,CAAAC,gBAAA,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGxB,QAAQ,CAAC,SAAS,CAAC,CAC3C,KAAM,CAAAyB,MAAM,CAAG,SAAS,CACxB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAC4B,WAAW,CAAEC,cAAc,CAAC,CAAG7B,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC8B,OAAO,CAAEC,UAAU,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgC,cAAc,CAAEC,iBAAiB,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkC,YAAY,CAAEC,eAAe,CAAC,CAAGnC,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACoC,UAAU,CAAEC,aAAa,CAAC,CAAGrC,QAAQ,CAAC,QAAQ,CAAC,CACtD,KAAM,CAACsC,UAAU,CAAEC,aAAa,CAAC,CAAGvC,QAAQ,CAAC,QAAQ,CAAC,CACtD,KAAM,CAACwC,SAAS,CAAEC,YAAY,CAAC,CAAGzC,QAAQ,CAAC,QAAQ,CAAC,CACpD,KAAM,CAAC0C,YAAY,CAAEC,eAAe,CAAC,CAAG3C,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAAC4C,YAAY,CAAEC,eAAe,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAC8C,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG/C,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACgD,WAAW,CAAEC,cAAc,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACkD,WAAW,CAAEC,cAAc,CAAC,CAAGnD,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACoD,SAAS,CAAEC,YAAY,CAAC,CAAGrD,QAAQ,CAAC,IAAMsD,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,EAAI,EAAE,CAAC,CACzF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGzD,QAAQ,CAAC,IAAMsD,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAI,EAAE,CAAC,CACtF,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAG3D,QAAQ,CAAC,IAAMsD,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,EAAI,EAAE,CAAC,CAClG,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAG7D,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC8D,QAAQ,CAAEC,WAAW,CAAC,CAAG/D,QAAQ,CAAC,OAAO,CAAC,CACjD,KAAM,CAACgE,aAAa,CAAEC,gBAAgB,CAAC,CAAGjE,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACkE,aAAa,CAAEC,gBAAgB,CAAC,CAAGnE,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoE,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrE,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACsE,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGvE,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACwE,SAAS,CAAEC,YAAY,CAAC,CAAGzE,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC0E,YAAY,CAAEC,eAAe,CAAC,CAAG3E,QAAQ,CAAC,EAAE,CAAC,CAEpD,KAAM,CAAA4E,UAAU,CAAG7E,MAAM,CAAC,IAAI,CAAC,CAC/B,KAAM,CAAA8E,QAAQ,CAAG9E,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAAA+E,WAAW,CAAG/E,MAAM,CAAC,IAAI,CAAC,CAEhC,KAAM,CAAAgF,YAAY,CAAGA,CAAA,GAAO3B,SAAS,CAAG,CAAE,eAAe,CAAEA,SAAU,CAAC,CAAG,CAAC,CAAE,CAC5E,KAAM,CAAA4B,OAAO,CAAGxB,QAAQ,GAAK,OAAO,CAEpC,KAAM,CAAAyB,SAAS,CAAGrF,WAAW,CAAC,SAAY,CACxC,GAAI,CACFiC,cAAc,CAAC,IAAI,CAAC,CACpB,KAAM,CAAAqD,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAAC2E,GAAG,CAAC,WAAW,CAAE,CAAEC,MAAM,CAAE,CAAE3D,MAAO,CAAE,CAAC,CAAC,CAC9D,GAAIuD,OAAO,EAAI,CAACtD,IAAI,CAAE,CACpBC,OAAO,CAACuD,GAAG,CAACG,IAAI,CAAC,CACjB,GAAI,CAACnD,YAAY,CAAE,CACjBG,aAAa,CAAC6C,GAAG,CAACG,IAAI,CAACC,SAAS,CAAC,CACjC/C,aAAa,CAAC2C,GAAG,CAACG,IAAI,CAACE,SAAS,CAAC,CACnC,CACF,CACF,CAAE,MAAOC,GAAG,CAAE,CACZ;AAAA,CACD,OAAS,CACR3D,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,CAACK,YAAY,CAAET,MAAM,CAAEuD,OAAO,CAAEtD,IAAI,CAAC,CAAC,CAEzC,KAAM,CAAA+D,YAAY,CAAG7F,WAAW,CAAC,SAAY,CAC3C,GAAI,CACFqC,iBAAiB,CAAC,IAAI,CAAC,CACvB,KAAM,CAAAiD,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAAC2E,GAAG,CAAC,cAAc,CAAC,CACzCpD,UAAU,CAACmD,GAAG,CAACG,IAAI,CAAC,CACtB,CAAE,MAAOG,GAAG,CAAE,CACZ;AAAA,CACD,OAAS,CACRvD,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAAE,EAAE,CAAC,CAENpC,SAAS,CAAC,IAAM,CACdoF,SAAS,CAAC,CAAC,CACXQ,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACR,SAAS,CAAEQ,YAAY,CAAEhE,MAAM,CAAC,CAAC,CAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA5B,SAAS,CAAC,IAAM,CACd,GAAI,CAAA6F,OAAO,CAAG,KAAK,CACnB,GAAI,CAAAC,MAAM,CAAG,KAAK,CAClB,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAChD,GAAI,CAAAC,iBAAiB,CAAG,IAAI,CAC5B,GAAI,CAAAC,WAAW,CAAG,IAAI,CACtB,GAAI,CAAAC,KAAK,CAAG,CAAC,CACb,KAAM,CAAAC,EAAE,CAAG,MAAO,CAAAC,gBAAgB,GAAK,WAAW,CAAG,GAAI,CAAAA,gBAAgB,CAAC,kBAAkB,CAAC,CAAG,IAAI,CAEpG,KAAM,CAAAC,aAAa,CAAG,oBAAoB,CAC1C,KAAM,CAAAC,gBAAgB,CAAG,uBAAuB,CAEhD,KAAM,CAAAC,YAAY,CAAIC,OAAO,EAAK,CAChC,GAAI,CACF,GAAIL,EAAE,CAAEA,EAAE,CAACM,WAAW,CAAC,CAAEC,IAAI,CAAE,QAAQ,CAAEF,OAAQ,CAAC,CAAC,CACnDnD,YAAY,CAACsD,OAAO,CAAC,qBAAqB,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEL,OAAO,CAAEM,EAAE,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAC1F,CAAE,MAAOzB,GAAG,CAAE,CACZ;AAAA,CAEJ,CAAC,CAED,KAAM,CAAA0B,WAAW,CAAIC,EAAE,EAAK,CAC1B,KAAM,CAAA9B,IAAI,CAAG8B,EAAE,SAAFA,EAAE,iBAAFA,EAAE,CAAE9B,IAAI,CACrB,GAAI,CAACA,IAAI,CAAE,OACX,GAAIA,IAAI,CAACsB,IAAI,GAAK,WAAW,EAAItB,IAAI,CAACrE,EAAE,GAAK4E,IAAI,CAAE,CACjD;AACAD,MAAM,CAAG,KAAK,CAChB,CAAC,IAAM,IAAIN,IAAI,CAACsB,IAAI,GAAK,QAAQ,CAAE,CACjC,KAAM,CAAAS,CAAC,CAAG/B,IAAI,CAACoB,OAAO,EAAI,CAAC,CAAC,CAC5B,GAAIW,CAAC,CAAC1F,IAAI,CAAEC,OAAO,CAACyF,CAAC,CAAC1F,IAAI,CAAC,CAC3B,GAAI0F,CAAC,CAACtF,OAAO,CAAEC,UAAU,CAACqF,CAAC,CAACtF,OAAO,CAAC,CACtC,CACF,CAAC,CAED,GAAIsE,EAAE,CAAEA,EAAE,CAACiB,SAAS,CAAGH,WAAW,CAElC,KAAM,CAAAI,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGjE,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CACtD,KAAM,CAAA0D,GAAG,CAAGD,IAAI,CAACC,GAAG,CAAC,CAAC,CACtB,KAAM,CAAAO,EAAE,CAAGD,GAAG,CAAGV,IAAI,CAACY,KAAK,CAACF,GAAG,CAAC,CAAG,IAAI,CACvC,GAAI,CAACC,EAAE,EAAIP,GAAG,EAAIO,EAAE,CAACT,EAAE,EAAI,CAAC,CAAC,CAAG,IAAI,CAAE,CACpCzD,YAAY,CAACsD,OAAO,CAAC,oBAAoB,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE9F,EAAE,CAAE4E,IAAI,CAAEmB,EAAE,CAAEE,GAAI,CAAC,CAAC,CAAC,CACjFtB,MAAM,CAAG,IAAI,CACf,CAAC,IAAM,CACLA,MAAM,CAAG6B,EAAE,CAACxG,EAAE,GAAK4E,IAAI,CACzB,CACF,CAAE,MAAOJ,GAAG,CAAE,CACZ;AAAA,CAEJ,CAAC,CAEDS,iBAAiB,CAAGhF,WAAW,CAAC,IAAM,CACpC,GAAI0E,MAAM,CAAE,CACV,GAAI,CACF,KAAM,CAAAsB,GAAG,CAAGD,IAAI,CAACC,GAAG,CAAC,CAAC,CACtB3D,YAAY,CAACsD,OAAO,CAAC,oBAAoB,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE9F,EAAE,CAAE4E,IAAI,CAAEmB,EAAE,CAAEE,GAAI,CAAC,CAAC,CAAC,CACjF,GAAIb,EAAE,CAAEA,EAAE,CAACM,WAAW,CAAC,CAAEC,IAAI,CAAE,WAAW,CAAE3F,EAAE,CAAE4E,IAAI,CAAEmB,EAAE,CAAEE,GAAI,CAAC,CAAC,CAClE,CAAE,MAAOzB,GAAG,CAAE,CACZ;AAAA,CAEJ,CAAC,IAAM,CACL8B,qBAAqB,CAAC,CAAC,CACzB,CACF,CAAC,CAAE,IAAI,CAAC,CAERA,qBAAqB,CAAC,CAAC,CAEvB,KAAM,CAAAI,YAAY,CAAIC,EAAE,EAAK,CAC3B,GAAIjC,OAAO,CAAE,OACb,GAAIQ,WAAW,CAAE0B,YAAY,CAAC1B,WAAW,CAAC,CAC1CA,WAAW,CAAG2B,UAAU,CAACC,QAAQ,CAAEH,EAAE,EAAI,IAAI,CAAC,CAChD,CAAC,CAED,cAAe,CAAAG,QAAQA,CAAA,CAAG,CACxB,GAAIpC,OAAO,CAAE,OACb,GAAI,CAACC,MAAM,CAAE,CACX;AACA+B,YAAY,CAAC,IAAI,CAAG7B,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CACzC,OACF,CACA,GAAIiC,QAAQ,CAACC,MAAM,CAAE,CACnB;AACAN,YAAY,CAAC,KAAK,CAAG7B,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CAC1C,OACF,CAEA,KAAM,CAAAmC,YAAY,CAAGjD,OAAO,CAAG,IAAI,CAAG,KAAK,CAAE;AAC7C,GAAI,CAAAkD,WAAW,CAAGD,YAAY,CAAGpC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,IAAI,CAErD,GAAI,CACF;AACA,KAAM,CAAAqC,QAAQ,CAAG7E,YAAY,CAACC,OAAO,CAAC+C,aAAa,CAAC,EAAI8B,SAAS,CACjE,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAA7H,GAAG,CAAC2E,GAAG,CAAC,WAAW,CAAE,CACzCC,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAClB6G,OAAO,CAAEH,QAAQ,CAAG,CAAE,eAAe,CAAEA,QAAS,CAAC,CAAG,CAAC,CAAC,CACtDI,cAAc,CAAGC,CAAC,EAAKA,CAAC,GAAK,GAAG,EAAIA,CAAC,GAAK,GAAG,EAAKA,CAAC,EAAI,GAAG,EAAIA,CAAC,CAAG,GACpE,CAAC,CAAC,CACF,GAAIH,OAAO,CAACI,MAAM,GAAK,GAAG,CAAE,CAC1B,GAAIzD,OAAO,EAAI,CAACtD,IAAI,CAAE,CACpBC,OAAO,CAAC0G,OAAO,CAAChD,IAAI,CAAC,CACrB,GAAI,CAACnD,YAAY,CAAE,CACjBG,aAAa,CAACgG,OAAO,CAAChD,IAAI,CAACC,SAAS,CAAC,CACrC/C,aAAa,CAAC8F,OAAO,CAAChD,IAAI,CAACE,SAAS,CAAC,CACvC,CACF,CACA,KAAM,CAAAmD,OAAO,CAAIL,OAAO,CAACC,OAAO,GAAKD,OAAO,CAACC,OAAO,CAACK,IAAI,EAAIN,OAAO,CAACC,OAAO,CAACM,IAAI,CAAC,EAAKR,SAAS,CAChG,GAAIM,OAAO,CAAEpF,YAAY,CAACsD,OAAO,CAACN,aAAa,CAAEoC,OAAO,CAAC,CAC3D,CAEA;AACA,KAAM,CAAAG,WAAW,CAAGvF,YAAY,CAACC,OAAO,CAACgD,gBAAgB,CAAC,EAAI6B,SAAS,CACvE,KAAM,CAAAU,UAAU,CAAG,KAAM,CAAAtI,GAAG,CAAC2E,GAAG,CAAC,cAAc,CAAE,CAC/CmD,OAAO,CAAEO,WAAW,CAAG,CAAE,eAAe,CAAEA,WAAY,CAAC,CAAG,CAAC,CAAC,CAC5DN,cAAc,CAAGC,CAAC,EAAKA,CAAC,GAAK,GAAG,EAAIA,CAAC,GAAK,GAAG,EAAKA,CAAC,EAAI,GAAG,EAAIA,CAAC,CAAG,GACpE,CAAC,CAAC,CACF,GAAIM,UAAU,CAACL,MAAM,GAAK,GAAG,CAAE,CAC7B1G,UAAU,CAAC+G,UAAU,CAACzD,IAAI,CAAC,CAC3B,KAAM,CAAAqD,OAAO,CAAII,UAAU,CAACR,OAAO,GAAKQ,UAAU,CAACR,OAAO,CAACK,IAAI,EAAIG,UAAU,CAACR,OAAO,CAACM,IAAI,CAAC,EAAKR,SAAS,CACzG,GAAIM,OAAO,CAAEpF,YAAY,CAACsD,OAAO,CAACL,gBAAgB,CAAEmC,OAAO,CAAC,CAC9D,CAEA;AACAlC,YAAY,CAAC,CACX9E,IAAI,CAAG2G,OAAO,EAAIA,OAAO,CAACI,MAAM,GAAK,GAAG,CAAIJ,OAAO,CAAChD,IAAI,CAAG+C,SAAS,CACpEtG,OAAO,CAAGgH,UAAU,EAAIA,UAAU,CAACL,MAAM,GAAK,GAAG,CAAIK,UAAU,CAACzD,IAAI,CAAG+C,SACzE,CAAC,CAAC,CAEF;AACAjC,KAAK,CAAG,CAAC,CACX,CAAE,MAAOX,GAAG,CAAE,CACZ;AACAW,KAAK,EAAE,CACP+B,WAAW,CAAGrC,IAAI,CAACkD,GAAG,CAAC,KAAK,CAAG,CAAC,EAAI5C,KAAK,CAAI,IAAI,CAAGN,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CAC3E,CAAC,OAAS,CACR4B,YAAY,CAACQ,WAAW,CAAC,CAC3B,CACF,CAEA;AACA,KAAM,CAAAc,KAAK,CAAGA,CAAA,GAAM,CAClB,GAAI,CAACjB,QAAQ,CAACC,MAAM,EAAIrC,MAAM,CAAE,CAC9BmC,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CACDC,QAAQ,CAACkB,gBAAgB,CAAC,kBAAkB,CAAED,KAAK,CAAC,CAEpD;AACA,KAAM,CAAAE,SAAS,CAAI/B,EAAE,EAAK,CACxB,GAAIA,EAAE,CAACgC,GAAG,GAAK,qBAAqB,EAAIhC,EAAE,CAACiC,QAAQ,CAAE,CACnD,GAAI,CACF,KAAM,CAAAC,MAAM,CAAGxC,IAAI,CAACY,KAAK,CAACN,EAAE,CAACiC,QAAQ,CAAC,CACtC,KAAM,CAAAhC,CAAC,CAAGiC,MAAM,CAAC5C,OAAO,EAAI,CAAC,CAAC,CAC9B,GAAIW,CAAC,CAAC1F,IAAI,CAAEC,OAAO,CAACyF,CAAC,CAAC1F,IAAI,CAAC,CAC3B,GAAI0F,CAAC,CAACtF,OAAO,CAAEC,UAAU,CAACqF,CAAC,CAACtF,OAAO,CAAC,CACtC,CAAE,MAAO0D,GAAG,CAAE,CACZ;AAAA,CAEJ,CAAC,IAAM,IAAI2B,EAAE,CAACgC,GAAG,GAAK,oBAAoB,EAAIhC,EAAE,CAACiC,QAAQ,CAAE,CACzD,GAAI,CACF,KAAM,CAAA5B,EAAE,CAAGX,IAAI,CAACY,KAAK,CAACN,EAAE,CAACiC,QAAQ,CAAC,CAClC,GAAI5B,EAAE,CAACxG,EAAE,GAAK4E,IAAI,CAAE,CAClBD,MAAM,CAAG,KAAK,CAChB,CACF,CAAE,MAAOH,GAAG,CAAE,CACZ;AAAA,CAEJ,CACF,CAAC,CACD8D,MAAM,CAACL,gBAAgB,CAAC,SAAS,CAAEC,SAAS,CAAC,CAE7C;AACA,GAAI9C,EAAE,CAAEA,EAAE,CAACiB,SAAS,CAAGH,WAAW,CAElC;AACAY,QAAQ,CAAC,CAAC,CAEV,MAAO,IAAM,CACXpC,OAAO,CAAG,IAAI,CACdC,MAAM,CAAG,KAAK,CACd,GAAIM,iBAAiB,CAAE/E,aAAa,CAAC+E,iBAAiB,CAAC,CACvD,GAAIC,WAAW,CAAE0B,YAAY,CAAC1B,WAAW,CAAC,CAC1C6B,QAAQ,CAACwB,mBAAmB,CAAC,kBAAkB,CAAEP,KAAK,CAAC,CACvDM,MAAM,CAACC,mBAAmB,CAAC,SAAS,CAAEL,SAAS,CAAC,CAChD,GAAI9C,EAAE,CAAE,CACN,GAAI,CAAEA,EAAE,CAACoD,KAAK,CAAC,CAAC,CAAE,CAAE,MAAOhE,GAAG,CAAE,CAAE,aACpC,CACF,CAAC,CACH,CAAC,CAAE,CAACR,OAAO,CAAEvD,MAAM,CAAES,YAAY,CAAC,CAAC,CAEnCrC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4J,MAAM,CAAG,GAAI,CAAAC,WAAW,CAAC,0DAA0D,CAAC,CAC1FD,MAAM,CAACR,gBAAgB,CAAC,SAAS,CAAGU,CAAC,EAAK,CACxC,GAAI,CACF,KAAM,CAAAtE,IAAI,CAAGwB,IAAI,CAACY,KAAK,CAACkC,CAAC,CAACtE,IAAI,CAAC,CAC/BtD,UAAU,CAACsD,IAAI,CAAC,CAClB,CAAE,MAAOG,GAAG,CAAE,CACZ;AAAA,CAEJ,CAAC,CAAC,CACFiE,MAAM,CAACG,OAAO,CAAG,IAAM,CACrBH,MAAM,CAACD,KAAK,CAAC,CAAC,CAChB,CAAC,CACD,MAAO,IAAM,CACXC,MAAM,CAACD,KAAK,CAAC,CAAC,CAChB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN7I,WAAW,CAAC,IAAM,CAChBgC,eAAe,CAAEkH,IAAI,EAAK,CACxB,GAAI,CAACjH,YAAY,CAAE,CACjB,MAAO,CAAAiH,IAAI,CACb,CACA,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAAG,CAAC,CACrB,GAAIC,IAAI,EAAI,CAAC,CAAE,CACb,GAAIlH,YAAY,CAAE,CAChBC,eAAe,CAAC,KAAK,CAAC,CACxB,CACA,GAAIiC,WAAW,CAAC/D,OAAO,CAAE,CACvB+D,WAAW,CAAC/D,OAAO,CAACgJ,WAAW,CAAG,CAAC,CACnCjF,WAAW,CAAC/D,OAAO,CAACiJ,IAAI,CAAC,CAAC,CAC5B,CACA,MAAO,EAAC,CACV,CACA,MAAO,CAAAF,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAAElH,YAAY,CAAG,IAAI,CAAG,IAAI,CAAC,CAE9B/C,SAAS,CAAC,IAAM,CACd,GAAIiC,OAAO,EAAIA,OAAO,CAACmI,KAAK,CAAE,CAC5B,KAAM,CAAAC,SAAS,CAAGpI,OAAO,CAACmI,KAAK,CAACE,MAAM,CAAEC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,CAAC,CAC5D,GAAI,CAACrH,WAAW,EAAIkH,SAAS,CAAC,CAAC,CAAC,CAAE,CAChCjH,cAAc,CAACiH,SAAS,CAAC,CAAC,CAAC,CAAClJ,EAAE,CAAC,CACjC,CACA,GAAI,CAACkC,WAAW,EAAIgH,SAAS,CAAC,CAAC,CAAC,CAAE,CAChC/G,cAAc,CAAC+G,SAAS,CAAC,CAAC,CAAC,CAAClJ,EAAE,CAAC,CACjC,CACF,CACF,CAAC,CAAE,CAACc,OAAO,CAAEkB,WAAW,CAAEE,WAAW,CAAC,CAAC,CAEvC,KAAM,CAAAoH,kBAAkB,CAAIC,IAAI,EAAK,CACnC9H,YAAY,CAAC8H,IAAI,CAAC,CAClB5H,eAAe,CAAC4H,IAAI,GAAK,OAAO,CAAG,EAAE,CAAG,CAAC,CAAC,CAC1C1H,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAA2H,UAAU,CAAGA,CAAA,GAAM,CACvB3H,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,CAED,KAAM,CAAA4H,UAAU,CAAGA,CAAA,GAAM,CACvB5H,eAAe,CAAC,KAAK,CAAC,CACtBF,eAAe,CAACH,SAAS,GAAK,OAAO,CAAG,EAAE,CAAG,CAAC,CAAC,CACjD,CAAC,CAED,KAAM,CAAAkI,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,KAAK,CAAGnI,SAAS,GAAK,OAAO,CAAG,EAAE,CAAG,CAAC,CAC5C,MAAO,CAAAqD,IAAI,CAAC+E,GAAG,CAAC,CAAC,CAAE/E,IAAI,CAACkD,GAAG,CAAC,CAAC,CAAErG,YAAY,CAAGiI,KAAK,CAAC,CAAC,CACvD,CAAC,CAED,KAAM,CAAAE,WAAW,CAAG,KAAO,CAAAC,IAAI,EAAK,CAClC,GAAI9F,OAAO,CAAE,CACX,KAAM,CAAAxE,GAAG,CAACuK,IAAI,CAAC,wBAAwB,CAAE,CAAED,IAAK,CAAC,CAAE,CAAE1F,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACnG,GAAIH,UAAU,CAAC7D,OAAO,CAAE,CACtB6D,UAAU,CAAC7D,OAAO,CAACgJ,WAAW,CAAG,CAAC,CAClCnF,UAAU,CAAC7D,OAAO,CAACiJ,IAAI,CAAC,CAAC,CAC3B,CACA/E,SAAS,CAAC,CAAC,CACX,OACF,CACAtD,OAAO,CAAEqJ,CAAC,EAAK,CACb,KAAM,CAAAC,IAAI,CAAGD,CAAC,EAAI,CAChB1F,SAAS,CAAElD,UAAU,EAAI,QAAQ,CACjCmD,SAAS,CAAEjD,UAAU,EAAI,QAAQ,CACjC4I,UAAU,CAAE,CAAC,CACbC,UAAU,CAAE,CAAC,CACbC,cAAc,CAAE,CAAC,CACjBC,gBAAgB,CAAE,IAAI,CACtBC,OAAO,CAAE,EACX,CAAC,CACD,KAAM,CAAAxB,IAAI,CAAAyB,aAAA,CAAAA,aAAA,IAAQN,IAAI,MAAEK,OAAO,CAAE,CAAC,IAAIL,IAAI,CAACK,OAAO,EAAI,EAAE,CAAC,CAAC,EAAE,CAC5D,GAAIR,IAAI,GAAK,GAAG,CAAE,CAChBhB,IAAI,CAACoB,UAAU,CAAG,CAACpB,IAAI,CAACoB,UAAU,EAAI,CAAC,EAAI,EAAE,CAC7CpB,IAAI,CAACuB,gBAAgB,CAAG,GAAG,CAC3BvB,IAAI,CAACwB,OAAO,CAACE,IAAI,CAAC,CAChB7E,IAAI,CAAE,QAAQ,CACd8E,WAAW,sBAAAC,MAAA,CAAkB5B,IAAI,CAACxE,SAAS,EAAI,QAAQ,CAAE,CACzDqG,SAAS,CAAE3E,IAAI,CAACC,GAAG,CAAC,CAAC,CACrB6D,IAAI,CAAE,GAAG,CACTc,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CAAC,IAAM,IAAId,IAAI,GAAK,GAAG,CAAE,CACvBhB,IAAI,CAACqB,UAAU,CAAG,CAACrB,IAAI,CAACqB,UAAU,EAAI,CAAC,EAAI,EAAE,CAC7CrB,IAAI,CAACuB,gBAAgB,CAAG,GAAG,CAC3BvB,IAAI,CAACwB,OAAO,CAACE,IAAI,CAAC,CAChB7E,IAAI,CAAE,QAAQ,CACd8E,WAAW,sBAAAC,MAAA,CAAkB5B,IAAI,CAACvE,SAAS,EAAI,QAAQ,CAAE,CACzDoG,SAAS,CAAE3E,IAAI,CAACC,GAAG,CAAC,CAAC,CACrB6D,IAAI,CAAE,GAAG,CACTc,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CACA,MAAO,CAAA9B,IAAI,CACb,CAAC,CAAC,CACF,GAAIlF,UAAU,CAAC7D,OAAO,CAAE,CACtB6D,UAAU,CAAC7D,OAAO,CAACgJ,WAAW,CAAG,CAAC,CAClCnF,UAAU,CAAC7D,OAAO,CAACiJ,IAAI,CAAC,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAA6B,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI7G,OAAO,CAAE,CACX,KAAM,CAAAxE,GAAG,CAACuK,IAAI,CAAC,uBAAuB,CAAE,CAAEa,MAAM,CAAE,EAAG,CAAC,CAAE,CAAExG,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACxG,GAAIF,QAAQ,CAAC9D,OAAO,CAAE,CACpB8D,QAAQ,CAAC9D,OAAO,CAACgJ,WAAW,CAAG,CAAC,CAChClF,QAAQ,CAAC9D,OAAO,CAACiJ,IAAI,CAAC,CAAC,CACzB,CACA/E,SAAS,CAAC,CAAC,CACX,OACF,CACAtD,OAAO,CAAEqJ,CAAC,EAAK,CACb,GAAI,CAACA,CAAC,EAAI,CAACA,CAAC,CAACK,gBAAgB,CAAE,MAAO,CAAAL,CAAC,CACvC,KAAM,CAAAlB,IAAI,CAAAyB,aAAA,CAAAA,aAAA,IAAQP,CAAC,MAAEM,OAAO,CAAE,CAAC,IAAIN,CAAC,CAACM,OAAO,EAAI,EAAE,CAAC,CAAC,EAAE,CACtD,GAAIN,CAAC,CAACK,gBAAgB,GAAK,GAAG,CAAE,CAC9BvB,IAAI,CAACoB,UAAU,CAAG,CAACpB,IAAI,CAACoB,UAAU,EAAI,CAAC,EAAI,EAAE,CAC7CpB,IAAI,CAACwB,OAAO,CAACE,IAAI,CAAC,CAChB7E,IAAI,CAAE,OAAO,CACb8E,WAAW,qBAAAC,MAAA,CAAiB5B,IAAI,CAACxE,SAAS,EAAI,QAAQ,CAAE,CACxDqG,SAAS,CAAE3E,IAAI,CAACC,GAAG,CAAC,CAAC,CACrB6D,IAAI,CAAE,GAAG,CACTc,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIZ,CAAC,CAACK,gBAAgB,GAAK,GAAG,CAAE,CACrCvB,IAAI,CAACqB,UAAU,CAAG,CAACrB,IAAI,CAACqB,UAAU,EAAI,CAAC,EAAI,EAAE,CAC7CrB,IAAI,CAACwB,OAAO,CAACE,IAAI,CAAC,CAChB7E,IAAI,CAAE,OAAO,CACb8E,WAAW,qBAAAC,MAAA,CAAiB5B,IAAI,CAACvE,SAAS,EAAI,QAAQ,CAAE,CACxDoG,SAAS,CAAE3E,IAAI,CAACC,GAAG,CAAC,CAAC,CACrB6D,IAAI,CAAE,GAAG,CACTc,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CACA,MAAO,CAAA9B,IAAI,CACb,CAAC,CAAC,CACF,GAAIjF,QAAQ,CAAC9D,OAAO,CAAE,CACpB8D,QAAQ,CAAC9D,OAAO,CAACgJ,WAAW,CAAG,CAAC,CAChClF,QAAQ,CAAC9D,OAAO,CAACiJ,IAAI,CAAC,CAAC,CACzB,CACF,CAAC,CAED,KAAM,CAAA8B,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CAAC9G,OAAO,CAAE,CACZrD,OAAO,CAAEqJ,CAAC,EACRA,CAAC,CAAAO,aAAA,CAAAA,aAAA,IACQP,CAAC,MAAEI,cAAc,CAAE,CAACJ,CAAC,CAACI,cAAc,EAAI,CAAC,EAAI,CAAC,CAAEC,gBAAgB,CAAE,IAAI,GAC3EL,CACN,CAAC,CACDvI,YAAY,CAAC,QAAQ,CAAC,CACtBE,eAAe,CAAC,CAAC,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACtB,OACF,CACA,KAAM,CAAArC,GAAG,CAACuK,IAAI,CAAC,uBAAuB,CAAE,IAAI,CAAE,CAAE3F,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CAC9FtC,YAAY,CAAC,QAAQ,CAAC,CACtBE,eAAe,CAAC,CAAC,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACtBoC,SAAS,CAAC,CAAC,CACb,CAAC,CAED,KAAM,CAAA8G,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,GAAI,CAAC/G,OAAO,CAAE,CACZrD,OAAO,CAAC,CACN2D,SAAS,CAAE,QAAQ,CACnBC,SAAS,CAAE,QAAQ,CACnB2F,UAAU,CAAE,CAAC,CACbC,UAAU,CAAE,CAAC,CACbC,cAAc,CAAE,CAAC,CACjBC,gBAAgB,CAAE,IAAI,CACtBC,OAAO,CAAE,EACX,CAAC,CAAC,CACF7I,YAAY,CAAC,QAAQ,CAAC,CACtBE,eAAe,CAAC,CAAC,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACtB4B,YAAY,CAAC,EAAE,CAAC,CAChB,OACF,CACA,KAAM,CAAAjE,GAAG,CAACuK,IAAI,CAAC,iBAAiB,CAAE,IAAI,CAAE,CAAE3F,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACxF,KAAM,CAAAvE,GAAG,CAACuK,IAAI,CAAC,oBAAoB,CAAE,IAAI,CAAE,CAAEzC,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACvEtC,YAAY,CAAC,QAAQ,CAAC,CACtBE,eAAe,CAAC,CAAC,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACtBI,cAAc,CAAC,EAAE,CAAC,CAClBE,cAAc,CAAC,EAAE,CAAC,CAClBwB,eAAe,CAAC,EAAE,CAAC,CACnB5B,mBAAmB,CAAC,EAAE,CAAC,CACvB0B,YAAY,CAAC,EAAE,CAAC,CAChBQ,SAAS,CAAC,CAAC,CACXQ,YAAY,CAAC,CAAC,CAChB,CAAE,MAAOD,GAAG,CAAE,KAAAwG,aAAA,CAAAC,kBAAA,CACZ,KAAM,CAAAC,OAAO,CAAG,CAAA1G,GAAG,SAAHA,GAAG,kBAAAwG,aAAA,CAAHxG,GAAG,CAAE2G,QAAQ,UAAAH,aAAA,kBAAAC,kBAAA,CAAbD,aAAA,CAAe3G,IAAI,UAAA4G,kBAAA,iBAAnBA,kBAAA,CAAqBC,OAAO,GAAI,oDAAoD,CACpGzH,YAAY,CAACyH,OAAO,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAE,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CAACpH,OAAO,CAAE,CACZ;AACArD,OAAO,CAAEqJ,CAAC,EAAAO,aAAA,CAAAA,aAAA,IACJP,CAAC,EAAI,CAAC,CAAC,MACX1F,SAAS,CAAElD,UAAU,CACrBmD,SAAS,CAAEjD,UAAU,EACrB,CAAC,CACHH,eAAe,CAAC,KAAK,CAAC,CACtB,OACF,CACA,KAAM,CAAA3B,GAAG,CAACuK,IAAI,CAAC,sBAAsB,CAAE,CACrCzF,SAAS,CAAElD,UAAU,CACrBmD,SAAS,CAAEjD,UACb,CAAC,CAAE,CAAE8C,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACnD5C,eAAe,CAAC,KAAK,CAAC,CACtB8C,SAAS,CAAC,CAAC,CACb,CAAC,CAED,KAAM,CAAAoH,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,KAAK,CAAGxJ,gBAAgB,CAC3ByJ,KAAK,CAAC,IAAI,CAAC,CACXC,GAAG,CAAEC,CAAC,EAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CACpBvC,MAAM,CAAEsC,CAAC,EAAKA,CAAC,CAACE,MAAM,CAAG,CAAC,CAAC,CAC9B,KAAM,CAAAnM,GAAG,CAACuK,IAAI,CAAC,mBAAmB,CAAE,CAAE6B,SAAS,CAAEN,KAAM,CAAC,CAAE,CAAEhE,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACtFU,YAAY,CAAC,CAAC,CAChB,CAAC,CAED,KAAM,CAAAoH,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAArM,GAAG,CAACuK,IAAI,CAAC,oBAAoB,CAAE,IAAI,CAAE,CAAEzC,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACvE9B,cAAc,CAAC,EAAE,CAAC,CAClBE,cAAc,CAAC,EAAE,CAAC,CAClBsC,YAAY,CAAC,CAAC,CAChB,CAAC,CAED,KAAM,CAAAqH,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAAC9J,WAAW,EAAI,CAACE,WAAW,CAAE,OAClC,KAAM,CAAA1C,GAAG,CAACuK,IAAI,CACZ,0BAA0B,CAC1B,CACEgC,OAAO,CAAE/J,WAAW,CACpBgK,OAAO,CAAE9J,WACX,CAAC,CACD,CAAEkC,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAChD,CAAC,CACD,KAAM,CAAAU,YAAY,CAAC,CAAC,CACpB,KAAM,CAAAR,SAAS,CAAC,CAAC,CACnB,CAAC,CAED,KAAM,CAAAgI,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,KAAM,CAAAzM,GAAG,CAACuK,IAAI,CAAC,+BAA+B,CAAE,IAAI,CAAE,CAAE3F,MAAM,CAAE,CAAE3D,MAAO,CAAC,CAAE6G,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAAC,CAAC,CACtG,KAAM,CAAAU,YAAY,CAAC,CAAC,CACtB,CAAC,CAED,KAAM,CAAAyH,WAAW,CAAGtN,WAAW,CAC5BoB,EAAE,EAAK,CACN,GAAI,CAACc,OAAO,EAAI,CAACA,OAAO,CAACmI,KAAK,CAAE,MAAO,EAAE,CACzC,KAAM,CAAAa,IAAI,CAAGhJ,OAAO,CAACmI,KAAK,CAACkD,IAAI,CAAE/C,CAAC,EAAKA,CAAC,CAACpJ,EAAE,GAAKA,EAAE,CAAC,CACnD,MAAO,CAAA8J,IAAI,CAAGA,IAAI,CAACsC,IAAI,CAAG,EAAE,CAC9B,CAAC,CACD,CAACtL,OAAO,CACV,CAAC,CAED,KAAM,CAAAwJ,OAAO,CAAGxL,OAAO,CAAC,IAAM,CAC5B,KAAM,CAAAuN,KAAK,CAAG,CAAA3L,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4J,OAAO,GAAI,EAAE,CACjC,MAAO,CAAC,GAAG+B,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,CAC7B,CAAC,CAAE,CAAC5L,IAAI,CAAC,CAAC,CAEV,KAAM,CAAA6L,UAAU,CAAIC,WAAW,EAAK,CAClC,GAAI,CAAC1L,OAAO,CAAE,MAAO,KAAI,CACzB,KAAM,CAAA2L,OAAO,CAAG,CAAC3L,OAAO,CAAC2L,OAAO,EAAI,EAAE,EAAEtD,MAAM,CAAEuD,CAAC,EAAKA,CAAC,CAAC5L,OAAO,GAAK0L,WAAW,CAAC,CAChF,KAAM,CAAAG,OAAO,CAAG,CAAC,CAAC,CAClBF,OAAO,CAACG,OAAO,CAAEF,CAAC,EAAK,CACrB,GAAI,CAACC,OAAO,CAACD,CAAC,CAACG,KAAK,CAAC,CAAEF,OAAO,CAACD,CAAC,CAACG,KAAK,CAAC,CAAG,EAAE,CAC5CF,OAAO,CAACD,CAAC,CAACG,KAAK,CAAC,CAACrC,IAAI,CAACkC,CAAC,CAAC,CAC1B,CAAC,CAAC,CACF,KAAM,CAAAI,MAAM,CAAGC,MAAM,CAACC,IAAI,CAACL,OAAO,CAAC,CAChCnB,GAAG,CAAEC,CAAC,EAAKwB,QAAQ,CAACxB,CAAC,CAAE,EAAE,CAAC,CAAC,CAC3ByB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAAGC,CAAC,CAAC,CAExB,mBACE/N,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BR,MAAM,CAACtB,GAAG,CAAEqB,KAAK,eAChB1N,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnO,KAAA,QAAKkO,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAAC,QAAM,CAACT,KAAK,EAAM,CAAC,CACrDF,OAAO,CAACE,KAAK,CAAC,CAACrB,GAAG,CAAEkB,CAAC,eACpBvN,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjO,IAAA,SAAAiO,QAAA,CAAOpB,WAAW,CAACQ,CAAC,CAACX,OAAO,CAAC,CAAO,CAAC,cACrC1M,IAAA,SAAMgO,SAAS,CAAC,YAAY,CAAAC,QAAA,CACzBZ,CAAC,CAACa,MAAM,GAAK,IAAI,EAAIb,CAAC,CAACa,MAAM,GAAKnG,SAAS,CAAGsF,CAAC,CAACa,MAAM,CAAG,GAAG,CACzD,CAAC,EACJ,CAAC,cACNpO,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjO,IAAA,SAAAiO,QAAA,CAAOpB,WAAW,CAACQ,CAAC,CAACV,OAAO,CAAC,CAAO,CAAC,cACrC3M,IAAA,SAAMgO,SAAS,CAAC,YAAY,CAAAC,QAAA,CACzBZ,CAAC,CAACc,MAAM,GAAK,IAAI,EAAId,CAAC,CAACc,MAAM,GAAKpG,SAAS,CAAGsF,CAAC,CAACc,MAAM,CAAG,GAAG,CACzD,CAAC,EACJ,CAAC,CACLd,CAAC,CAACe,QAAQ,eACTtO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,UACnB,cAAAjO,IAAA,WAAAiO,QAAA,CAASpB,WAAW,CAACQ,CAAC,CAACe,QAAQ,CAAC,CAAS,CAAC,EAC/C,CACN,GAjB8Bf,CAAC,CAAC1M,EAkB9B,CACN,CAAC,MAAA0K,MAAA,CAtBiC8B,WAAW,MAAA9B,MAAA,CAAImC,KAAK,CAuBpD,CACN,CAAC,CACC,CAAC,CAEV,CAAC,CAED,KAAM,CAAAa,WAAW,CAAG,CAAC,CAAA5M,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EAAEE,MAAM,CAC9CC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,EAAID,CAAC,CAACuE,MAAM,GAAK,CACvC,CAAC,CACD,KAAM,CAAAC,UAAU,CAAG,CAAC,CAAA9M,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EAAEE,MAAM,CAC7CC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,EAAID,CAAC,CAACuE,MAAM,GAAK,CACvC,CAAC,CACD,KAAM,CAAAE,cAAc,CAAG,CAAC,CAAA/M,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EAAEE,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAACC,UAAU,CAAC,CAEzE,KAAM,CAAAyE,UAAU,CAAGtM,SAAS,GAAK,OAAO,CAAG,EAAE,CAAG,CAAC,CACjD,KAAM,CAAAuM,MAAM,CAAG,EAAE,CACjB,KAAM,CAAAC,aAAa,CAAG,CAAC,CAAGnJ,IAAI,CAACoJ,EAAE,CAAGF,MAAM,CAC1C,KAAM,CAAAG,QAAQ,CAAGxE,aAAa,CAAC,CAAC,CAChC,KAAM,CAAAyE,MAAM,CAAGH,aAAa,EAAI,CAAC,CAAGE,QAAQ,CAAC,CAC7C,KAAM,CAAAE,MAAM,CACVF,QAAQ,CAAG,GAAG,CAAG,SAAS,CAAGA,QAAQ,CAAG,IAAI,CAAG,SAAS,CAAG,SAAS,CAEtE,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAnK,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAACuK,IAAI,CAAC,iBAAiB,CAAE,CAC5CuE,QAAQ,CAAEtL,aAAa,CACvBuL,QAAQ,CAAErL,aACZ,CAAC,CAAC,CACFb,YAAY,CAAC6B,GAAG,CAACG,IAAI,CAACmK,KAAK,CAAC,CAC5B/L,WAAW,CAACyB,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC1B9L,eAAe,CAACuB,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CAClChM,YAAY,CAACsD,OAAO,CAAC,WAAW,CAAE1B,GAAG,CAACG,IAAI,CAACmK,KAAK,CAAC,CACjDlM,YAAY,CAACsD,OAAO,CAAC,UAAU,CAAE1B,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC/CnM,YAAY,CAACsD,OAAO,CAAC,cAAc,CAAE1B,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CACvD7K,YAAY,CAAC,EAAE,CAAC,CAClB,CAAE,MAAOe,GAAG,CAAE,KAAAkK,cAAA,CAAAC,mBAAA,CACZ,KAAM,CAAAzD,OAAO,CAAG,CAAA1G,GAAG,SAAHA,GAAG,kBAAAkK,cAAA,CAAHlK,GAAG,CAAE2G,QAAQ,UAAAuD,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAerK,IAAI,UAAAsK,mBAAA,iBAAnBA,mBAAA,CAAqBzD,OAAO,GAAI,8BAA8B,CAC9EzH,YAAY,CAACyH,OAAO,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAA0D,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAA1K,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAACuK,IAAI,CAAC,oBAAoB,CAAE,CAC/CuE,QAAQ,CAAElL,gBAAgB,CAC1BmL,QAAQ,CAAEjL,gBACZ,CAAC,CAAC,CACFjB,YAAY,CAAC6B,GAAG,CAACG,IAAI,CAACmK,KAAK,CAAC,CAC5B/L,WAAW,CAACyB,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC1B9L,eAAe,CAACuB,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CAClChM,YAAY,CAACsD,OAAO,CAAC,WAAW,CAAE1B,GAAG,CAACG,IAAI,CAACmK,KAAK,CAAC,CACjDlM,YAAY,CAACsD,OAAO,CAAC,UAAU,CAAE1B,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC/CnM,YAAY,CAACsD,OAAO,CAAC,cAAc,CAAE1B,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CACvDvL,WAAW,CAAC,OAAO,CAAC,CACpBU,YAAY,CAAC,EAAE,CAAC,CAClB,CAAE,MAAOe,GAAG,CAAE,KAAAqK,cAAA,CAAAC,mBAAA,CACZ,KAAM,CAAA5D,OAAO,CAAG,CAAA1G,GAAG,SAAHA,GAAG,kBAAAqK,cAAA,CAAHrK,GAAG,CAAE2G,QAAQ,UAAA0D,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAexK,IAAI,UAAAyK,mBAAA,iBAAnBA,mBAAA,CAAqB5D,OAAO,GAAI,qBAAqB,CACrEzH,YAAY,CAACyH,OAAO,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAA6D,mBAAmB,CAAG,KAAAA,CAAOC,WAAW,CAAEC,WAAW,GAAK,CAC9D,GAAI,CACF,KAAM,CAAA/K,GAAG,CAAG,KAAM,CAAA1E,GAAG,CAACuK,IAAI,CACxB,0BAA0B,CAC1B,CAAEiF,WAAW,CAAEC,WAAY,CAAC,CAC5B,CAAE3H,OAAO,CAAEvD,YAAY,CAAC,CAAE,CAC5B,CAAC,CACDpB,eAAe,CAACuB,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CAClC7L,WAAW,CAACyB,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC1BnM,YAAY,CAACsD,OAAO,CAAC,cAAc,CAAE1B,GAAG,CAACG,IAAI,CAACiK,QAAQ,CAAC,CACvDhM,YAAY,CAACsD,OAAO,CAAC,UAAU,CAAE1B,GAAG,CAACG,IAAI,CAACoK,IAAI,CAAC,CAC/ChL,YAAY,CAAC,iBAAiB,CAAC,CACjC,CAAE,MAAOe,GAAG,CAAE,KAAA0K,cAAA,CAAAC,mBAAA,CACZ,KAAM,CAAAjE,OAAO,CAAG,CAAA1G,GAAG,SAAHA,GAAG,kBAAA0K,cAAA,CAAH1K,GAAG,CAAE2G,QAAQ,UAAA+D,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAe7K,IAAI,UAAA8K,mBAAA,iBAAnBA,mBAAA,CAAqBjE,OAAO,GAAI,eAAe,CAC/DzH,YAAY,CAACyH,OAAO,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAkE,YAAY,CAAGA,CAAA,GAAM,CACzB/M,YAAY,CAAC,EAAE,CAAC,CAChBI,WAAW,CAAC,EAAE,CAAC,CACfE,eAAe,CAAC,EAAE,CAAC,CACnBL,YAAY,CAAC+M,UAAU,CAAC,WAAW,CAAC,CACpC/M,YAAY,CAAC+M,UAAU,CAAC,UAAU,CAAC,CACnC/M,YAAY,CAAC+M,UAAU,CAAC,cAAc,CAAC,CACzC,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAIC,MAAM,EAAK,CACnC,GAAI,CAACzO,OAAO,EAAI,CAACyO,MAAM,CAAE,MAAO,KAAI,CACpC,KAAM,CAAAC,OAAO,CAAG,CAAC1O,OAAO,CAAC2L,OAAO,EAAI,EAAE,EAAEN,IAAI,CACzCO,CAAC,EAAK,CAACA,CAAC,CAAC+C,SAAS,GAAK/C,CAAC,CAACX,OAAO,GAAKwD,MAAM,EAAI7C,CAAC,CAACV,OAAO,GAAKuD,MAAM,CACtE,CAAC,CACD,GAAIC,OAAO,CAAE,CACX,MAAO,CACL1O,OAAO,CAAE0O,OAAO,CAAC1O,OAAO,CACxB+L,KAAK,CAAE2C,OAAO,CAAC3C,KAAK,CACpB6C,QAAQ,CACNF,OAAO,CAACzD,OAAO,GAAKwD,MAAM,CAAGrD,WAAW,CAACsD,OAAO,CAACxD,OAAO,CAAC,CAAGE,WAAW,CAACsD,OAAO,CAACzD,OAAO,CAC3F,CAAC,CACH,CACA,KAAM,CAAA4D,YAAY,CAAG,CAAC7O,OAAO,CAAC8O,qBAAqB,EAAI,EAAE,EAAEzD,IAAI,CAC5D/F,CAAC,EAAKA,CAAC,CAAC2F,OAAO,GAAKwD,MAAM,EAAInJ,CAAC,CAAC4F,OAAO,GAAKuD,MAC/C,CAAC,CACD,GAAII,YAAY,CAAE,CAChB,KAAM,CAAAD,QAAQ,CACZC,YAAY,CAAC5D,OAAO,GAAKwD,MAAM,CAC3BrD,WAAW,CAACyD,YAAY,CAAC3D,OAAO,CAAC,CACjCE,WAAW,CAACyD,YAAY,CAAC5D,OAAO,CAAC,CACvC,MAAO,CAAEjL,OAAO,CAAE,SAAS,CAAE+L,KAAK,CAAE,KAAK,CAAE6C,QAAQ,CAAEjI,MAAM,CAAE,0BAA2B,CAAC,CAC3F,CACA,KAAM,CAAAoI,aAAa,CAAG,CAAC/O,OAAO,CAACgP,oBAAoB,EAAI,EAAE,EAAE3D,IAAI,CAC5D/F,CAAC,EAAKA,CAAC,CAAC2F,OAAO,GAAKwD,MAAM,EAAInJ,CAAC,CAAC4F,OAAO,GAAKuD,MAC/C,CAAC,CACD,GAAIM,aAAa,CAAE,CACjB,KAAM,CAAAH,QAAQ,CACZG,aAAa,CAAC9D,OAAO,GAAKwD,MAAM,CAC5BrD,WAAW,CAAC2D,aAAa,CAAC7D,OAAO,CAAC,CAClCE,WAAW,CAAC2D,aAAa,CAAC9D,OAAO,CAAC,CACxC,MAAO,CAAEjL,OAAO,CAAE,QAAQ,CAAE+L,KAAK,CAAE,KAAK,CAAE6C,QAAQ,CAAEjI,MAAM,CAAE,yBAA0B,CAAC,CACzF,CACA,KAAM,CAAAqC,IAAI,CAAG,CAAChJ,OAAO,CAACmI,KAAK,EAAI,EAAE,EAAEkD,IAAI,CAAE/C,CAAC,EAAKA,CAAC,CAACpJ,EAAE,GAAKuP,MAAM,CAAC,CAC/D,GAAIzF,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAET,UAAU,CAAE,CACpB,MAAO,CAAE5B,MAAM,CAAE,YAAa,CAAC,CACjC,CACA,GAAI3G,OAAO,CAACiP,QAAQ,CAAE,CACpB,MAAO,CAAEtI,MAAM,CAAE,kBAAmB,CAAC,CACvC,CACA,MAAO,CAAEA,MAAM,CAAE,wBAAyB,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAuI,eAAe,CAAGV,gBAAgB,CAAC5L,YAAY,CAAC,CAEtD,GAAI,CAACtB,SAAS,CAAE,CACd,mBACE/C,IAAA,QAAKgO,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBnO,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjO,IAAA,WACEgO,SAAS,QAAA3C,MAAA,CAAS5H,QAAQ,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,CAAG,CACzDmN,OAAO,CAAEA,CAAA,GAAMlN,WAAW,CAAC,OAAO,CAAE,CAAAuK,QAAA,CACrC,OAED,CAAQ,CAAC,cACTjO,IAAA,WACEgO,SAAS,QAAA3C,MAAA,CAAS5H,QAAQ,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAE,CAAG,CAC5DmN,OAAO,CAAEA,CAAA,GAAMlN,WAAW,CAAC,UAAU,CAAE,CAAAuK,QAAA,CACxC,UAED,CAAQ,CAAC,EACN,CAAC,CACLxK,QAAQ,GAAK,OAAO,cACnB3D,KAAA,CAAAI,SAAA,EAAA+N,QAAA,eACEjO,IAAA,OAAAiO,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBjO,IAAA,MAAGgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,gDAA8C,CAAG,CAAC,cACvEjO,IAAA,UACE6Q,KAAK,CAAElN,aAAc,CACrBmN,QAAQ,CAAGxH,CAAC,EAAK1F,gBAAgB,CAAC0F,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAClDG,WAAW,CAAC,UAAU,CACvB,CAAC,cACFhR,IAAA,UACEsG,IAAI,CAAC,UAAU,CACfuK,KAAK,CAAEhN,aAAc,CACrBiN,QAAQ,CAAGxH,CAAC,EAAKxF,gBAAgB,CAACwF,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAClDG,WAAW,CAAC,UAAU,CACvB,CAAC,cACFhR,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAE5B,WAAY,CAAAf,QAAA,CAAC,SAEtD,CAAQ,CAAC,EACT,CAAC,CACDxK,QAAQ,GAAK,UAAU,cACzB3D,KAAA,CAAAI,SAAA,EAAA+N,QAAA,eACEjO,IAAA,OAAAiO,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BjO,IAAA,UACE6Q,KAAK,CAAE9M,gBAAiB,CACxB+M,QAAQ,CAAGxH,CAAC,EAAKtF,mBAAmB,CAACsF,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CACrDG,WAAW,CAAC,iBAAiB,CAC9B,CAAC,cACFhR,IAAA,UACEsG,IAAI,CAAC,UAAU,CACfuK,KAAK,CAAE5M,gBAAiB,CACxB6M,QAAQ,CAAGxH,CAAC,EAAKpF,mBAAmB,CAACoF,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CACrDG,WAAW,CAAC,iBAAiB,CAC9B,CAAC,cACFhR,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAErB,cAAe,CAAAtB,QAAA,CAAC,qBAEzD,CAAQ,CAAC,EACT,CAAC,CACD,IAAI,CACP9J,SAAS,eAAInE,IAAA,QAAKgO,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAE9J,SAAS,CAAM,CAAC,EACxD,CAAC,CACH,CAAC,CAEV,CAEA,mBACErE,KAAA,QAAKkO,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBnO,KAAA,WAAQkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5BjO,IAAA,QAAKgO,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,kBAAgB,CAAK,CAAC,cAC5CnO,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnO,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjO,IAAA,QAAKgO,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE5K,YAAY,EAAI,MAAM,CAAM,CAAC,cACzDvD,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,GAAC,CAACtJ,OAAO,CAAG,eAAe,CAAG,QAAQ,CAAC,GAAC,EAAK,CAAC,cACzE3E,IAAA,WACEgO,SAAS,CAAC,qBAAqB,CAC/B4C,OAAO,CAAEA,CAAA,GAAMlB,mBAAmB,CAACuB,MAAM,CAAC,oCAAoC,CAAE,EAAE,CAAC,CAAEA,MAAM,CAAC,oCAAoC,CAAE,EAAE,CAAC,CAAE,CAAAhD,QAAA,CACxI,gBAED,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAEb,YAAa,CAAA9B,QAAA,CAAC,QAErD,CAAQ,CAAC,EACN,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjO,IAAA,WACEgO,SAAS,QAAA3C,MAAA,CAASnK,IAAI,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAE,CAAG,CACvD0P,OAAO,CAAEA,CAAA,GAAMzP,OAAO,CAAC,SAAS,CAAE,CAAA8M,QAAA,CACnC,SAED,CAAQ,CAAC,cACTjO,IAAA,WACEgO,SAAS,QAAA3C,MAAA,CAASnK,IAAI,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAE,CAAG,CACvD0P,OAAO,CAAEA,CAAA,GAAMzP,OAAO,CAAC,SAAS,CAAE,CAAA8M,QAAA,CACnC,SAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACA,CAAC,CAER/M,IAAI,GAAK,SAAS,eACjBpB,KAAA,CAAAI,SAAA,EAAA+N,QAAA,eACEnO,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnO,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjO,IAAA,OAAAiO,QAAA,CAAI,cAAgB,CAAI,CAAC,cACzBnO,KAAA,QAAKkO,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBjO,IAAA,WACEgO,SAAS,SAAA3C,MAAA,CAAUlJ,SAAS,GAAK,QAAQ,CAAG,QAAQ,CAAG,EAAE,CAAG,CAC5DyO,OAAO,CAAEA,CAAA,GAAM,CACbxO,YAAY,CAAC,QAAQ,CAAC,CACtBE,eAAe,CAAC,CAAC,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACxB,CAAE,CAAAyL,QAAA,CACH,aAED,CAAQ,CAAC,cACTjO,IAAA,WACEgO,SAAS,SAAA3C,MAAA,CAAUlJ,SAAS,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,CAAG,CAC3DyO,OAAO,CAAEA,CAAA,GAAM,CACbxO,YAAY,CAAC,OAAO,CAAC,CACrBE,eAAe,CAAC,EAAE,CAAC,CACnBE,eAAe,CAAC,KAAK,CAAC,CACxB,CAAE,CAAAyL,QAAA,CACH,aAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKoR,MAAM,CAAC,KAAK,CAACC,KAAK,CAAC,KAAK,CAAAlD,QAAA,eAC3BjO,IAAA,WACEoR,EAAE,CAAC,IAAI,CACPC,EAAE,CAAC,IAAI,CACPC,CAAC,CAAE5C,MAAO,CACVK,MAAM,CAAC,SAAS,CAChBwC,WAAW,CAAC,IAAI,CAChBC,IAAI,CAAC,MAAM,CACXxD,SAAS,CAAC,aAAa,CACxB,CAAC,cACFhO,IAAA,WACEoR,EAAE,CAAC,IAAI,CACPC,EAAE,CAAC,IAAI,CACPC,CAAC,CAAE5C,MAAO,CACVK,MAAM,CAAEA,MAAO,CACfwC,WAAW,CAAC,IAAI,CAChBC,IAAI,CAAC,MAAM,CACXC,eAAe,CAAE9C,aAAc,CAC/B+C,gBAAgB,CAAE5C,MAAO,CACzB6C,SAAS,CAAC,mBAAmB,CAC7BC,aAAa,CAAC,OAAO,CACrB5D,SAAS,CAAC,gBAAgB,CAC3B,CAAC,EACC,CAAC,cACNlO,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAE5L,YAAY,CAAC,GAAC,EAAK,CAAC,cAClDvC,KAAA,QAAKkO,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAC9B9L,SAAS,GAAK,OAAO,CAAG,OAAO,CAAG,QAAQ,CAAC,QAC9C,EAAK,CAAC,EACH,CAAC,EACH,CAAC,cACNrC,KAAA,QAAKkO,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjO,IAAA,WACEgO,SAAS,CAAC,aAAa,CACvB4C,OAAO,CAAEA,CAAA,GAAM3G,kBAAkB,CAAC9H,SAAS,CAAE,CAAA8L,QAAA,CAC9C,OAED,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAEzG,UAAW,CAAA8D,QAAA,CAAC,OAEnD,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAExG,UAAW,CAAA6D,QAAA,CAAC,OAEnD,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjO,IAAA,MAAGgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,2CAAyC,CAAG,CAAC,cAClEjO,IAAA,MAAGgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,+EAErB,CAAG,CAAC,cACJjO,IAAA,MAAGgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,0DAAwD,CAAG,CAAC,EAC9E,CAAC,EACH,CAAC,EACH,CAAC,cAENjO,IAAA,QAAKgO,SAAS,CAAC,sBAAsB,CAAAC,QAAA,cACnCnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjO,IAAA,SAAMgO,SAAS,CAAC,WAAW,CAAE,CAAC,CAC7BnM,YAAY,cACX7B,IAAA,UACE6Q,KAAK,CAAE9O,UAAW,CAClB+O,QAAQ,CAAGxH,CAAC,EAAKtH,aAAa,CAACsH,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAChD,CAAC,cAEF7Q,IAAA,SAAMgO,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE,CAAA5M,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,SAAS,GAAI,QAAQ,CAAO,CAChE,EACE,CAAC,cACNjF,IAAA,QAAKgO,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAAlN,gBAAA,CAAEM,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEwJ,UAAU,UAAA9J,gBAAA,UAAAA,gBAAA,CAAI,CAAC,CAAM,CAAC,EACtD,CAAC,cAENjB,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjO,IAAA,QAAKgO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,UAAQ,CAAK,CAAC,cAC9CnO,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAAC,GAAC,EAAAjN,oBAAA,CAACK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0J,cAAc,UAAA/J,oBAAA,UAAAA,oBAAA,CAAI,CAAC,EAAM,CAAC,cACnElB,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjO,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAEnF,gBAAiB,CAAAwC,QAAA,CAAC,aAE3D,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAElF,eAAgB,CAAAuC,QAAA,CAAC,YAExD,CAAQ,CAAC,EACN,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBjO,IAAA,WACEgO,SAAS,eAAA3C,MAAA,CAAgBxJ,YAAY,CAAG,QAAQ,CAAG,EAAE,CAAG,CACxD+O,OAAO,CAAEA,CAAA,GAAM9O,eAAe,CAAE+P,CAAC,EAAK,CAACA,CAAC,CAAE,CAAA5D,QAAA,CAEzCpM,YAAY,CAAG,UAAU,CAAG,YAAY,CACnC,CAAC,CACRA,YAAY,eACX7B,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAE7E,eAAgB,CAAAkC,QAAA,CAAC,YAE1D,CAAQ,CACT,EACE,CAAC,EACH,CAAC,cAENnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjO,IAAA,SAAMgO,SAAS,CAAC,WAAW,CAAE,CAAC,CAC7BnM,YAAY,cACX7B,IAAA,UACE6Q,KAAK,CAAE5O,UAAW,CAClB6O,QAAQ,CAAGxH,CAAC,EAAKpH,aAAa,CAACoH,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAChD,CAAC,cAEF7Q,IAAA,SAAMgO,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE,CAAA5M,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6D,SAAS,GAAI,QAAQ,CAAO,CAChE,EACE,CAAC,cACNlF,IAAA,QAAKgO,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAAhN,gBAAA,CAAEI,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEyJ,UAAU,UAAA7J,gBAAA,UAAAA,gBAAA,CAAI,CAAC,CAAM,CAAC,EACtD,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAENnB,KAAA,QAAKkO,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCnO,KAAA,QAAKkO,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnO,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjO,IAAA,OAAAiO,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBjO,IAAA,SAAMgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,oCAAkC,CAAM,CAAC,EAC9D,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BjO,IAAA,QAAKgO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAK,CAAC,cAC5CnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,WAAQkO,SAAS,CAAC,kBAAkB,CAAC4C,OAAO,CAAEA,CAAA,GAAMpG,WAAW,CAAC,GAAG,CAAE,CAAAyD,QAAA,EAAC,oBACvD,CAAC,CAAA5M,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,SAAS,GAAI,QAAQ,EACnC,CAAC,cACTnF,KAAA,WAAQkO,SAAS,CAAC,kBAAkB,CAAC4C,OAAO,CAAEA,CAAA,GAAMpG,WAAW,CAAC,GAAG,CAAE,CAAAyD,QAAA,EAAC,oBACvD,CAAC,CAAA5M,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6D,SAAS,GAAI,QAAQ,EACnC,CAAC,EACN,CAAC,EACH,CAAC,cACNpF,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BjO,IAAA,QAAKgO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAK,CAAC,cAC1CjO,IAAA,QAAKgO,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBjO,IAAA,WACEgO,SAAS,CAAC,gBAAgB,CAC1B8D,QAAQ,CAAE,EAACzQ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAE2J,gBAAgB,GAAI,CAACrG,OAAQ,CAC9CiM,OAAO,CAAEpF,UAAW,CAAAyC,QAAA,CAEnB,CAAA5M,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2J,gBAAgB,IAAK,GAAG,qBAAAK,MAAA,CACZ,CAAAhK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE4D,SAAS,GAAI,QAAQ,EAC1C,CAAA5D,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2J,gBAAgB,IAAK,GAAG,qBAAAK,MAAA,CACf,CAAAhK,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6D,SAAS,GAAI,QAAQ,EAC1C,0BAA0B,CACxB,CAAC,CACN,CAAC,cACNlF,IAAA,QAAKgO,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,2EAElC,CAAK,CAAC,EACH,CAAC,EACH,CAAC,cAENnO,KAAA,QAAKkO,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnO,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjO,IAAA,OAAAiO,QAAA,CAAI,gBAAc,CAAI,CAAC,CACtB1M,WAAW,eAAIvB,IAAA,SAAMgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,eAAQ,CAAM,CAAC,EACpD,CAAC,cACNnO,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BhD,OAAO,CAACkB,GAAG,CAAC,CAACrF,EAAE,CAAEiL,GAAG,gBACnBjS,KAAA,QAAKkO,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjO,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEnH,EAAE,CAACR,IAAI,CAAM,CAAC,cAC7CtG,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEnH,EAAE,CAACsE,WAAW,CAAM,CAAC,cACpDpL,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1B,GAAI,CAAAtH,IAAI,CAACG,EAAE,CAACwE,SAAS,CAAC,CAAC0G,kBAAkB,CAAC,CAAC,CACzC,CAAC,MAAA3G,MAAA,CAL8BvE,EAAE,CAACwE,SAAS,MAAAD,MAAA,CAAI0G,GAAG,CAMpD,CACN,CAAC,CACD9G,OAAO,CAACqB,MAAM,GAAK,CAAC,eAAItM,IAAA,QAAKgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,EACjE,CAAC,EACH,CAAC,EACH,CAAC,EACN,CACH,CAEA/M,IAAI,GAAK,SAAS,eACjBpB,KAAA,QAAKkO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5BtJ,OAAO,GAAK,EAAClD,OAAO,SAAPA,OAAO,WAAPA,OAAO,CAAEmI,KAAK,GAAI,CAAAnI,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,CAAC0C,MAAM,IAAK,CAAC,CAAC,eAC1DxM,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjO,IAAA,OAAAiO,QAAA,CAAI,yBAA2B,CAAI,CAAC,CACnCtM,cAAc,eAAI3B,IAAA,SAAMgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,eAAQ,CAAM,CAAC,EACvD,CAAC,cACNjO,IAAA,aACEgO,SAAS,CAAC,kBAAkB,CAC5BgD,WAAW,CAAC,yBAAyB,CACrCH,KAAK,CAAEpO,gBAAiB,CACxBqO,QAAQ,CAAGxH,CAAC,EAAK5G,mBAAmB,CAAC4G,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CACtD,CAAC,cACF/Q,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjO,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAE5E,WAAY,CAAC8F,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,oBAE1E,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAEpE,YAAa,CAACsF,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,eAEzE,CAAQ,CAAC,EACN,CAAC,cAENnO,KAAA,QAAKkO,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnO,KAAA,QAAKkO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjO,IAAA,UAAAiO,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BnO,KAAA,WAAQ+Q,KAAK,CAAElO,WAAY,CAACmO,QAAQ,CAAGxH,CAAC,EAAK1G,cAAc,CAAC0G,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAAA5C,QAAA,eAC1EjO,IAAA,WAAQ6Q,KAAK,CAAC,EAAE,CAAA5C,QAAA,CAAC,aAAW,CAAQ,CAAC,CACpC,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EACnBE,MAAM,CAAEC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,CAAC,CAC5BmC,GAAG,CAAEpC,CAAC,eACL/J,IAAA,WAAmB6Q,KAAK,CAAE9G,CAAC,CAACpJ,EAAG,CAAAsN,QAAA,CAC5BlE,CAAC,CAACgD,IAAI,EADIhD,CAAC,CAACpJ,EAEP,CACT,CAAC,EACE,CAAC,EACN,CAAC,cACNb,KAAA,QAAKkO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjO,IAAA,UAAAiO,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BnO,KAAA,WAAQ+Q,KAAK,CAAEhO,WAAY,CAACiO,QAAQ,CAAGxH,CAAC,EAAKxG,cAAc,CAACwG,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAAA5C,QAAA,eAC1EjO,IAAA,WAAQ6Q,KAAK,CAAC,EAAE,CAAA5C,QAAA,CAAC,aAAW,CAAQ,CAAC,CACpC,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EACnBE,MAAM,CAAEC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,CAAC,CAC5BmC,GAAG,CAAEpC,CAAC,eACL/J,IAAA,WAAmB6Q,KAAK,CAAE9G,CAAC,CAACpJ,EAAG,CAAAsN,QAAA,CAC5BlE,CAAC,CAACgD,IAAI,EADIhD,CAAC,CAACpJ,EAEP,CACT,CAAC,EACE,CAAC,EACN,CAAC,EACH,CAAC,cACNb,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjO,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAEnE,iBAAkB,CAACqF,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,sBAEhF,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAEhE,oBAAqB,CAACkF,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,wBAEjF,CAAQ,CAAC,EACN,CAAC,cAENnO,KAAA,QAAKkO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnO,KAAA,QAAKkO,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAAC,UAC3B,CAAC,GAAG,CACXI,WAAW,CAAC/B,MAAM,CACf+B,WAAW,CAAClC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACgD,IAAI,CAAC,CAACkF,IAAI,CAAC,IAAI,CAAC,CACzC,GAAG,EACJ,CAAC,cACNnS,KAAA,QAAKkO,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,SAC3B,CAAC,GAAG,CACVM,UAAU,CAACjC,MAAM,CAAGiC,UAAU,CAACpC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACgD,IAAI,CAAC,CAACkF,IAAI,CAAC,IAAI,CAAC,CAAG,GAAG,EAChE,CAAC,cACNnS,KAAA,QAAKkO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,EAAC,aAC3B,CAAC,GAAG,CACdO,cAAc,CAAClC,MAAM,CAClBkC,cAAc,CAACrC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACgD,IAAI,CAAC,CAACkF,IAAI,CAAC,IAAI,CAAC,CAC5C,GAAG,EACJ,CAAC,EACH,CAAC,cAENnS,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7B,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEyQ,uBAAuB,IAAIzQ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE0Q,uBAAuB,gBACnErS,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAAC,qBACZ,CAAC,GAAG,cACvBnO,KAAA,WAAAmO,QAAA,EACGpB,WAAW,CAACpL,OAAO,CAACyQ,uBAAuB,CAAC,CAAC,KAAG,CAAC,GAAG,CACpDrF,WAAW,CAACpL,OAAO,CAAC0Q,uBAAuB,CAAC,EACvC,CAAC,EACN,CACN,CACA,CAAA1Q,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE2Q,sBAAsB,IAAI3Q,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE4Q,sBAAsB,gBACjEvS,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAAC,oBACb,CAAC,GAAG,cACtBnO,KAAA,WAAAmO,QAAA,EACGpB,WAAW,CAACpL,OAAO,CAAC2Q,sBAAsB,CAAC,CAAC,KAAG,CAAC,GAAG,CACnDvF,WAAW,CAACpL,OAAO,CAAC4Q,sBAAsB,CAAC,EACtC,CAAC,EACN,CACN,EACE,CAAC,EACH,CACN,cAEDvS,KAAA,QAAKkO,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAC/BtJ,OAAO,EAAI,CAAC,CAAAlD,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EAAE0C,MAAM,CAAG,CAAC,eAC3CxM,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnO,KAAA,QAAKkO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjO,IAAA,UAAAiO,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BnO,KAAA,WAAQ+Q,KAAK,CAAElO,WAAY,CAACmO,QAAQ,CAAGxH,CAAC,EAAK1G,cAAc,CAAC0G,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAAA5C,QAAA,eAC1EjO,IAAA,WAAQ6Q,KAAK,CAAC,EAAE,CAAA5C,QAAA,CAAC,aAAW,CAAQ,CAAC,CACpC,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EACnBE,MAAM,CAAEC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,CAAC,CAC5BmC,GAAG,CAAEpC,CAAC,eACL/J,IAAA,WAAmB6Q,KAAK,CAAE9G,CAAC,CAACpJ,EAAG,CAAAsN,QAAA,CAC5BlE,CAAC,CAACgD,IAAI,EADIhD,CAAC,CAACpJ,EAEP,CACT,CAAC,EACE,CAAC,EACN,CAAC,cACNb,KAAA,QAAKkO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjO,IAAA,UAAAiO,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BnO,KAAA,WAAQ+Q,KAAK,CAAEhO,WAAY,CAACiO,QAAQ,CAAGxH,CAAC,EAAKxG,cAAc,CAACwG,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAAA5C,QAAA,eAC1EjO,IAAA,WAAQ6Q,KAAK,CAAC,EAAE,CAAA5C,QAAA,CAAC,aAAW,CAAQ,CAAC,CACpC,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EACnBE,MAAM,CAAEC,CAAC,EAAK,CAACA,CAAC,CAACC,UAAU,CAAC,CAC5BmC,GAAG,CAAEpC,CAAC,eACL/J,IAAA,WAAmB6Q,KAAK,CAAE9G,CAAC,CAACpJ,EAAG,CAAAsN,QAAA,CAC5BlE,CAAC,CAACgD,IAAI,EADIhD,CAAC,CAACpJ,EAEP,CACT,CAAC,EACE,CAAC,EACN,CAAC,cACNX,IAAA,WAAQgO,SAAS,CAAC,aAAa,CAAC4C,OAAO,CAAEnE,iBAAkB,CAACqF,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,cAEhF,CAAQ,CAAC,cACTjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAEhE,oBAAqB,CAACkF,QAAQ,CAAE,CAACnN,OAAQ,CAAAsJ,QAAA,CAAC,kBAEjF,CAAQ,CAAC,EACN,CACN,cACDnO,KAAA,QAAKkO,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnO,KAAA,QAAAmO,QAAA,eACEnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjO,IAAA,OAAAiO,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBjO,IAAA,QAAKgO,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBI,WAAW,CAAClC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACgD,IAAI,CAAC,CAACkF,IAAI,CAAC,KAAK,CAAC,CACxC,CAAC,CACL,CAAAxQ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8O,qBAAqB,GAAI9O,OAAO,CAAC8O,qBAAqB,CAACjE,MAAM,CAAG,CAAC,eACzEtM,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BxM,OAAO,CAAC8O,qBAAqB,CAACpE,GAAG,CAAC,CAACpF,CAAC,CAAEgL,GAAG,gBACxCjS,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7BpB,WAAW,CAAC9F,CAAC,CAAC2F,OAAO,CAAC,CAAC,MAAI,CAACG,WAAW,CAAC9F,CAAC,CAAC4F,OAAO,CAAC,QAAAtB,MAAA,CADVtE,CAAC,CAAC2F,OAAO,MAAArB,MAAA,CAAItE,CAAC,CAAC4F,OAAO,MAAAtB,MAAA,CAAI0G,GAAG,CAEnE,CACN,CAAC,CACC,CACN,EACE,CAAC,CACL7E,UAAU,CAAC,SAAS,CAAC,EACnB,CAAC,cACNpN,KAAA,QAAAmO,QAAA,eACEnO,KAAA,QAAKkO,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjO,IAAA,OAAAiO,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBjO,IAAA,QAAKgO,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBM,UAAU,CAACpC,GAAG,CAAEpC,CAAC,EAAKA,CAAC,CAACgD,IAAI,CAAC,CAACkF,IAAI,CAAC,KAAK,CAAC,CACvC,CAAC,CACL,CAAAxQ,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgP,oBAAoB,GAAIhP,OAAO,CAACgP,oBAAoB,CAACnE,MAAM,CAAG,CAAC,eACvEtM,IAAA,QAAKgO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BxM,OAAO,CAACgP,oBAAoB,CAACtE,GAAG,CAAC,CAACpF,CAAC,CAAEgL,GAAG,gBACvCjS,KAAA,QAAKkO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7BpB,WAAW,CAAC9F,CAAC,CAAC2F,OAAO,CAAC,CAAC,MAAI,CAACG,WAAW,CAAC9F,CAAC,CAAC4F,OAAO,CAAC,QAAAtB,MAAA,CADVtE,CAAC,CAAC2F,OAAO,MAAArB,MAAA,CAAItE,CAAC,CAAC4F,OAAO,MAAAtB,MAAA,CAAI0G,GAAG,CAEnE,CACN,CAAC,CACC,CACN,EACE,CAAC,CACL7E,UAAU,CAAC,QAAQ,CAAC,EAClB,CAAC,EACH,CAAC,cAENpN,KAAA,QAAKkO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjO,IAAA,OAAAiO,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBnO,KAAA,UAAAmO,QAAA,eACEjO,IAAA,UAAAiO,QAAA,cACEnO,KAAA,OAAAmO,QAAA,eACEjO,IAAA,OAAAiO,QAAA,CAAI,MAAI,CAAI,CAAC,cACbjO,IAAA,OAAAiO,QAAA,CAAI,QAAM,CAAI,CAAC,cACfjO,IAAA,OAAAiO,QAAA,CAAI,QAAM,CAAI,CAAC,EACb,CAAC,CACA,CAAC,cACRjO,IAAA,UAAAiO,QAAA,CACG,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EACnBjE,KAAK,CAAC,CAAC,CACPkI,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACQ,MAAM,CAAGP,CAAC,CAACO,MAAM,CAAC,CACnCnC,GAAG,CAAE1B,IAAI,eACR3K,KAAA,OAAAmO,QAAA,eACEjO,IAAA,OAAAiO,QAAA,CAAKxD,IAAI,CAACsC,IAAI,CAAK,CAAC,cACpB/M,IAAA,OAAAiO,QAAA,CAAKxD,IAAI,CAAC6D,MAAM,CAAK,CAAC,cACtBtO,IAAA,OAAAiO,QAAA,CACGxD,IAAI,CAACT,UAAU,CACZ,YAAY,CACZS,IAAI,CAAC6D,MAAM,GAAK,CAAC,CACjB,iBAAiB,CACjB,gBAAgB,CAClB,CAAC,GATE7D,IAAI,CAAC9J,EAUV,CACL,CAAC,CACC,CAAC,EACH,CAAC,EACL,CAAC,EACH,CAAC,cAENb,KAAA,QAAKkO,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BjO,IAAA,OAAAiO,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBnO,KAAA,WAAQ+Q,KAAK,CAAExM,YAAa,CAACyM,QAAQ,CAAGxH,CAAC,EAAKhF,eAAe,CAACgF,CAAC,CAACyH,MAAM,CAACF,KAAK,CAAE,CAAA5C,QAAA,eAC5EjO,IAAA,WAAQ6Q,KAAK,CAAC,EAAE,CAAA5C,QAAA,CAAC,kBAAgB,CAAQ,CAAC,CACzC,CAAC,CAAAxM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmI,KAAK,GAAI,EAAE,EAAEuC,GAAG,CAAEpC,CAAC,eAC5B/J,IAAA,WAAmB6Q,KAAK,CAAE9G,CAAC,CAACpJ,EAAG,CAAAsN,QAAA,CAC5BlE,CAAC,CAACgD,IAAI,EADIhD,CAAC,CAACpJ,EAEP,CACT,CAAC,EACI,CAAC,CACRgQ,eAAe,cACd3Q,IAAA,QAAKgO,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzB0C,eAAe,CAACvI,MAAM,cACrBpI,IAAA,QAAKgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE0C,eAAe,CAACvI,MAAM,CAAM,CAAC,cAErDtI,KAAA,QAAAmO,QAAA,EAAK,cACS,CAAC0C,eAAe,CAAClP,OAAO,CAAC,SAAO,CAACkP,eAAe,CAACnD,KAAK,CAAC,KAAG,CAAC,GAAG,CACzEmD,eAAe,CAACN,QAAQ,EAAI,KAAK,EAC/B,CACN,CACE,CAAC,cAENrQ,IAAA,QAAKgO,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,+BAA6B,CAAK,CAC1D,EACE,CAAC,EACH,CACN,CAEAtJ,OAAO,eACN3E,IAAA,QAAKgO,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBjO,IAAA,WAAQgO,SAAS,CAAC,WAAW,CAAC4C,OAAO,CAAElF,eAAgB,CAAAuC,QAAA,CAAC,YAExD,CAAQ,CAAC,CACN,CACN,cAEDjO,IAAA,UAAOsS,GAAG,CAAE/N,UAAW,CAACgO,GAAG,CAAC,qBAAqB,CAAE,CAAC,cACpDvS,IAAA,UAAOsS,GAAG,CAAE9N,QAAS,CAAC+N,GAAG,CAAC,mBAAmB,CAAE,CAAC,cAChDvS,IAAA,UAAOsS,GAAG,CAAE7N,WAAY,CAAC8N,GAAG,CAAC,uBAAuB,CAAE,CAAC,EACpD,CAAC,CAEV,CAEA,cAAe,CAAAzR,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}